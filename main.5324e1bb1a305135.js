(self.webpackChunkeCommerce=self.webpackChunkeCommerce||[]).push([[179],{525:(gd,ae,ui)=>{"use strict";function xe(n){return"function"==typeof n}function T(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const us=T(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Jo(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class qn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(xe(r))try{r()}catch(s){e=s instanceof us?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Si(s)}catch(o){e=e??[],o instanceof us?e=[...e,...o.errors]:e.push(o)}}if(e)throw new us(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Si(e);else{if(e instanceof qn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Jo(t,e)}remove(e){const{_finalizers:t}=this;t&&Jo(t,e),e instanceof qn&&e._removeParent(this)}}qn.EMPTY=(()=>{const n=new qn;return n.closed=!0,n})();const ju=qn.EMPTY;function fn(n){return n instanceof qn||n&&"closed"in n&&xe(n.remove)&&xe(n.add)&&xe(n.unsubscribe)}function Si(n){xe(n)?n():n.unsubscribe()}const Ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hu={setTimeout(n,e,...t){const{delegate:r}=Hu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Hu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function og(n){Hu.setTimeout(()=>{const{onUnhandledError:e}=Ai;if(!e)throw n;e(n)})}function ea(){}const md=Ot("C",void 0,void 0);function Ot(n,e,t){return{kind:n,value:e,error:t}}let Dr=null;function Jt(n){if(Ai.useDeprecatedSynchronousErrorHandling){const e=!Dr;if(e&&(Dr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Dr;if(Dr=null,t)throw r}}else n()}class ls extends qn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fn(e)&&e.add(this)):this.destination=cs}static create(e,t,r){return new Js(e,t,r)}next(e){this.isStopped?Kn(function yd(n){return Ot("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Kn(function ta(n){return Ot("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kn(md,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Cw=Function.prototype.bind;function Gu(n,e){return Cw.call(n,e)}class zu{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){eo(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){eo(r)}else eo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){eo(t)}}}class Js extends ls{constructor(e,t,r){let i;if(super(),xe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ai.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gu(e.next,s),error:e.error&&Gu(e.error,s),complete:e.complete&&Gu(e.complete,s)}):i=e}this.destination=new zu(i)}}function eo(n){Ai.useDeprecatedSynchronousErrorHandling?function Ue(n){Ai.useDeprecatedSynchronousErrorHandling&&Dr&&(Dr.errorThrown=!0,Dr.error=n)}(n):og(n)}function Kn(n,e){const{onStoppedNotification:t}=Ai;t&&Hu.setTimeout(()=>t(n,e))}const cs={closed:!0,next:ea,error:function Wu(n){throw n},complete:ea},zr="function"==typeof Symbol&&Symbol.observable||"@@observable";function ds(n){return n}function hs(...n){return to(n)}function to(n){return 0===n.length?ds:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ze=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Ew(n){return n&&n instanceof ls||function _d(n){return n&&xe(n.next)&&xe(n.error)&&xe(n.complete)}(n)&&fn(n)}(t)?t:new Js(t,r,i);return Jt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=na(r))((i,s)=>{const o=new Js({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[zr](){return this}pipe(...t){return to(t)(this)}toPromise(t){return new(t=na(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function na(n){var e;return null!==(e=n??Ai.Promise)&&void 0!==e?e:Promise}const vd=T(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Tr=(()=>{class n extends Ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ra(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new vd}next(t){Jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ju:(this.currentObservers=null,s.push(t),new qn(()=>{this.currentObservers=null,Jo(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ze;return t.source=this,t}}return n.create=(e,t)=>new ra(e,t),n})();class ra extends Tr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ju}}function ag(n){return xe(n?.lift)}function it(n){return e=>{if(ag(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(n,e,t,r,i){return new li(n,e,t,r,i)}class li extends ls{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function he(n,e){return it((t,r)=>{let i=0;t.subscribe(Le(r,s=>{r.next(n.call(e,s,i++))}))})}function bd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function ps(n){return this instanceof ps?(this.v=n,this):new ps(n)}function Sw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){r[p]&&(i[p]=function(g){return new Promise(function(y,w){s.push([p,g,y,w])>1||a(p,g)})})}function a(p,g){try{!function u(p){p.value instanceof ps?Promise.resolve(p.value.v).then(l,c):d(s[0][2],p)}(r[p](g))}catch(y){d(s[0][3],y)}}function l(p){a("next",p)}function c(p){a("throw",p)}function d(p,g){p(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function xw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Id(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}(a,u,(o=n[s](o)).done,o.value)})}}}const Ku=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function cg(n){return xe(n?.then)}function dg(n){return xe(n[zr])}function no(n){return Symbol.asyncIterator&&xe(n?.[Symbol.asyncIterator])}function hg(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fg=function kw(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pg(n){return xe(n?.[fg])}function Qu(n){return Sw(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ps(t.read());if(i)return yield ps(void 0);yield yield ps(r)}}finally{t.releaseLock()}})}function gg(n){return xe(n?.getReader)}function Sr(n){if(n instanceof Ze)return n;if(null!=n){if(dg(n))return function Mw(n){return new Ze(e=>{const t=n[zr]();if(xe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ku(n))return function Nw(n){return new Ze(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(cg(n))return function Rw(n){return new Ze(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,og)})}(n);if(no(n))return mg(n);if(pg(n))return function Pw(n){return new Ze(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(gg(n))return function Ow(n){return mg(Qu(n))}(n)}throw hg(n)}function mg(n){return new Ze(e=>{(function Fw(n,e){var t,r,i,s;return function qu(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(c.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=xw(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function di(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function At(n,e,t=1/0){return xe(e)?At((r,i)=>he((s,o)=>e(r,s,i,o))(Sr(n(r,i))),t):("number"==typeof e&&(t=e),it((r,i)=>function Lw(n,e,t,r,i,s,o,a){const u=[];let l=0,c=0,d=!1;const p=()=>{d&&!u.length&&!l&&e.complete()},g=w=>l<r?y(w):u.push(w),y=w=>{s&&e.next(w),l++;let b=!1;Sr(t(w,c++)).subscribe(Le(e,D=>{i?.(D),s?g(D):e.next(D)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;u.length&&l<r;){const D=u.shift();o?di(e,o,()=>y(D)):y(D)}p()}catch(D){e.error(D)}}))};return n.subscribe(Le(e,g,()=>{d=!0,p()})),()=>{a?.()}}(r,i,n,t)))}function Wr(n=1/0){return At(ds,n)}const Ar=new Ze(n=>n.complete());function Dd(n){return n[n.length-1]}function yg(n){return xe(Dd(n))?n.pop():void 0}function ro(n){return function Vw(n){return n&&xe(n.schedule)}(Dd(n))?n.pop():void 0}function Yu(n,e=0){return it((t,r)=>{t.subscribe(Le(r,i=>di(r,n,()=>r.next(i),e),()=>di(r,n,()=>r.complete(),e),i=>di(r,n,()=>r.error(i),e)))})}function Xu(n,e=0){return it((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ze(t=>{di(t,e,()=>{const r=n[Symbol.asyncIterator]();di(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function bt(n,e){return e?function Hw(n,e){if(null!=n){if(dg(n))return function _g(n,e){return Sr(n).pipe(Xu(e),Yu(e))}(n,e);if(Ku(n))return function vg(n,e){return new Ze(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(cg(n))return function Bw(n,e){return Sr(n).pipe(Xu(e),Yu(e))}(n,e);if(no(n))return wg(n,e);if(pg(n))return function $w(n,e){return new Ze(t=>{let r;return di(t,e,()=>{r=n[fg](),di(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}(n,e);if(gg(n))return function jw(n,e){return wg(Qu(n),e)}(n,e)}throw hg(n)}(n,e):Sr(n)}function Zu(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Js({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function He(n){for(let e in n)if(n[e]===He)return e;throw Error("Could not find renamed property on target object.")}function Td(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Sd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bg=He({__forward_ref__:He});function Ke(n){return n.__forward_ref__=Ke,n.toString=function(){return qe(this())},n}function ee(n){return xi(n)?n():n}function xi(n){return"function"==typeof n&&n.hasOwnProperty(bg)&&n.__forward_ref__===Ke}function Ju(n){return n&&!!n.\u0275providers}const el="https://g.co/ng/security#xss";class O extends Error{constructor(e,t){super(function tl(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function oe(n){return"string"==typeof n?n:null==n?"":String(n)}function ki(n,e){throw new O(-201,!1)}function gn(n,e){null==n&&function $e(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function sa(n){return Ad(n,rl)||Ad(n,Dg)}function Ad(n,e){return n.hasOwnProperty(e)?n[e]:null}function Eg(n){return n&&(n.hasOwnProperty(xd)||n.hasOwnProperty(io))?n[xd]:null}const rl=He({\u0275prov:He}),xd=He({\u0275inj:He}),Dg=He({ngInjectableDef:He}),io=He({ngInjectorDef:He});var te=(()=>((te=te||{})[te.Default=0]="Default",te[te.Host=1]="Host",te[te.Self=2]="Self",te[te.SkipSelf=4]="SkipSelf",te[te.Optional=8]="Optional",te))();let kd;function Yn(n){const e=kd;return kd=n,e}function Md(n,e,t){const r=sa(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&te.Optional?null:void 0!==e?e:void ki(qe(n))}const Qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),oa={},Nd="__NG_DI_FLAG__",il="ngTempTokenPath",Sg=/\n/gm,Pd="__source";let qr;function so(n){const e=qr;return qr=n,e}function tb(n,e=te.Default){if(void 0===qr)throw new O(-203,!1);return null===qr?Md(n,void 0,e):qr.get(n,e&te.Optional?null:void 0,e)}function q(n,e=te.Default){return(function Jw(){return kd}()||tb)(ee(n),e)}function Se(n,e=te.Default){return q(n,sl(e))}function sl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Od(n){const e=[];for(let t=0;t<n.length;t++){const r=ee(n[t]);if(Array.isArray(r)){if(0===r.length)throw new O(900,!1);let i,s=te.Default;for(let o=0;o<r.length;o++){const a=r[o],u=nb(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function aa(n,e){return n[Nd]=e,n.prototype[Nd]=e,n}function nb(n){return n[Nd]}function Ni(n){return{toString:n}.toString()}var xr=(()=>((xr=xr||{})[xr.OnPush=0]="OnPush",xr[xr.Default=1]="Default",xr))(),Kr=(()=>{return(n=Kr||(Kr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Kr;var n})();const kr={},Re=[],ua=He({\u0275cmp:He}),la=He({\u0275dir:He}),Ld=He({\u0275pipe:He}),kg=He({\u0275mod:He}),hi=He({\u0275fac:He}),Ri=He({__NG_ELEMENT_ID__:He});let ib=0;function Ln(n){return Ni(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===xr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Re,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Kr.Emulated,id:"c"+ib++,styles:n.styles||Re,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return i.inputs=Ng(n.inputs,r),i.outputs=Ng(n.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Mg).filter(Vd):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(yn).filter(Vd):null,i})}function Mg(n){return Ve(n)||tn(n)}function Vd(n){return null!==n}function Ht(n){return Ni(()=>({type:n.type,bootstrap:n.bootstrap||Re,declarations:n.declarations||Re,imports:n.imports||Re,exports:n.exports||Re,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ng(n,e){if(null==n)return kr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const ie=Ln;function mn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ve(n){return n[ua]||null}function tn(n){return n[la]||null}function yn(n){return n[Ld]||null}function Vn(n,e){const t=n[kg]||null;if(!t&&!0===e)throw new Error(`Type ${qe(n)} does not have '\u0275mod' property.`);return t}function Zn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Rr(n){return Array.isArray(n)&&!0===n[1]}function $d(n){return 0!=(4&n.flags)}function fa(n){return n.componentOffset>-1}function ys(n){return 1==(1&n.flags)}function h(n){return null!==n.template}function f(n){return 0!=(256&n[2])}function ga(n,e){return n.hasOwnProperty(hi)?n[hi]:null}class j3{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Yr(){return $M}function $M(n){return n.type.prototype.ngOnChanges&&(n.setInput=G3),H3}function H3(){const n=HM(this),e=n?.current;if(e){const t=n.previous;if(t===kr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function G3(n,e,t,r){const i=this.declaredInputs[t],s=HM(n)||function z3(n,e){return n[jM]=e}(n,{previous:kr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new j3(u&&u.currentValue,e,a===kr),n[r]=e}Yr.ngInherit=!0;const jM="__ngSimpleChanges__";function HM(n){return n[jM]||null}function vn(n){for(;Array.isArray(n);)n=n[0];return n}function Lg(n,e){return vn(e[n])}function Pr(n,e){return vn(e[n.index])}function WM(n,e){return n.data[e]}function Or(n,e){const t=e[n];return Zn(t)?t:t[0]}function Vg(n){return 64==(64&n[2])}function lo(n,e){return null==e?null:n[e]}function qM(n){n[18]=0}function ub(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const ce={lFrame:rN(null),bindingsEnabled:!0};function QM(){return ce.bindingsEnabled}function N(){return ce.lFrame.lView}function Pe(){return ce.lFrame.tView}function ma(n){return ce.lFrame.contextLView=n,n[8]}function ya(n){return ce.lFrame.contextLView=null,n}function wn(){let n=YM();for(;null!==n&&64===n.type;)n=n.parent;return n}function YM(){return ce.lFrame.currentTNode}function Oi(n,e){const t=ce.lFrame;t.currentTNode=n,t.isParent=e}function lb(){return ce.lFrame.isParent}function Jn(){const n=ce.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ll(){return ce.lFrame.bindingIndex++}function i5(n,e){const t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,db(e)}function db(n){ce.lFrame.currentDirectiveIndex=n}function fb(n){ce.lFrame.currentQueryIndex=n}function o5(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function tN(n,e,t){if(t&te.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&te.Host||(i=o5(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=ce.lFrame=nN();return r.currentTNode=e,r.lView=n,!0}function pb(n){const e=nN(),t=n[1];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nN(){const n=ce.lFrame,e=null===n?null:n.child;return null===e?rN(n):e}function rN(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function iN(){const n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const sN=iN;function gb(){const n=iN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function er(){return ce.lFrame.selectedIndex}function _a(n){ce.lFrame.selectedIndex=n}function gt(){const n=ce.lFrame;return WM(n.tView,n.selectedIndex)}function Ug(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks||(n.viewHooks=[])).push(-t,u),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=c&&(n.destroyHooks||(n.destroyHooks=[])).push(t,c)}}function Bg(n,e,t){oN(n,e,3,t)}function $g(n,e,t,r){(3&n[2])===t&&oN(n,e,t,r)}function mb(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function oN(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[18]+=65536),(a<s||-1==s)&&(g5(n,t,e,u),n[18]=(4294901760&n[18])+u+2),u++}function g5(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Hd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function _b(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];uN(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function aN(n){return 3===n||4===n||6===n}function uN(n){return 64===n.charCodeAt(0)}function Gd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||lN(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function lN(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function cN(n){return-1!==n}function jg(n){return 32767&n}function Hg(n,e){let t=function v5(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let vb=!0;function Gg(n){const e=vb;return vb=n,e}let w5=0;const Fi={};function zg(n,e){const t=fN(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,wb(r.data,n),wb(e,null),wb(r.blueprint,null));const i=bb(n,e),s=n.injectorIndex;if(cN(i)){const o=jg(i),a=Hg(i,e),u=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function wb(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fN(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function bb(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=wN(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Ib(n,e,t){!function b5(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ri)&&(r=t[Ri]),null==r&&(r=t[Ri]=w5++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function pN(n,e,t){if(t&te.Optional||void 0!==n)return n;ki()}function gN(n,e,t,r){if(t&te.Optional&&void 0===r&&(r=null),!(t&(te.Self|te.Host))){const i=n[9],s=Yn(void 0);try{return i?i.get(e,r,t&te.Optional):Md(e,r,t&te.Optional)}finally{Yn(s)}}return pN(r,0,t)}function mN(n,e,t,r=te.Default,i){if(null!==n){if(1024&e[2]){const o=function T5(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=yN(s,o,t,r|te.Self,Fi);if(a!==Fi)return a;let u=s.parent;if(!u){const l=o[21];if(l){const c=l.get(t,Fi,r);if(c!==Fi)return c}u=wN(o),o=o[15]}s=u}return i}(n,e,t,r,Fi);if(o!==Fi)return o}const s=yN(n,e,t,r,Fi);if(s!==Fi)return s}return gN(e,t,r,i)}function yN(n,e,t,r,i){const s=function E5(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ri)?n[Ri]:void 0;return"number"==typeof e?e>=0?255&e:D5:e}(t);if("function"==typeof s){if(!tN(e,n,r))return r&te.Host?pN(i,0,r):gN(e,t,r,i);try{const o=s(r);if(null!=o||r&te.Optional)return o;ki()}finally{sN()}}else if("number"==typeof s){let o=null,a=fN(n,e),u=-1,l=r&te.Host?e[16][6]:null;for((-1===a||r&te.SkipSelf)&&(u=-1===a?bb(n,e):e[a+8],-1!==u&&vN(r,!1)?(o=e[1],a=jg(u),e=Hg(u,e)):a=-1);-1!==a;){const c=e[1];if(_N(s,a,c.data)){const d=C5(a,e,t,o,r,l);if(d!==Fi)return d}u=e[a+8],-1!==u&&vN(r,e[1].data[a+8]===l)&&_N(s,a,e)?(o=c,a=jg(u),e=Hg(u,e)):a=-1}}return i}function C5(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],c=function Wg(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,c=s>>20,p=i?a+c:n.directiveEnd;for(let g=r?a:a+c;g<p;g++){const y=o[g];if(g<u&&t===y||g>=u&&y.type===t)return g}if(i){const g=o[u];if(g&&h(g)&&g.type===t)return u}return null}(a,o,t,null==r?fa(a)&&vb:r!=o&&0!=(3&a.type),i&te.Host&&s===a);return null!==c?va(e,o,c,a):Fi}function va(n,e,t,r){let i=n[t];const s=e.data;if(function m5(n){return n instanceof Hd}(i)){const o=i;o.resolving&&function Ww(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new O(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Be(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():oe(n)}(s[t]));const a=Gg(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Yn(o.injectImpl):null;tN(n,r,te.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function p5(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=$M(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==u&&Yn(u),Gg(a),o.resolving=!1,sN()}}return i}function _N(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function vN(n,e){return!(n&te.Self||n&te.Host&&e)}class dl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mN(this._tNode,this._lView,e,sl(r),t)}}function D5(){return new dl(wn(),N())}function bn(n){return Ni(()=>{const e=n.prototype.constructor,t=e[hi]||Cb(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[hi]||Cb(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Cb(n){return xi(n)?()=>{const e=Cb(ee(n));return e&&e()}:ga(n)}function wN(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const fl="__parameters__";function gl(n,e,t){return Ni(()=>{const r=function Eb(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,c){const d=u.hasOwnProperty(fl)?u[fl]:Object.defineProperty(u,fl,{value:[]})[fl];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class K{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=J({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wa(n,e){n.forEach(t=>Array.isArray(t)?wa(t,e):e(t))}function IN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Fr(n,e,t){let r=ml(n,e);return r>=0?n[1|r]=t:(r=~r,function k5(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Tb(n,e){const t=ml(n,e);if(t>=0)return n[1|t]}function ml(n,e){return function CN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Lt=aa(gl("Optional"),8),Kd=aa(gl("SkipSelf"),4);var fr=(()=>((fr=fr||{})[fr.Important=1]="Important",fr[fr.DashCase=2]="DashCase",fr))();const Nb=new Map;let Z5=0;const Pb="__ngContext__";function Bn(n,e){Zn(e)?(n[Pb]=e[20],function e4(n){Nb.set(n[20],n)}(e)):n[Pb]=e}function Fb(n,e){return undefined(n,e)}function Zd(n){const e=n[3];return Rr(e)?e[3]:e}function Lb(n){return HN(n[13])}function Vb(n){return HN(n[4])}function HN(n){for(;null!==n&&!Rr(n);)n=n[4];return n}function _l(n,e,t,r,i){if(null!=r){let s,o=!1;Rr(r)?s=r:Zn(r)&&(o=!0,r=r[0]);const a=vn(r);0===n&&null!==t?null==i?QN(e,t,a):ba(e,t,a,i||null,!0):1===n&&null!==t?ba(e,t,a,i||null,!0):2===n?function zb(n,e,t){const r=Zg(n,e);r&&function w4(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function C4(n,e,t,r,i){const s=t[7];s!==vn(t)&&_l(e,n,r,s,i);for(let a=10;a<t.length;a++){const u=t[a];Jd(u[1],u,n,e,r,s)}}(e,n,s,t,i)}}function Bb(n,e,t){return n.createElement(e,t)}function zN(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,ub(i,-1)),t.splice(r,1)}function $b(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&zN(i,r),e>0&&(n[t-1][4]=r[4]);const s=Kg(n,10+e);!function h4(n,e){Jd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function WN(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Jd(n,e,t,3,null,null),function g4(n){let e=n[13];if(!e)return jb(n[1],n);for(;e;){let t=null;if(Zn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Zn(e)&&jb(e[1],e),e=e[3];null===e&&(e=n),Zn(e)&&jb(e[1],e),t=e&&e[4]}e=t}}(e)}}function jb(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function v4(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Hd)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];try{u.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function _4(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Rr(e[3])){t!==e[3]&&zN(t,e);const r=e[19];null!==r&&r.detachView(n)}!function t4(n){Nb.delete(n[20])}(e)}}function qN(n,e,t){return function KN(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Kr.None||s===Kr.Emulated)return null}return Pr(r,t)}}(n,e.parent,t)}function ba(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QN(n,e,t){n.appendChild(e,t)}function YN(n,e,t,r,i){null!==r?ba(n,e,t,r,i):QN(n,e,t)}function Zg(n,e){return n.parentNode(e)}let Kb,nm,JN=function ZN(n,e,t){return 40&n.type?Pr(n,t):null};function Jg(n,e,t,r){const i=qN(n,r,e),s=e[11],a=function XN(n,e,t){return JN(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)YN(s,i,t[u],a,!1);else YN(s,i,t,a,!1)}function em(n,e){if(null!==e){const t=e.type;if(3&t)return Pr(e,n);if(4&t)return Gb(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return em(n,r);{const i=n[e.index];return Rr(i)?Gb(-1,i):vn(i)}}if(32&t)return Fb(e,n)()||vn(n[e.index]);{const r=tR(n,e);return null!==r?Array.isArray(r)?r[0]:em(Zd(n[16]),r):em(n,e.next)}}return null}function tR(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Gb(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return em(r,i)}return e[7]}function Wb(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Bn(vn(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)Wb(n,e,t.child,r,i,s,!1),_l(e,n,i,a,s);else if(32&u){const l=Fb(t,r);let c;for(;c=l();)_l(e,n,i,c,s);_l(e,n,i,a,s)}else 16&u?nR(n,e,r,t,i,s):_l(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Jd(n,e,t,r,i,s){Wb(t,r,n.firstChild,e,i,s,!1)}function nR(n,e,t,r,i,s){const o=t[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)_l(e,n,i,u[l],s);else Wb(n,e,u,o[3],i,s,!0)}function rR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function iR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&_b(n,e,r),null!==i&&rR(n,e,i),null!==s&&function D4(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function uR(n){return function Qb(){if(void 0===nm&&(nm=null,Qe.trustedTypes))try{nm=Qe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nm}()?.createScriptURL(n)||n}class lR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${el})`}}function co(n){return n instanceof lR?n.changingThisBreaksApplicationSecurity:n}function eh(n,e){const t=function O4(n){return n instanceof lR&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${el})`)}return t===e}const U4=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Vt=(()=>((Vt=Vt||{})[Vt.NONE=0]="NONE",Vt[Vt.HTML=1]="HTML",Vt[Vt.STYLE=2]="STYLE",Vt[Vt.SCRIPT=3]="SCRIPT",Vt[Vt.URL=4]="URL",Vt[Vt.RESOURCE_URL=5]="RESOURCE_URL",Vt))();function Ca(n){const e=nh();return e?e.sanitize(Vt.URL,n)||"":eh(n,"URL")?co(n):function Yb(n){return(n=String(n)).match(U4)?n:"unsafe:"+n}(oe(n))}function mR(n){const e=nh();if(e)return uR(e.sanitize(Vt.RESOURCE_URL,n)||"");if(eh(n,"ResourceURL"))return uR(co(n));throw new O(904,!1)}function nh(){const n=N();return n&&n[12]}const im=new K("ENVIRONMENT_INITIALIZER"),_R=new K("INJECTOR",-1),vR=new K("INJECTOR_DEF_TYPES");class wR{get(e,t=oa){if(t===oa){const r=new Error(`NullInjectorError: No provider for ${qe(e)}!`);throw r.name="NullInjectorError",r}return t}}function Z4(...n){return{\u0275providers:bR(0,n),\u0275fromNgModule:!0}}function bR(n,...e){const t=[],r=new Set;let i;return wa(e,s=>{const o=s;eI(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&IR(i,t),t}function IR(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];tI(i,s=>{e.push(s)})}}function eI(n,e,t,r){if(!(n=ee(n)))return!1;let i=null,s=Eg(n);const o=!s&&Ve(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Eg(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)eI(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{wa(s.imports,c=>{eI(c,e,t,r)&&(l||(l=[]),l.push(c))})}finally{}void 0!==l&&IR(l,e)}if(!a){const l=ga(i)||(()=>new i);e.push({provide:i,useFactory:l,deps:Re},{provide:vR,useValue:i,multi:!0},{provide:im,useValue:()=>q(i),multi:!0})}const u=s.providers;null==u||a||tI(u,c=>{e.push(c)})}}return i!==n&&void 0!==n.providers}function tI(n,e){for(let t of n)Ju(t)&&(t=t.\u0275providers),Array.isArray(t)?tI(t,e):e(t)}const J4=He({provide:String,useValue:He});function nI(n){return null!==n&&"object"==typeof n&&J4 in n}function Ea(n){return"function"==typeof n}const rI=new K("Set Injector scope."),sm={},t6={};let iI;function om(){return void 0===iI&&(iI=new wR),iI}class bs{}class DR extends bs{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oI(e,o=>this.processProvider(o)),this.records.set(_R,vl(void 0,this)),i.has("environment")&&this.records.set(bs,vl(void 0,this));const s=this.records.get(rI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(vR.multi,Re,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=so(this),r=Yn(void 0);try{return e()}finally{so(t),Yn(r)}}get(e,t=oa,r=te.Default){this.assertNotDestroyed(),r=sl(r);const i=so(this),s=Yn(void 0);try{if(!(r&te.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function o6(n){return"function"==typeof n||"object"==typeof n&&n instanceof K}(e)&&sa(e);a=u&&this.injectableDefInScope(u)?vl(sI(e),sm):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&te.Self?om():this.parent).get(e,t=r&te.Optional&&t===oa?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[il]=o[il]||[]).unshift(qe(e)),i)throw o;return function Fd(n,e,t,r){const i=n[il];throw e[Pd]&&i.unshift(e[Pd]),n.message=function xg(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=qe(e);if(Array.isArray(e))i=e.map(qe).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):qe(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Sg,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[il]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Yn(s),so(i)}}resolveInjectorInitializers(){const e=so(this),t=Yn(void 0);try{const r=this.get(im.multi,Re,te.Self);for(const i of r)i()}finally{so(e),Yn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){let t=Ea(e=ee(e))?e:ee(e&&e.provide);const r=function r6(n){return nI(n)?vl(void 0,n.useValue):vl(TR(n),sm)}(e);if(Ea(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=vl(void 0,sm,!0),i.factory=()=>Od(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===sm&&(t.value=t6,t.value=t.factory()),"object"==typeof t.value&&t.value&&function s6(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ee(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function sI(n){const e=sa(n),t=null!==e?e.factory:ga(n);if(null!==t)return t;if(n instanceof K)throw new O(204,!1);if(n instanceof Function)return function n6(n){const e=n.length;if(e>0)throw function qd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new O(204,!1);const t=function Xw(n){const e=n&&(n[rl]||n[Dg]);if(e){const t=function Zw(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new O(204,!1)}function TR(n,e,t){let r;if(Ea(n)){const i=ee(n);return ga(i)||sI(i)}if(nI(n))r=()=>ee(n.useValue);else if(function ER(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Od(n.deps||[]));else if(function CR(n){return!(!n||!n.useExisting)}(n))r=()=>q(ee(n.useExisting));else{const i=ee(n&&(n.useClass||n.provide));if(!function i6(n){return!!n.deps}(n))return ga(i)||sI(i);r=()=>new i(...Od(n.deps))}return r}function vl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oI(n,e){for(const t of n)Array.isArray(t)?oI(t,e):t&&Ju(t)?oI(t.\u0275providers,e):e(t)}class a6{}class SR{}class l6{resolveComponentFactory(e){throw function u6(n){const e=Error(`No component factory found for ${qe(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let rh=(()=>{class n{}return n.NULL=new l6,n})();function c6(){return wl(wn(),N())}function wl(n,e){return new Lr(Pr(n,e))}let Lr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=c6,n})();class xR{}let Is=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function h6(){const n=N(),t=Or(wn().index,n);return(Zn(t)?t:n)[11]}(),n})(),f6=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>null}),n})();class bl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const kR=new bl("15.1.2"),aI={};function lI(n){return n.ngOriginalError}class Il{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&lI(e);for(;t&&lI(t);)t=lI(t);return t||null}}function Cs(n){return n instanceof Function?n():n}function NR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const RR="ng-template";function E6(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==NR(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function PR(n){return 4===n.type&&n.value!==RR}function D6(n,e,t){return e===(4!==n.type||t?n.value:RR)}function T6(n,e,t){let r=4;const i=n.attrs||[],s=function x6(n){for(let e=0;e<n.length;e++)if(aN(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!D6(n,u,t)||""===u&&1===e.length){if(pi(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!E6(n.attrs,l,t)){if(pi(r))return!1;o=!0}continue}const d=S6(8&r?"class":u,i,PR(n),t);if(-1===d){if(pi(r))return!1;o=!0;continue}if(""!==l){let p;p=d>s?"":i[d+1].toLowerCase();const g=8&r?p:null;if(g&&-1!==NR(g,l,0)||2&r&&l!==p){if(pi(r))return!1;o=!0}}}}else{if(!o&&!pi(r)&&!pi(u))return!1;if(o&&pi(u))continue;o=!1,r=u|1&r}}return pi(r)||o}function pi(n){return 0==(1&n)}function S6(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function k6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function OR(n,e,t=!1){for(let r=0;r<e.length;r++)if(T6(n,e[r],t))return!0;return!1}function FR(n,e){return n?":not("+e.trim()+")":e}function N6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!pi(o)&&(e+=FR(s,i),i=""),r=o,s=s||!pi(r);t++}return""!==i&&(e+=FR(s,i)),e}const de={};function pe(n){LR(Pe(),N(),er()+n,!1)}function LR(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Bg(e,s,t)}else{const s=n.preOrderHooks;null!==s&&$g(e,s,0,t)}_a(t)}function $R(n,e=null,t=null,r){const i=jR(n,e,t,r);return i.resolveInjectorInitializers(),i}function jR(n,e=null,t=null,r,i=new Set){const s=[t||Re,Z4(n)];return r=r||("object"==typeof n?void 0:qe(n)),new DR(s,e||om(),r||null,i)}let tr=(()=>{class n{static create(t,r){if(Array.isArray(t))return $R({name:""},r,t,"");{const i=t.name??"";return $R({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=oa,n.NULL=new wR,n.\u0275prov=J({token:n,providedIn:"any",factory:()=>q(_R)}),n.__NG_ELEMENT_ID__=-1,n})();function A(n,e=te.Default){const t=N();return null===t?q(n,e):mN(wn(),t,ee(n),e)}function YR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];fb(t[r]),o.contentQueries(2,e[s],s)}}}function um(n,e,t,r,i,s,o,a,u,l,c){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==c||n&&1024&n[2])&&(d[2]|=1024),qM(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=u||n&&n[12]||null,d[9]=l||n&&n[9]||null,d[6]=s,d[20]=function J5(){return Z5++}(),d[21]=c,d[16]=2==e.type?n[16]:d,d}function Dl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function pI(n,e,t,r,i){const s=YM(),o=lb(),u=n.data[e]=function i8(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(n,e,t,r,i),function r5(){return ce.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function jd(){const n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Oi(s,!0),s}function ih(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gI(n,e,t){pb(e);try{const r=n.viewQuery;null!==r&&DI(1,r,t);const i=n.template;null!==i&&XR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&YR(n,e),n.staticViewQueries&&DI(2,n.viewQuery,t);const s=n.components;null!==s&&function t8(n,e){for(let t=0;t<e.length;t++)C8(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,gb()}}function lm(n,e,t,r){const i=e[2];if(128!=(128&i)){pb(e);try{qM(e),function ZM(n){return ce.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&XR(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Bg(e,l,null)}else{const l=n.preOrderHooks;null!==l&&$g(e,l,0,null),mb(e,0)}if(function b8(n){for(let e=Lb(n);null!==e;e=Vb(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r];512&i[2]||ub(i[3],1),i[2]|=512}}}(e),function w8(n){for(let e=Lb(n);null!==e;e=Vb(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Vg(r)&&lm(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&YR(n,e),o){const l=n.contentCheckHooks;null!==l&&Bg(e,l)}else{const l=n.contentHooks;null!==l&&$g(e,l,1),mb(e,1)}!function J6(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)_a(~i);else{const s=i,o=t[++r],a=t[++r];i5(o,s),a(2,e[s])}}}finally{_a(-1)}}(n,e);const a=n.components;null!==a&&function e8(n,e){for(let t=0;t<e.length;t++)I8(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&DI(2,u,r),o){const l=n.viewCheckHooks;null!==l&&Bg(e,l)}else{const l=n.viewHooks;null!==l&&$g(e,l,2),mb(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ub(e[3],-1))}finally{gb()}}}function XR(n,e,t,r,i){const s=er(),o=2&r;try{_a(-1),o&&e.length>22&&LR(n,e,22,!1),t(r,i)}finally{_a(s)}}function mI(n,e,t){if($d(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function yI(n,e,t){QM()&&(function c8(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;fa(t)&&function y8(n,e,t){const r=Pr(e,n),i=ZR(t),s=n[10],o=cm(n,um(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||zg(t,e),Bn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=va(e,n,a,t);Bn(l,e),null!==o&&_8(0,a-i,l,u,0,o),h(u)&&(Or(t.index,e)[8]=va(e,n,a,t))}}(n,e,t,Pr(t,e)),64==(64&t.flags)&&iP(n,e,t))}function _I(n,e,t=Pr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function ZR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=vI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function vI(n,e,t,r,i,s,o,a,u,l){const c=22+r,d=c+i,p=function n8(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:de);return t}(c,d),g="function"==typeof l?l():l;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:g,incompleteFirstPass:!1}}function eP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?tP(t,e,i,s):r.hasOwnProperty(i)&&tP(t,e,r[i],s)}return t}function tP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Vr(n,e,t,r,i,s,o,a){const u=Pr(e,t);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(TI(n,t,c,r,i),fa(e)&&nP(t,e.index)):3&e.type&&(r=function o8(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function nP(n,e){const t=Or(e,n);16&t[2]||(t[2]|=32)}function wI(n,e,t,r){let i=!1;if(QM()){const s=null===r?null:{"":-1},o=function h8(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(OR(e,o.selectors,!1))if(r||(r=[]),h(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),bI(n,e,a.length)}else r.unshift(o),bI(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let a,u;null===o?a=u=null:[a,u]=o,null!==a&&(i=!0,rP(n,e,t,a,s,u)),s&&function f8(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new O(-301,!1);r.push(e[i],s)}}}(t,r,s)}return t.mergedAttrs=Gd(t.mergedAttrs,t.attrs),i}function rP(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Ib(zg(t,e),n,r[l].type);!function g8(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const c=r[l];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,u=ih(n,e,r.length,null);for(let l=0;l<r.length;l++){const c=r[l];t.mergedAttrs=Gd(t.mergedAttrs,c.hostAttrs),m8(n,t,e,u,c),p8(u,c,i),null!==c.contentQueries&&(t.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(t.flags|=64);const d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),u++}!function s8(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let c=e.directiveStart;c<i;c++){const d=s[c],p=t?t.get(d):null,y=p?p.outputs:null;u=eP(d.inputs,c,u,p?p.inputs:null),l=eP(d.outputs,c,l,y);const w=null===u||null===o||PR(e)?null:v8(u,c,o);a.push(w)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function iP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function s5(){return ce.lFrame.currentDirectiveIndex}();try{_a(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];db(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&d8(u,l)}}finally{_a(-1),db(o)}}function d8(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function bI(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function p8(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;h(e)&&(t[""]=n)}}function m8(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ga(i.type)),o=new Hd(s,h(i),A);n.blueprint[r]=o,t[r]=o,function u8(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function l8(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,ih(n,t,i.hostVars,de),i)}function Li(n,e,t,r,i,s){const o=Pr(n,e);!function II(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?oe(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[11],o,s,n.value,t,r,i)}function _8(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const l=o[u++],c=o[u++],d=o[u++];null!==a?r.setInput(t,d,l,c):t[c]=d}}}function v8(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function sP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function I8(n,e){const t=Or(e,n);if(Vg(t)){const r=t[1];48&t[2]?lm(r,t,r.template,t[8]):t[5]>0&&CI(t)}}function CI(n){for(let r=Lb(n);null!==r;r=Vb(r))for(let i=10;i<r.length;i++){const s=r[i];if(Vg(s))if(512&s[2]){const o=s[1];lm(o,s,o.template,s[8])}else s[5]>0&&CI(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Or(t[r],n);Vg(i)&&i[5]>0&&CI(i)}}function C8(n,e){const t=Or(e,n),r=t[1];(function E8(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),gI(r,t,t[8])}function cm(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function EI(n){for(;n;){n[2]|=32;const e=Zd(n);if(f(n)&&!e)return n;n=e}return null}function dm(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{lm(n,e,n.template,t)}catch(o){throw r&&lP(e,o),o}finally{i.end&&i.end()}}function DI(n,e,t){fb(0),e(n,t)}function oP(n){return n[7]||(n[7]=[])}function aP(n){return n.cleanup||(n.cleanup=[])}function lP(n,e){const t=n[9],r=t?t.get(Il,null):null;r&&r.handleError(e)}function TI(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],u=e[o],l=n.data[o];null!==l.setInput?l.setInput(u,i,r,a):u[a]=i}}function hm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Sd(i,a):2==s&&(r=Sd(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function fm(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(vn(s)),Rr(s))for(let a=10;a<s.length;a++){const u=s[a],l=u[1].firstChild;null!==l&&fm(u[1],u,l,r)}const o=t.type;if(8&o)fm(n,e,t.child,r);else if(32&o){const a=Fb(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=tR(e,t);if(Array.isArray(a))r.push(...a);else{const u=Zd(e[16]);fm(u[1],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class sh{get rootNodes(){const e=this._lView,t=e[1];return fm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Rr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&($b(e,r),Kg(t,r))}this._attachedToViewContainer=!1}WN(this._lView[1],this._lView)}onDestroy(e){!function JR(n,e,t,r){const i=oP(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&aP(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){EI(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function p4(n,e){Jd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e}}class D8 extends sh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dm(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class cP extends rh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ve(e);return new oh(t,this.ngModule)}}function dP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class S8{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=sl(r);const i=this.injector.get(e,aI,r);return i!==aI||t===aI?i:this.parentInjector.get(e,t,r)}}class oh extends SR{get inputs(){return dP(this.componentDef.inputs)}get outputs(){return dP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function R6(n){return n.map(N6).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof bs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new S8(e,s):e,a=o.get(xR,null);if(null===a)throw new O(407,!1);const u=o.get(f6,null),l=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function r8(n,e,t){return n.selectRootElement(e,t===Kr.ShadowDom)}(l,r,this.componentDef.encapsulation):Bb(l,c,function T8(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),p=this.componentDef.onPush?288:272,g=vI(0,null,null,1,0,null,null,null,null,null),y=um(null,g,null,p,null,null,a,l,u,o,null);let w,b;pb(y);try{const D=this.componentDef;let M,I=null;D.findHostDirectiveDefs?(M=[],I=new Map,D.findHostDirectiveDefs(D,M,I),M.push(D)):M=[D];const $=function x8(n,e){const t=n[1];return n[22]=e,Dl(t,22,2,"#host",null)}(y,d),Q=function k8(n,e,t,r,i,s,o,a){const u=i[1];!function M8(n,e,t,r){for(const i of n)e.mergedAttrs=Gd(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(hm(e,e.mergedAttrs,!0),null!==t&&iR(r,t,e))}(r,n,e,o);const l=s.createRenderer(e,t),c=um(i,ZR(t),null,t.onPush?32:16,i[n.index],n,s,l,a||null,null,null);return u.firstCreatePass&&bI(u,n,r.length-1),cm(i,c),i[n.index]=c}($,d,D,M,y,a,l);b=WM(g,22),d&&function R8(n,e,t,r){if(r)_b(n,t,["ng-version",kR.full]);else{const{attrs:i,classes:s}=function P6(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!pi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&_b(n,t,i),s&&s.length>0&&rR(n,t,s.join(" "))}}(l,D,d,r),void 0!==t&&function P8(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(b,this.ngContentSelectors,t),w=function N8(n,e,t,r,i,s){const o=wn(),a=i[1],u=Pr(o,i);rP(a,i,o,t,null,r);for(let c=0;c<t.length;c++)Bn(va(i,a,o.directiveStart+c,o),i);iP(a,i,o),u&&Bn(u,i);const l=va(i,a,o.directiveStart+o.componentOffset,o);if(n[8]=i[8]=l,null!==s)for(const c of s)c(l,e);return mI(a,o,n),l}(Q,D,M,I,y,[O8]),gI(g,y,null)}finally{gb()}return new A8(this.componentType,w,wl(b,y),y,b)}}class A8 extends a6{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new D8(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;TI(s[1],s,i,e,t),nP(s,this._tNode.index)}}get injector(){return new dl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function O8(){const n=wn();Ug(N()[1],n)}function ze(n){let e=function hP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(h(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=SI(n.inputs),o.declaredInputs=SI(n.declaredInputs),o.outputs=SI(n.outputs);const a=i.hostBindings;a&&U8(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&L8(n,u),l&&V8(n,l),Td(n.inputs,i.inputs),Td(n.declaredInputs,i.declaredInputs),Td(n.outputs,i.outputs),h(i)&&i.data.animation){const c=n.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ze&&(t=!1)}}e=Object.getPrototypeOf(e)}!function F8(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gd(i.hostAttrs,t=Gd(t,i.hostAttrs))}}(r)}function SI(n){return n===kr?{}:n===Re?[]:n}function L8(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function V8(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function U8(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let pm=null;function Da(){if(!pm){const n=Qe.Symbol;if(n&&n.iterator)pm=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(pm=r)}}}return pm}function gm(n){return!!function AI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Da()in n)}function $n(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ui(n,e,t,r){const i=N();return $n(i,ll(),e)&&(Pe(),Li(gt(),i,n,e,t,r)),Ui}function Sl(n,e,t,r){return $n(n,ll(),t)?e+oe(t)+r:de}function gr(n,e,t,r,i,s,o,a){const u=N(),l=Pe(),c=n+22,d=l.firstCreatePass?function Q8(n,e,t,r,i,s,o,a,u){const l=e.consts,c=Dl(e,n,4,o||null,lo(l,a));wI(e,t,c,lo(l,u)),Ug(e,c);const d=c.tViews=vI(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,l,u,e,t,r,i,s,o):l.data[c];Oi(d,!1);const p=u[11].createComment("");Jg(l,u,p,d),Bn(p,u),cm(u,u[c]=sP(p,u,p,d)),ys(d)&&yI(l,u,d),null!=o&&_I(u,d,a)}function mt(n,e,t){const r=N();return $n(r,ll(),e)&&Vr(Pe(),gt(),r,n,e,r[11],t,!1),mt}function xI(n,e,t,r,i){const o=i?"class":"style";TI(n,t,e.inputs[o],o,r)}function x(n,e,t,r){const i=N(),s=Pe(),o=22+n,a=i[11],u=i[o]=Bb(a,e,function f5(){return ce.lFrame.currentNamespace}()),l=s.firstCreatePass?function Z8(n,e,t,r,i,s,o){const a=e.consts,l=Dl(e,n,2,i,lo(a,s));return wI(e,t,l,lo(a,o)),null!==l.attrs&&hm(l,l.attrs,!1),null!==l.mergedAttrs&&hm(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,0,e,t,r):s.data[o];return Oi(l,!0),iR(a,u,l),32!=(32&l.flags)&&Jg(s,i,u,l),0===function X3(){return ce.lFrame.elementDepthCount}()&&Bn(u,i),function Z3(){ce.lFrame.elementDepthCount++}(),ys(l)&&(yI(s,i,l),mI(s,l,i)),null!==r&&_I(i,l),x}function k(){let n=wn();lb()?function cb(){ce.lFrame.isParent=!1}():(n=n.parent,Oi(n,!1));const e=n;!function J3(){ce.lFrame.elementDepthCount--}();const t=Pe();return t.firstCreatePass&&(Ug(t,n),$d(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function y5(n){return 0!=(8&n.flags)}(e)&&xI(t,e,N(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function _5(n){return 0!=(16&n.flags)}(e)&&xI(t,e,N(),e.stylesWithoutHost,!1),k}function Ce(n,e,t,r){return x(n,e,t,r),k(),Ce}function Ol(){return N()}function uh(n){return!!n&&"function"==typeof n.then}const NI=function TP(n){return!!n&&"function"==typeof n.subscribe};function yt(n,e,t,r){const i=N(),s=Pe(),o=wn();return function AP(n,e,t,r,i,s,o){const a=ys(r),l=n.firstCreatePass&&aP(n),c=e[8],d=oP(e);let p=!0;if(3&r.type||o){const w=Pr(r,e),b=o?o(w):w,D=d.length,M=o?$=>o(vn($[r.index])):r.index;let I=null;if(!o&&a&&(I=function e7(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=s,I.__ngLastListenerFn__=s,p=!1;else{s=kP(r,e,c,s,!1);const $=t.listen(b,i,s);d.push(s,$),l&&l.push(i,M,D,D+1)}}else s=kP(r,e,c,s,!1);const g=r.outputs;let y;if(p&&null!==g&&(y=g[i])){const w=y.length;if(w)for(let b=0;b<w;b+=2){const Q=e[y[b]][y[b+1]].subscribe(s),X=d.length;d.push(s,Q),l&&l.push(i,r.index,X,-(X+1))}}}(s,i,i[11],o,n,e,r),yt}function xP(n,e,t,r){try{return!1!==t(r)}catch(i){return lP(n,i),!1}}function kP(n,e,t,r,i){return function s(o){if(o===Function)return r;EI(n.componentOffset>-1?Or(n.index,e):e);let u=xP(e,0,r,o),l=s.__ngNextListenerFn__;for(;l;)u=xP(e,0,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function gi(n=1){return function a5(n){return(ce.lFrame.contextLView=function u5(n,e){for(;n>0;)e=e[15],n--;return e}(n,ce.lFrame.contextLView))[8]}(n)}function Sa(n,e,t){return RI(n,"",e,"",t),Sa}function RI(n,e,t,r,i){const s=N(),o=Sl(s,e,t,r);return o!==de&&Vr(Pe(),gt(),s,n,o,s[11],i,!1),RI}function ym(n,e){return n<<17|e<<2}function ho(n){return n>>17&32767}function PI(n){return 2|n}function Aa(n){return(131068&n)>>2}function OI(n,e){return-131069&n|e<<2}function FI(n){return 1|n}function UP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?ho(s):Aa(s),u=!1;for(;0!==a&&(!1===u||o);){const c=n[a+1];l7(n[a],e)&&(u=!0,n[a+1]=r?FI(c):PI(c)),a=r?ho(c):Aa(c)}u&&(n[t+1]=r?PI(s):FI(s))}function l7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ml(n,e)>=0}function _m(n,e){return function mi(n,e,t,r){const i=N(),s=Pe(),o=function vs(n){const e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function KP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[er()],o=function qP(n,e){return e>=n.expandoStartIndex}(n,t);(function ZP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function _7(n,e,t,r){const i=function hb(n){const e=ce.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=lh(t=LI(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=LI(i,n,e,t,r),null===s){let u=function v7(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Aa(r))return n[ho(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=LI(null,n,e,u[1],r),u=lh(u,e.attrs,r),function w7(n,e,t,r){n[ho(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function b7(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=lh(r,n[s].hostAttrs,t);return lh(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function a7(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ho(o),u=Aa(o);n[r]=t;let c,l=!1;if(Array.isArray(t)?(c=t[1],(null===c||ml(t,c)>0)&&(l=!0)):c=t,i)if(0!==u){const p=ho(n[a+1]);n[r+1]=ym(p,a),0!==p&&(n[p+1]=OI(n[p+1],r)),n[a+1]=function s7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=ym(a,0),0!==a&&(n[a+1]=OI(n[a+1],r)),a=r;else n[r+1]=ym(u,0),0===a?a=r:n[u+1]=OI(n[u+1],r),u=r;l&&(n[r+1]=PI(n[r+1])),UP(n,c,r,!0),UP(n,c,r,!1),function u7(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ml(s,e)>=0&&(t[r+1]=FI(t[r+1]))}(e,c,n,r,s),o=ym(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==de&&$n(i,o,e)&&function YP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],c=function o7(n){return 1==(1&n)}(l)?XP(u,e,t,i,Aa(l),o):void 0;vm(c)||(vm(s)||function i7(n){return 2==(2&n)}(l)&&(s=XP(u,null,t,i,a,o)),function E4(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:fr.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=fr.Important),n.setStyle(t,r,i,s))}}(r,o,Lg(er(),t),i,s))}(s,s.data[er()],i,i[11],n,i[o+1]=function E7(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=qe(co(n)))),n}(e,t),r,o)}(n,e,null,!0),_m}function LI(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=lh(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function lh(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Fr(n,o,!!t||e[++s]))}return void 0===n?null:n}function XP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),c=l?u[1]:u,d=null===c;let p=t[i+1];p===de&&(p=d?Re:void 0);let g=d?Tb(p,r):c===r?p:void 0;if(l&&!vm(g)&&(g=Tb(u,r)),vm(g)&&(a=g,o))return a;const y=n[i+1];i=o?ho(y):Aa(y)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Tb(u,r))}return a}function vm(n){return void 0!==n}function B(n,e=""){const t=N(),r=Pe(),i=n+22,s=r.firstCreatePass?Dl(r,i,1,e,null):r.data[i],o=t[i]=function Ub(n,e){return n.createText(e)}(t[11],e);Jg(r,t,o,s),Oi(s,!1)}function In(n){return ch("",n,""),In}function ch(n,e,t){const r=N(),i=Sl(r,n,e,t);return i!==de&&function Es(n,e,t){const r=Lg(e,n);!function GN(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,er(),i),ch}const xa=void 0;var G7=["en",[["a","p"],["AM","PM"],xa],[["AM","PM"],xa,xa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xa,"{1} 'at' {0}",xa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function H7(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Ll={};function nr(n){const e=function z7(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=vO(e);if(t)return t;const r=e.split("-")[0];if(t=vO(r),t)return t;if("en"===r)return G7;throw new O(701,!1)}function vO(n){return n in Ll||(Ll[n]=Qe.ng&&Qe.ng.common&&Qe.ng.common.locales&&Qe.ng.common.locales[n]),Ll[n]}var j=(()=>((j=j||{})[j.LocaleId=0]="LocaleId",j[j.DayPeriodsFormat=1]="DayPeriodsFormat",j[j.DayPeriodsStandalone=2]="DayPeriodsStandalone",j[j.DaysFormat=3]="DaysFormat",j[j.DaysStandalone=4]="DaysStandalone",j[j.MonthsFormat=5]="MonthsFormat",j[j.MonthsStandalone=6]="MonthsStandalone",j[j.Eras=7]="Eras",j[j.FirstDayOfWeek=8]="FirstDayOfWeek",j[j.WeekendRange=9]="WeekendRange",j[j.DateFormat=10]="DateFormat",j[j.TimeFormat=11]="TimeFormat",j[j.DateTimeFormat=12]="DateTimeFormat",j[j.NumberSymbols=13]="NumberSymbols",j[j.NumberFormats=14]="NumberFormats",j[j.CurrencyCode=15]="CurrencyCode",j[j.CurrencySymbol=16]="CurrencySymbol",j[j.CurrencyName=17]="CurrencyName",j[j.Currencies=18]="Currencies",j[j.Directionality=19]="Directionality",j[j.PluralCase=20]="PluralCase",j[j.ExtraData=21]="ExtraData",j))();const Vl="en-US";let wO=Vl;function BI(n,e,t,r,i){if(n=ee(n),Array.isArray(n))for(let s=0;s<n.length;s++)BI(n[s],e,t,r,i);else{const s=Pe(),o=N();let a=Ea(n)?n:ee(n.provide),u=TR(n);const l=wn(),c=1048575&l.providerIndexes,d=l.directiveStart,p=l.providerIndexes>>20;if(Ea(n)||!n.multi){const g=new Hd(u,i,A),y=jI(a,e,i?c:c+p,d);-1===y?(Ib(zg(l,o),s,a),$I(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(g),o.push(g)):(t[y]=g,o[y]=g)}else{const g=jI(a,e,c+p,d),y=jI(a,e,c,c+p),b=y>=0&&t[y];if(i&&!b||!i&&!(g>=0&&t[g])){Ib(zg(l,o),s,a);const D=function jK(n,e,t,r,i){const s=new Hd(n,t,A);return s.multi=[],s.index=e,s.componentProviders=0,zO(s,i,r&&!t),s}(i?$K:BK,t.length,i,r,u);!i&&b&&(t[y].providerFactory=D),$I(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(D),o.push(D)}else $I(s,n,g>-1?g:y,zO(t[i?y:g],u,!i&&r));!i&&r&&b&&t[y].componentProviders++}}}function $I(n,e,t,r){const i=Ea(e),s=function e6(n){return!!n.useClass}(e);if(i||s){const u=(s?ee(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const c=l.indexOf(t);-1===c?l.push(t,[r,u]):l[c+1].push(r,u)}else l.push(t,u)}}}function zO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function BK(n,e,t,r){return HI(this.multi,[])}function $K(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=va(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),HI(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],HI(i,s);return s}function HI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ct(n,e=[]){return t=>{t.providersResolver=(r,i)=>function UK(n,e,t){const r=Pe();if(r.firstCreatePass){const i=h(n);BI(t,r.data,r.blueprint,i,!0),BI(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ul{}class WO{}class qO extends Ul{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cP(this);const r=Vn(e);this._bootstrapComponents=Cs(r.bootstrap),this._r3Injector=jR(e,t,[{provide:Ul,useValue:this},{provide:rh,useValue:this.componentFactoryResolver}],qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class GI extends WO{constructor(e){super(),this.moduleType=e}create(e){return new qO(this.moduleType,e)}}class GK extends Ul{constructor(e,t,r){super(),this.componentFactoryResolver=new cP(this),this.instance=null;const i=new DR([...e,{provide:Ul,useValue:this},{provide:rh,useValue:this.componentFactoryResolver}],t||om(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Em(n,e,t=null){return new GK(n,e,t).injector}let zK=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=bR(0,t.type),i=r.length>0?Em([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(q(bs))}),n})();function KO(n){n.getStandaloneInjector=e=>e.get(zK).getOrCreateStandaloneInjector(n)}function Dm(n,e,t,r){return tF(N(),Jn(),n,e,t,r)}function tF(n,e,t,r,i,s){const o=e+t;return $n(n,o,i)?function Vi(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function mh(n,e){const t=n[e];return t===de?void 0:t}(n,o+1)}function ka(n,e){const t=Pe();let r;const i=n+22;t.firstCreatePass?(r=function l9(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=ga(r.type)),o=Yn(A);try{const a=Gg(!1),u=s();return Gg(a),function Y8(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,N(),i,u),u}finally{Yn(o)}}function Ma(n,e,t){const r=n+22,i=N(),s=function ul(n,e){return n[e]}(i,r);return function yh(n,e){return n[1].data[e].pure}(i,r)?tF(i,Jn(),e,s.transform,t,s):s.transform(t)}function WI(n){return e=>{setTimeout(n,void 0,e)}}const Ct=class p9 extends Tr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=WI(s),i&&(i=WI(i)),o&&(o=WI(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof qn&&e.add(a),a}};let Ds=(()=>{class n{}return n.__NG_ELEMENT_ID__=_9,n})();const m9=Ds,y9=class extends m9{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=um(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),gI(r,i,e),new sh(i)}};function _9(){return function Tm(n,e){return 4&n.type?new y9(e,n,wl(n,e)):null}(wn(),N())}let _i=(()=>{class n{}return n.__NG_ELEMENT_ID__=v9,n})();function v9(){return function uF(n,e){let t;const r=e[n.index];if(Rr(r))t=r;else{let i;if(8&n.type)i=vn(r);else{const s=e[11];i=s.createComment("");const o=Pr(n,e);ba(s,Zg(s,o),i,function b4(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=sP(r,e,i,n),cm(e,t)}return new oF(t,n,e)}(wn(),N())}const w9=_i,oF=class extends w9{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return wl(this._hostTNode,this._hostLView)}get injector(){return new dl(this._hostTNode,this._hostLView)}get parentInjector(){const e=bb(this._hostTNode,this._hostLView);if(cN(e)){const t=Hg(e,this._hostLView),r=jg(e);return new dl(t[1].data[r+8],t)}return new dl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=aF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function Wd(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const u=o?e:new oh(Ve(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const p=(o?l:this.parentInjector).get(bs,null);p&&(s=p)}const c=u.create(l,i,void 0,s);return this.insert(c.hostView,a),c}insert(e,t){const r=e._lView,i=r[1];if(function Y3(n){return Rr(n[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],p=new oF(d,d[6],d[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function m4(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],IN(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function y4(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,o,s);const a=Gb(s,o),u=r[11],l=Zg(u,o[7]);return null!==l&&function f4(n,e,t,r,i,s){r[0]=i,r[6]=e,Jd(n,r,t,1,i,s)}(i,o[6],u,r,l,a),e.attachToViewContainerRef(),IN(KI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=aF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=$b(this._lContainer,t);r&&(Kg(KI(this._lContainer),t),WN(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=$b(this._lContainer,t);return r&&null!=Kg(KI(this._lContainer),t)?new sh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function aF(n){return n[8]}function KI(n){return n[8]||(n[8]=[])}function Am(...n){}const xm=new K("Application Initializer");let km=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Am,this.reject=Am,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(uh(s))t.push(s);else if(NI(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(q(xm,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vh=new K("AppId",{providedIn:"root",factory:function OF(){return`${iC()}${iC()}${iC()}`}});function iC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FF=new K("Platform Initializer"),Mm=new K("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LF=new K("appBootstrapListener");let K9=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ts=new K("LocaleId",{providedIn:"root",factory:()=>Se(Ts,te.Optional|te.SkipSelf)||function Q9(){return typeof $localize<"u"&&$localize.locale||Vl}()}),Y9=new K("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class X9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let VF=(()=>{class n{compileModuleSync(t){return new GI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Cs(Vn(t).declarations).reduce((o,a)=>{const u=Ve(a);return u&&o.push(new oh(u)),o},[]);return new X9(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eQ=(()=>Promise.resolve(0))();function sC(n){typeof Zone>"u"?eQ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class st{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ct(!1),this.onMicrotaskEmpty=new Ct(!1),this.onStable=new Ct(!1),this.onError=new Ct(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function tQ(){let n=Qe.requestAnimationFrame,e=Qe.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function iQ(n){const e=()=>{!function rQ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Qe,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,aC(n),n.isCheckStableRunning=!0,oC(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),aC(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return $F(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),jF(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return $F(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),jF(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,aC(n),oC(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!st.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(st.isInAngularZone())throw new O(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,nQ,Am,Am);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const nQ={};function oC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aC(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $F(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jF(n){n._nesting--,oC(n)}class sQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ct,this.onMicrotaskEmpty=new Ct,this.onStable=new Ct,this.onError=new Ct}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const HF=new K(""),Nm=new K("");let cC,uC=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cC||(function oQ(n){cC=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{st.assertNotInAngularZone(),sC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sC(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(q(st),q(lC),q(Nm))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),lC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return cC?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),fo=null;const GF=new K("AllowMultipleToken"),dC=new K("PlatformDestroyListeners");class zF{constructor(e,t){this.name=e,this.token=t}}function qF(n,e,t=[]){const r=`Platform: ${e}`,i=new K(r);return(s=[])=>{let o=hC();if(!o||o.injector.get(GF,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function lQ(n){if(fo&&!fo.get(GF,!1))throw new O(400,!1);fo=n;const e=n.get(QF);(function WF(n){const e=n.get(FF,null);e&&e.forEach(t=>t())})(n)}(function KF(n=[],e){return tr.create({name:e,providers:[{provide:rI,useValue:"platform"},{provide:dC,useValue:new Set([()=>fo=null])},...n]})}(a,r))}return function dQ(n){const e=hC();if(!e)throw new O(401,!1);return e}()}}function hC(){return fo?.get(QF)??null}let QF=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function XF(n,e){let t;return t="noop"===n?new sQ:("zone.js"===n?void 0:n)||new st(e),t}(r?.ngZone,function YF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:st,useValue:i}];return i.run(()=>{const o=tr.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),u=a.injector.get(Il,null);if(!u)throw new O(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:c=>{u.handleError(c)}});a.onDestroy(()=>{Pm(this._modules,a),l.unsubscribe()})}),function ZF(n,e,t){try{const r=t();return uh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const l=a.injector.get(km);return l.runInitializers(),l.donePromise.then(()=>(function bO(n){gn(n,"Expected localeId to be defined"),"string"==typeof n&&(wO=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ts,Vl)||Vl),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=JF({},r);return function aQ(n,e,t){const r=new GI(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Rm);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new O(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(dC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(q(tr))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function JF(n,e){return Array.isArray(e)?e.reduce(JF,n):{...n,...e}}let Rm=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ze(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Ze(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{st.assertNotInAngularZone(),sC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{st.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),l.unsubscribe()}});this.isStable=function Gw(...n){const e=ro(n),t=function Uw(n,e){return"number"==typeof Dd(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Sr(r[0]):Wr(t)(bt(r,e)):Ar}(s,o.pipe(function zw(n={}){const{connector:e=(()=>new Tr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,c=!1,d=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),o=u=void 0,c=d=!1},y=()=>{const w=o;g(),w?.unsubscribe()};return it((w,b)=>{l++,!d&&!c&&p();const D=u=u??e();b.add(()=>{l--,0===l&&!d&&!c&&(a=Zu(y,i))}),D.subscribe(b),!o&&l>0&&(o=new Js({next:M=>D.next(M),error:M=>{d=!0,p(),a=Zu(g,t,M),D.error(M)},complete:()=>{c=!0,p(),a=Zu(g,r),D.complete()}}),Sr(w).subscribe(o))})(s)}}()))}bootstrap(t,r){const i=t instanceof SR;if(!this._injector.get(km).done)throw!i&&function oo(n){const e=Ve(n)||tn(n)||yn(n);return null!==e&&e.standalone}(t),new O(405,false);let o;o=i?t:this._injector.get(rh).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function uQ(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ul),l=o.create(tr.NULL,[],r||o.selector,a),c=l.location.nativeElement,d=l.injector.get(HF,null);return d?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),Pm(this.components,l),d?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Pm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(LF,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Pm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new O(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(q(st),q(bs),q(Il))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Om=(()=>{class n{}return n.__NG_ELEMENT_ID__=fQ,n})();function fQ(n){return function pQ(n,e,t){if(fa(n)&&!t){const r=Or(n.index,e);return new sh(r,r)}return 47&n.type?new sh(e[16],e):null}(wn(),N(),16==(16&n))}class iL{constructor(){}supports(e){return gm(e)}create(e){return new wQ(e)}}const vQ=(n,e)=>e;class wQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||vQ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<oL(r,i,s)?t:r,a=oL(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,c=u-i;if(l!=c){for(let p=0;p<l;p++){const g=p<s.length?s[p]:s[p]=0,y=g+p;c<=y&&y<l&&(s[p]=g+1)}s[o.previousIndex]=c-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!gm(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function W8(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Da()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new bQ(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new sL),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class bQ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class sL{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new IQ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oL(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function uL(){return new Vm([new iL])}let Vm=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||uL()),deps:[[n,new Kd,new Lt]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new O(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:uL}),n})();const SQ=qF(null,"core",[]);let AQ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(q(Rm))},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({}),n})();function jl(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let yC=null;function ji(){return yC}class MQ{}const mr=new K("DocumentToken");let _C=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return function NQ(){return q(cL)}()},providedIn:"platform"}),n})();const RQ=new K("Location Initialized");let cL=(()=>{class n extends _C{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ji().getBaseHref(this._doc)}onPopState(t){const r=ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){dL()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){dL()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(q(mr))},n.\u0275prov=J({token:n,factory:function(){return function PQ(){return new cL(q(mr))}()},providedIn:"platform"}),n})();function dL(){return!!window.history.pushState}function vC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hL(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function As(n){return n&&"?"!==n[0]?"?"+n:n}let Ra=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return Se(pL)},providedIn:"root"}),n})();const fL=new K("appBaseHref");let pL=(()=>{class n extends Ra{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Se(mr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+As(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+As(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+As(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(q(_C),q(fL,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OQ=(()=>{class n extends Ra{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=vC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+As(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+As(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(q(_C),q(fL,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),wC=(()=>{class n{constructor(t){this._subject=new Ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function VQ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hL(gL(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+As(r))}normalize(t){return n.stripTrailingSlash(function LQ(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,gL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+As(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+As(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=As,n.joinWithSlash=vC,n.stripTrailingSlash=hL,n.\u0275fac=function(t){return new(t||n)(q(Ra))},n.\u0275prov=J({token:n,factory:function(){return function FQ(){return new wC(q(Ra))}()},providedIn:"root"}),n})();function gL(n){return n.replace(/\/index.html$/,"")}const mL={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var yr=(()=>((yr=yr||{})[yr.Decimal=0]="Decimal",yr[yr.Percent=1]="Percent",yr[yr.Currency=2]="Currency",yr[yr.Scientific=3]="Scientific",yr))(),ne=(()=>((ne=ne||{})[ne.Decimal=0]="Decimal",ne[ne.Group=1]="Group",ne[ne.List=2]="List",ne[ne.PercentSign=3]="PercentSign",ne[ne.PlusSign=4]="PlusSign",ne[ne.MinusSign=5]="MinusSign",ne[ne.Exponential=6]="Exponential",ne[ne.SuperscriptingExponent=7]="SuperscriptingExponent",ne[ne.PerMille=8]="PerMille",ne[ne.Infinity=9]="Infinity",ne[ne.NaN=10]="NaN",ne[ne.TimeSeparator=11]="TimeSeparator",ne[ne.CurrencyDecimal=12]="CurrencyDecimal",ne[ne.CurrencyGroup=13]="CurrencyGroup",ne))();function ei(n,e){const t=nr(n),r=t[j.NumberSymbols][e];if(typeof r>"u"){if(e===ne.CurrencyDecimal)return t[j.NumberSymbols][ne.Decimal];if(e===ne.CurrencyGroup)return t[j.NumberSymbols][ne.Group]}return r}const cY=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function pY(n,e,t,r,i){const o=function SC(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let c=0;c<u.length;c++){const d=u.charAt(c);"0"===d?t.minFrac=t.maxFrac=c+1:"#"===d?t.maxFrac=c+1:t.posSuf+=d}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const c=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf("#");t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+c).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function bC(n,e){return nr(n)[j.NumberFormats][e]}(e,yr.Currency),ei(e,ne.MinusSign));return o.minFrac=function YQ(n){let e;const t=mL[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),o.maxFrac=o.minFrac,function TC(n,e,t,r,i,s,o=!1){let a="",u=!1;if(isFinite(n)){let l=function _Y(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(l=function yY(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let c=e.minInt,d=e.minFrac,p=e.maxFrac;if(s){const M=s.match(cY);if(null===M)throw new Error(`${s} is not a valid digit info`);const I=M[1],$=M[3],Q=M[5];null!=I&&(c=AC(I)),null!=$&&(d=AC($)),null!=Q?p=AC(Q):null!=$&&d>p&&(p=d)}!function vY(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const l=e+n.integerLen,c=r.reduceRight(function(d,p,g,y){return y[g]=(p+=d)<10?p:p-10,u&&(0===y[g]&&g>=l?y.pop():u=!1),p>=10?1:0},0);c&&(r.unshift(c),n.integerLen++)}(l,d,p);let g=l.digits,y=l.integerLen;const w=l.exponent;let b=[];for(u=g.every(M=>!M);y<c;y++)g.unshift(0);for(;y<0;y++)g.unshift(0);y>0?b=g.splice(y,g.length):(b=g,g=[0]);const D=[];for(g.length>=e.lgSize&&D.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)D.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&D.unshift(g.join("")),a=D.join(ei(t,r)),b.length&&(a+=ei(t,i)+b.join("")),w&&(a+=ei(t,ne.Exponential)+"+"+w)}else a=ei(t,ne.Infinity);return a=n<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,o,e,ne.CurrencyGroup,ne.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function AC(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class EY{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new EY(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),SL(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{SL(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A(_i),A(Ds),A(Vm))},n.\u0275dir=ie({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function SL(n,e){n.context.$implicit=e.item}let AL=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new TY,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A(_i),A(Ds))},n.\u0275dir=ie({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class TY{constructor(){this.$implicit=null,this.ngIf=null}}function xL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${qe(e)}'.`)}let Ch=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",s,o){if(!function RC(n){return!(null==n||""===n||n!=n)}(t))return null;o=o||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function KQ(n,e,t="en"){const r=function GQ(n){return nr(n)[j.Currencies]}(t)[n]||mL[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(a,"symbol"===i?"wide":"narrow",o):i);try{return pY(function PC(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),o,a,r,s)}catch(u){throw function bi(n,e){return new O(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(A(Ts,16),A(Y9,16))},n.\u0275pipe=mn({name:"currency",type:n,pure:!0,standalone:!0}),n})();let OC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({}),n})();let JY=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>new eX(q(mr),window)}),n})();class eX{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function tX(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=RL(this.window.history)||RL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function RL(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xX extends MQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class VC extends xX{static makeCurrent(){!function kQ(n){yC||(yC=n)}(new VC)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kX(){return Dh=Dh||document.querySelector("base"),Dh?Dh.getAttribute("href"):null}();return null==t?null:function MX(n){Qm=Qm||document.createElement("a"),Qm.setAttribute("href",n);const e=Qm.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Dh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bY(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Qm,Dh=null;const UL=new K("TRANSITION_ID"),RX=[{provide:xm,useFactory:function NX(n,e,t){return()=>{t.get(km).donePromise.then(()=>{const r=ji(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[UL,mr,tr],multi:!0}];let OX=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Ym=new K("EventManagerPlugins");let Xm=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(q(Ym),q(st))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class BL{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=ji().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let $L=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Th=(()=>{class n extends $L{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(jL),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jL))}}return n.\u0275fac=function(t){return new(t||n)(q(mr))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function jL(n){ji().remove(n)}const UC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},BC=/%COMP%/g;function $C(n,e){return e.flat(100).map(t=>t.replace(BC,n))}function zL(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let jC=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new HC(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Kr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new $X(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case Kr.ShadowDom:return new jX(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=$C(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(q(Xm),q(Th),q(vh))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class HC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(UC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qL(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qL(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=UC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=UC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(t,r,i&fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zL(r)):this.eventManager.addEventListener(e,t,zL(r))}}function qL(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $X extends HC{constructor(e,t,r,i){super(e),this.component=r;const s=$C(i+"-"+r.id,r.styles);t.addStyles(s),this.contentAttr=function VX(n){return"_ngcontent-%COMP%".replace(BC,n)}(i+"-"+r.id),this.hostAttr=function UX(n){return"_nghost-%COMP%".replace(BC,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class jX extends HC{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=$C(i.id,i.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let HX=(()=>{class n extends BL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(q(mr))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const KL=["alt","control","meta","shift"],GX={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zX={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let WX=(()=>{class n extends BL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ji().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),KL.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=GX[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),KL.forEach(o=>{o!==i&&(0,zX[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(q(mr))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const YL=[{provide:Mm,useValue:"browser"},{provide:FF,useValue:function qX(){VC.makeCurrent()},multi:!0},{provide:mr,useFactory:function QX(){return function x4(n){Kb=n}(document),document},deps:[]}],YX=qF(SQ,"browser",YL),XL=new K(""),ZL=[{provide:Nm,useClass:class PX{addToWindow(e){Qe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Qe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qe.getAllAngularRootElements=()=>e.getAllRootElements(),Qe.frameworkStabilizers||(Qe.frameworkStabilizers=[]),Qe.frameworkStabilizers.push(r=>{const i=Qe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?ji().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:HF,useClass:uC,deps:[st,lC,Nm]},{provide:uC,useClass:uC,deps:[st,lC,Nm]}],JL=[{provide:rI,useValue:"root"},{provide:Il,useFactory:function KX(){return new Il},deps:[]},{provide:Ym,useClass:HX,multi:!0,deps:[mr,st,Mm]},{provide:Ym,useClass:WX,multi:!0,deps:[mr]},{provide:jC,useClass:jC,deps:[Xm,Th,vh]},{provide:xR,useExisting:jC},{provide:$L,useExisting:Th},{provide:Th,useClass:Th,deps:[mr]},{provide:Xm,useClass:Xm,deps:[Ym,st]},{provide:class nX{},useClass:OX,deps:[]},[]];let XX=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:vh,useValue:t.appId},{provide:UL,useExisting:vh},RX]}}}return n.\u0275fac=function(t){return new(t||n)(q(XL,12))},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({providers:[...JL,...ZL],imports:[OC,AQ]}),n})(),e2=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(q(mr))},n.\u0275prov=J({token:n,factory:function(t){let r=null;return r=t?new t:function JX(){return new e2(q(mr))}(),r},providedIn:"root"}),n})();function re(...n){return bt(n,ro(n))}typeof window<"u"&&window;class Ii extends Tr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Zm=T(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:aZ}=Array,{getPrototypeOf:uZ,prototype:lZ,keys:cZ}=Object;function r2(n){if(1===n.length){const e=n[0];if(aZ(e))return{args:e,keys:null};if(function dZ(n){return n&&"object"==typeof n&&uZ(n)===lZ}(e)){const t=cZ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:hZ}=Array;function i2(n){return he(e=>function fZ(n,e){return hZ(e)?n(...e):n(e)}(n,e))}function s2(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function o2(...n){const e=ro(n),t=yg(n),{args:r,keys:i}=r2(n);if(0===r.length)return bt([],e);const s=new Ze(function pZ(n,e,t=ds){return r=>{a2(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)a2(e,()=>{const l=bt(n[u],e);let c=!1;l.subscribe(Le(r,d=>{s[u]=d,c||(c=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>s2(i,o):ds));return t?s.pipe(i2(t)):s}function a2(n,e,t){n?di(t,n,e):e()}function WC(...n){return function gZ(){return Wr(1)}()(bt(n,ro(n)))}function u2(n){return new Ze(e=>{Sr(n()).subscribe(e)})}function Sh(n,e){const t=xe(n)?n:()=>n,r=i=>i.error(t());return new Ze(e?i=>e.schedule(r,0,i):r)}function qC(){return it((n,e)=>{let t=null;n._refCount++;const r=Le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class l2 extends Ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ag(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qn;const t=this.getSubject();e.add(this.source.subscribe(Le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qn.EMPTY)}return e}refCount(){return qC()(this)}}function Hi(n,e){return it((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Le(r,u=>{i?.unsubscribe();let l=0;const c=s++;Sr(n(u,c)).subscribe(i=Le(r,d=>r.next(e?e(u,d,c,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Gl(n){return n<=0?()=>Ar:it((e,t)=>{let r=0;e.subscribe(Le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function go(n,e){return it((t,r)=>{let i=0;t.subscribe(Le(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Jm(n){return it((e,t)=>{let r=!1;e.subscribe(Le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function c2(n=yZ){return it((e,t)=>{let r=!1;e.subscribe(Le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yZ(){return new Zm}function mo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?go((i,s)=>n(i,s,r)):ds,Gl(1),t?Jm(e):c2(()=>new Zm))}function Pa(n,e){return xe(e)?At(n,e,1):At(n,1)}function Cn(n,e,t){const r=xe(n)||e||t?{next:n,error:e,complete:t}:n;return r?it((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Le(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ds}function yo(n){return it((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Le(t,void 0,void 0,o=>{s=Sr(n(o,yo(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function _Z(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(Le(o,c=>{const d=l++;u=a?n(u,c,d):(a=!0,c),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function d2(n,e){return it(_Z(n,e,arguments.length>=2,!0))}function KC(n){return n<=0?()=>Ar:it((e,t)=>{let r=[];e.subscribe(Le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function h2(n,e){const t=arguments.length>=2;return r=>r.pipe(n?go((i,s)=>n(i,s,r)):ds,KC(1),t?Jm(e):c2(()=>new Zm))}function QC(n){return it((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ge="primary",Ah=Symbol("RouteTitle");class bZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zl(n){return new bZ(n)}function IZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Gi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!f2(n[i],e[i]))return!1;return!0}function f2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function p2(n){return Array.prototype.concat.apply([],n)}function g2(n){return n.length>0?n[n.length-1]:null}function En(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _o(n){return NI(n)?n:uh(n)?bt(Promise.resolve(n)):re(n)}const ey=!1,EZ={exact:function _2(n,e,t){if(!Fa(n.segments,e.segments)||!ty(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_2(n.children[r],e.children[r],t))return!1;return!0},subset:v2},m2={exact:function DZ(n,e){return Gi(n,e)},subset:function TZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>f2(n[t],e[t]))},ignored:()=>!0};function y2(n,e,t){return EZ[t.paths](n.root,e.root,t.matrixParams)&&m2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function v2(n,e,t){return w2(n,e,e.segments,t)}function w2(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Fa(i,t)||e.hasChildren()||!ty(i,t,r))}if(n.segments.length===t.length){if(!Fa(n.segments,t)||!ty(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!v2(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Fa(n.segments,i)&&ty(n.segments,i,r)&&n.children[ge])&&w2(n.children[ge],e,s,r)}}function ty(n,e,t){return e.every((r,i)=>m2[t](n[i].parameters,r.parameters))}class Oa{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zl(this.queryParams)),this._queryParamMap}toString(){return xZ.serialize(this)}}class Ee{constructor(e,t){this.segments=e,this.children=t,this.parent=null,En(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ny(this)}}class xh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zl(this.parameters)),this._parameterMap}toString(){return C2(this)}}function Fa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let kh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return new YC},providedIn:"root"}),n})();class YC{parse(e){const t=new VZ(e);return new Oa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Mh(e.root,!0)}`,r=function NZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ry(t)}=${ry(i)}`).join("&"):`${ry(t)}=${ry(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function kZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const xZ=new YC;function ny(n){return n.segments.map(e=>C2(e)).join("/")}function Mh(n,e){if(!n.hasChildren())return ny(n);if(e){const t=n.children[ge]?Mh(n.children[ge],!1):"",r=[];return En(n.children,(i,s)=>{s!==ge&&r.push(`${s}:${Mh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function AZ(n,e){let t=[];return En(n.children,(r,i)=>{i===ge&&(t=t.concat(e(r,i)))}),En(n.children,(r,i)=>{i!==ge&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ge?[Mh(n.children[ge],!1)]:[`${i}:${Mh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ge]?`${ny(n)}/${t[0]}`:`${ny(n)}/(${t.join("//")})`}}function b2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ry(n){return b2(n).replace(/%3B/gi,";")}function XC(n){return b2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iy(n){return decodeURIComponent(n)}function I2(n){return iy(n.replace(/\+/g,"%20"))}function C2(n){return`${XC(n.path)}${function MZ(n){return Object.keys(n).map(e=>`;${XC(e)}=${XC(n[e])}`).join("")}(n.parameters)}`}const RZ=/^[^\/()?;=#]+/;function sy(n){const e=n.match(RZ);return e?e[0]:""}const PZ=/^[^=?&#]+/,FZ=/^[^&#]+/;class VZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new Ee(e,t)),r}parseSegment(){const e=sy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new O(4009,ey);return this.capture(e),new xh(iy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sy(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=sy(this.remaining);i&&(r=i,this.capture(r))}e[iy(t)]=iy(r)}parseQueryParam(e){const t=function OZ(n){const e=n.match(PZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function LZ(n){const e=n.match(FZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=I2(t),s=I2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sy(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new O(4010,ey);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ge]:new Ee([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new O(4011,ey)}}function ZC(n){return n.segments.length>0?new Ee([],{[ge]:n}):n}function oy(n){const e={};for(const r of Object.keys(n.children)){const s=oy(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function UZ(n){if(1===n.numberOfChildren&&n.children[ge]){const e=n.children[ge];return new Ee(n.segments.concat(e.segments),e.children)}return n}(new Ee(n.segments,e))}function La(n){return n instanceof Oa}function jZ(n,e,t,r,i){if(0===t.length)return Wl(e.root,e.root,e.root,r,i);const s=function T2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new D2(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return En(s.outlets,(u,l)=>{a[l]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new D2(t,e,r)}(t);return s.toRoot()?Wl(e.root,e.root,new Ee([],{}),r,i):function o(u){const l=function GZ(n,e,t,r){if(n.isAbsolute)return new ql(e.root,!0,0);if(-1===r)return new ql(t,t===e.root,0);return function S2(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new ql(r,!1,i-s)}(t,r+(Nh(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,u),c=l.processChildren?Kl(l.segmentGroup,l.index,s.commands):eE(l.segmentGroup,l.index,s.commands);return Wl(e.root,l.segmentGroup,c,r,i)}(n.snapshot?._lastPathIndex)}function Nh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rh(n){return"object"==typeof n&&null!=n&&n.outlets}function Wl(n,e,t,r,i){let o,s={};r&&En(r,(u,l)=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`}),o=n===e?t:E2(n,e,t);const a=ZC(oy(o));return new Oa(a,s,i)}function E2(n,e,t){const r={};return En(n.children,(i,s)=>{r[s]=i===e?t:E2(i,e,t)}),new Ee(n.segments,r)}class D2{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nh(r[0]))throw new O(4003,!1);const i=r.find(Rh);if(i&&i!==g2(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ql{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function eE(n,e,t){if(n||(n=new Ee([],{})),0===n.segments.length&&n.hasChildren())return Kl(n,e,t);const r=function WZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Rh(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!x2(u,l,o))return s;r+=2}else{if(!x2(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ee(n.segments.slice(0,r.pathIndex),{});return s.children[ge]=new Ee(n.segments.slice(r.pathIndex),n.children),Kl(s,0,i)}return r.match&&0===i.length?new Ee(n.segments,{}):r.match&&!n.hasChildren()?tE(n,e,t):r.match?Kl(n,0,i):tE(n,e,t)}function Kl(n,e,t){if(0===t.length)return new Ee(n.segments,{});{const r=function zZ(n){return Rh(n[0])?n[0].outlets:{[ge]:n}}(t),i={};return!r[ge]&&n.children[ge]&&1===n.numberOfChildren&&0===n.children[ge].segments.length?Kl(n.children[ge],e,t):(En(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=eE(n.children[o],e,s))}),En(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Ee(n.segments,i))}}function tE(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Rh(s)){const u=qZ(s.outlets);return new Ee(r,u)}if(0===i&&Nh(t[0])){r.push(new xh(n.segments[e].path,A2(t[0]))),i++;continue}const o=Rh(s)?s.outlets[ge]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Nh(a)?(r.push(new xh(o,A2(a))),i+=2):(r.push(new xh(o,{})),i++)}return new Ee(r,{})}function qZ(n){const e={};return En(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=tE(new Ee([],{}),0,t))}),e}function A2(n){const e={};return En(n,(t,r)=>e[r]=`${t}`),e}function x2(n,e,t){return n==t.path&&Gi(e,t.parameters)}const Ph="imperative";class zi{constructor(e,t){this.id=e,this.url=t}}class nE extends zi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends zi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ay extends zi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class k2 extends zi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class M2 extends zi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KZ extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QZ extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YZ extends zi{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XZ extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZZ extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eJ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tJ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nJ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rJ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iJ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N2{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let oJ=(()=>{class n{createUrlTree(t,r,i,s,o,a){return jZ(t||r.root,i,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),aJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(e){return oJ.\u0275fac(e)},providedIn:"root"}),n})();class R2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=rE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=rE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=iE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iE(e,this._root).map(t=>t.value)}}function rE(n,e){if(n===e.value)return e;for(const t of e.children){const r=rE(n,t);if(r)return r}return null}function iE(n,e){if(n===e.value)return[e];for(const t of e.children){const r=iE(n,t);if(r.length)return r.unshift(e),r}return[]}class ks{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ql(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class P2 extends R2{constructor(e,t){super(e),this.snapshot=t,sE(this,e)}toString(){return this.snapshot.toString()}}function O2(n,e){const t=function uJ(n,e){const o=new uy([],{},{},"",{},ge,e,null,n.root,-1,{});return new L2("",new ks(o,[]))}(n,e),r=new Ii([new xh("",{})]),i=new Ii({}),s=new Ii({}),o=new Ii({}),a=new Ii(""),u=new vo(r,i,o,a,s,ge,e,t.root);return u.snapshot=t.root,new P2(new ks(u,[]),t)}class vo{constructor(e,t,r,i,s,o,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(he(l=>l[Ah]))??re(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(he(e=>zl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(he(e=>zl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function F2(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function lJ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uy{get title(){return this.data?.[Ah]}constructor(e,t,r,i,s,o,a,u,l,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class L2 extends R2{constructor(e,t){super(t),this.url=e,sE(this,t)}toString(){return V2(this._root)}}function sE(n,e){e.value._routerState=n,e.children.forEach(t=>sE(n,t))}function V2(n){const e=n.children.length>0?` { ${n.children.map(V2).join(", ")} } `:"";return`${n.value}${e}`}function oE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Gi(e.params,t.params)||n.params.next(t.params),function CZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Gi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function aE(n,e){const t=Gi(n.params,e.params)&&function SZ(n,e){return Fa(n,e)&&n.every((t,r)=>Gi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||aE(n.parent,e.parent))}function Oh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function dJ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Oh(n,r,i);return Oh(n,r)})}(n,e,t);return new ks(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Oh(n,a)),o}}const r=function hJ(n){return new vo(new Ii(n.url),new Ii(n.params),new Ii(n.queryParams),new Ii(n.fragment),new Ii(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Oh(n,s));return new ks(r,i)}}const uE="ngNavigationCancelingError";function U2(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=La(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=B2(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function B2(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[uE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $2(n){return j2(n)&&La(n.url)}function j2(n){return n&&n[uE]}class fJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Fh,this.attachRef=null}}let Fh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fJ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ly=!1;let cy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new Ct,this.deactivateEvents=new Ct,this.attachEvents=new Ct,this.detachEvents=new Ct,this.parentContexts=Se(Fh),this.location=Se(_i),this.changeDetector=Se(Om),this.environmentInjector=Se(bs)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,ly);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,ly);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,ly);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new O(4013,ly);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new pJ(t,a,i.injector);if(r&&function gJ(n){return!!n.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(o);this.activated=i.createComponent(l,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yr]}),n})();class pJ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vo?this.route:e===Fh?this.childContexts:this.parent.get(e,t)}}let lE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["ng-component"]],standalone:!0,features:[KO],decls:1,vars:0,template:function(t,r){1&t&&Ce(0,"router-outlet")},dependencies:[cy],encapsulation:2}),n})();function H2(n,e){return n.providers&&!n._injector&&(n._injector=Em(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dE(n){const e=n.children&&n.children.map(dE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=lE),t}function ni(n){return n.outlet||ge}function G2(n,e){const t=n.filter(r=>ni(r)===e);return t.push(...n.filter(r=>ni(r)!==e)),t}function Lh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wJ{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ql(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),En(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ql(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ql(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ql(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new iJ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new nJ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(oE(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),oE(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Lh(i.snapshot),u=a?.get(rh)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class z2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dy{constructor(e,t){this.component=e,this.route=t}}function bJ(n,e,t){const r=n._root;return Vh(r,e?e._root:null,t,[r.value])}function Yl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Cg(n){return null!==sa(n)}(n)?e.get(n):n:r}function Vh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ql(e);return n.children.forEach(o=>{(function CJ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function EJ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Fa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fa(n.url,e.url)||!Gi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aE(n,e)||!Gi(n.queryParams,e.queryParams);default:return!aE(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new z2(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Vh(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dy(a.outlet.component,o))}else o&&Uh(e,a,i),i.canActivateChecks.push(new z2(r)),Vh(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),En(s,(o,a)=>Uh(o,t.getContext(a),i)),i}function Uh(n,e,t){const r=Ql(n),i=n.value;En(r,(s,o)=>{Uh(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new dy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Bh(n){return"function"==typeof n}function hE(n){return n instanceof Zm||"EmptyError"===n?.name}const hy=Symbol("INITIAL_VALUE");function Xl(){return Hi(n=>o2(n.map(e=>e.pipe(Gl(1),function mZ(...n){const e=ro(n);return it((t,r)=>{(e?WC(n,t,e):WC(n,t)).subscribe(r)})}(hy)))).pipe(he(e=>{for(const t of e)if(!0!==t){if(t===hy)return hy;if(!1===t||t instanceof Oa)return t}return!0}),go(e=>e!==hy),Gl(1)))}function W2(n){return hs(Cn(e=>{if(La(e))throw U2(0,e)}),he(e=>!0===e))}const fE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function q2(n,e,t,r,i){const s=pE(n,e,t);return s.matched?function $J(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?re(i.map(o=>{const a=Yl(o,n);return _o(function kJ(n){return n&&Bh(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Xl(),W2()):re(!0)}(r=H2(e,r),e,t).pipe(he(o=>!0===o?s:{...fE})):re(s)}function pE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...fE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||IZ)(t,n,e);if(!i)return{...fE};const s={};En(i.posParams,(a,u)=>{s[u]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function fy(n,e,t,r){if(t.length>0&&function GJ(n,e,t){return t.some(r=>py(n,e,r)&&ni(r)!==ge)}(n,t,r)){const s=new Ee(e,function HJ(n,e,t,r){const i={};i[ge]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ni(s)!==ge){const o=new Ee([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[ni(s)]=o}return i}(n,e,r,new Ee(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function zJ(n,e,t){return t.some(r=>py(n,e,r))}(n,t,r)){const s=new Ee(n.segments,function jJ(n,e,t,r,i){const s={};for(const o of r)if(py(n,t,o)&&!i[ni(o)]){const a=new Ee([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[ni(o)]=a}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new Ee(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function py(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function K2(n,e,t,r){return!!(ni(n)===r||r!==ge&&py(e,t,n))&&("**"===n.path||pE(e,n,t).matched)}function Q2(n,e,t){return 0===e.length&&!n.children[t]}const gy=!1;class my{constructor(e){this.segmentGroup=e||null}}class Y2{constructor(e){this.urlTree=e}}function $h(n){return Sh(new my(n))}function X2(n){return Sh(new Y2(n))}class QJ{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=fy(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ee(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ge).pipe(he(s=>this.createUrlTree(oy(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yo(s=>{if(s instanceof Y2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof my?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ge).pipe(he(i=>this.createUrlTree(oy(i),e.queryParams,e.fragment))).pipe(yo(i=>{throw i instanceof my?this.noMatchError(i):i}))}noMatchError(e){return new O(4002,gy)}createUrlTree(e,t,r){const i=ZC(e);return new Oa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(he(s=>new Ee([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return bt(i).pipe(Pa(s=>{const o=r.children[s],a=G2(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(he(u=>({segment:u,outlet:s})))}),d2((s,o)=>(s[o.outlet]=o.segment,s),{}),h2())}expandSegment(e,t,r,i,s,o){return bt(r).pipe(Pa(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(yo(l=>{if(l instanceof my)return re(null);throw l}))),mo(a=>!!a),yo((a,u)=>{if(hE(a))return Q2(t,i,s)?re(new Ee([],{})):$h(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return K2(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):$h(t):$h(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?X2(s):this.lineralizeSegments(r,s).pipe(At(o=>{const a=new Ee(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:c}=pE(t,i,s);if(!a)return $h(t);const d=this.applyRedirectCommands(u,i.redirectTo,c);return i.redirectTo.startsWith("/")?X2(d):this.lineralizeSegments(i,d).pipe(At(p=>this.expandSegment(e,t,r,p.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=H2(r,e),r.loadChildren?(r._loadedRoutes?re({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(he(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new Ee(i,{})))):re(new Ee(i,{}))):q2(t,r,i,e).pipe(Hi(({matched:o,consumedSegments:a,remainingSegments:u})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(At(c=>{const d=c.injector??e,p=c.routes,{segmentGroup:g,slicedSegments:y}=fy(t,a,u,p),w=new Ee(g.segments,g.children);if(0===y.length&&w.hasChildren())return this.expandChildren(d,p,w).pipe(he(I=>new Ee(a,I)));if(0===p.length&&0===y.length)return re(new Ee(a,{}));const b=ni(r)===s;return this.expandSegment(d,w,p,y,b?ge:s,!0).pipe(he(M=>new Ee(a.concat(M.segments),M.children)))})):$h(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?re({routes:t._loadedRoutes,injector:t._loadedInjector}):function BJ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?re(!0):re(i.map(o=>{const a=Yl(o,n);return _o(function TJ(n){return n&&Bh(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Xl(),W2())}(e,t,r).pipe(At(i=>i?this.configLoader.loadChildren(e,t).pipe(Cn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function qJ(n){return Sh(B2(gy,3))}())):re({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return re(r);if(i.numberOfChildren>1||!i.children[ge])return Sh(new O(4e3,gy));i=i.children[ge]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Oa(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return En(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return En(t.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new Ee(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new O(4001,gy);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class XJ{}class eee{constructor(e,t,r,i,s,o,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=fy(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ge).pipe(he(t=>{if(null===t)return null;const r=new uy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ge,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ks(r,t),s=new L2(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=F2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return bt(Object.keys(r.children)).pipe(Pa(i=>{const s=r.children[i],o=G2(t,i);return this.processSegmentGroup(e,o,s,i)}),d2((i,s)=>i&&s?(i.push(...s),i):null),function vZ(n,e=!1){return it((t,r)=>{let i=0;t.subscribe(Le(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),Jm(null),h2(),he(i=>{if(null===i)return null;const s=J2(i);return function tee(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return bt(t).pipe(Pa(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),mo(o=>!!o),yo(o=>{if(hE(o))return Q2(r,i,s)?re([]):re(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!K2(t,r,i,s))return re(null);let o;if("**"===t.path){const a=i.length>0?g2(i).parameters:{},u=tV(r)+i.length;o=re({snapshot:new uy(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nV(t),ni(t),t.component??t._loadedComponent??null,t,eV(r),u,rV(t)),consumedSegments:[],remainingSegments:[]})}else o=q2(r,t,i,e).pipe(he(({matched:a,consumedSegments:u,remainingSegments:l,parameters:c})=>{if(!a)return null;const d=tV(r)+u.length;return{snapshot:new uy(u,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nV(t),ni(t),t.component??t._loadedComponent??null,t,eV(r),d,rV(t)),consumedSegments:u,remainingSegments:l}}));return o.pipe(Hi(a=>{if(null===a)return re(null);const{snapshot:u,consumedSegments:l,remainingSegments:c}=a;e=t._injector??e;const d=t._loadedInjector??e,p=function nee(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:g,slicedSegments:y}=fy(r,l,c,p.filter(b=>void 0===b.redirectTo));if(0===y.length&&g.hasChildren())return this.processChildren(d,p,g).pipe(he(b=>null===b?null:[new ks(u,b)]));if(0===p.length&&0===y.length)return re([new ks(u,[])]);const w=ni(t)===s;return this.processSegment(d,p,g,y,w?ge:s).pipe(he(b=>null===b?null:[new ks(u,b)]))}))}}function ree(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function J2(n){const e=[],t=new Set;for(const r of n){if(!ree(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=J2(r.children);e.push(new ks(r.value,i))}return e.filter(r=>!t.has(r))}function eV(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tV(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function nV(n){return n.data||{}}function rV(n){return n.resolve||{}}function iV(n){return"string"==typeof n.title||null===n.title}function gE(n){return Hi(e=>{const t=n(e);return t?bt(t).pipe(he(()=>e)):re(e)})}const Zl=new K("ROUTES");let mE=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_o(t.loadComponent()).pipe(he(oV),Cn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),QC(()=>{this.componentLoaders.delete(t)})),i=new l2(r,()=>new Tr).pipe(qC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(he(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,l,c=!1;Array.isArray(a)?l=a:(u=a.create(t).injector,l=p2(u.get(Zl,[],te.Self|te.Optional)));return{routes:l.map(dE),injector:u}}),QC(()=>{this.childrenLoaders.delete(r)})),o=new l2(s,()=>new Tr).pipe(qC());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return _o(t()).pipe(he(oV),At(i=>i instanceof WO||Array.isArray(i)?re(i):bt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(q(tr),q(VF))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oV(n){return function hee(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let _y=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Tr,this.configLoader=Se(mE),this.environmentInjector=Se(bs),this.urlSerializer=Se(kh),this.rootContexts=Se(Fh),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new eJ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new JZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ii({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ph,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(go(r=>0!==r.id),he(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Hi(r=>{let i=!1,s=!1;return re(r).pipe(Cn(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hi(o=>{const a=t.browserUrlTree.toString(),u=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const c="";return this.events.next(new k2(o.id,t.serializeUrl(r.rawUrl),c,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Ar}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return aV(o.source)&&(t.browserUrlTree=o.extractedUrl),re(o).pipe(Hi(c=>{const d=this.transitions?.getValue();return this.events.next(new nE(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),d!==this.transitions?.getValue()?Ar:Promise.resolve(c)}),function YJ(n,e,t,r){return Hi(i=>function KJ(n,e,t,r,i){return new QJ(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(he(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Cn(c=>{this.currentNavigation={...this.currentNavigation,finalUrl:c.urlAfterRedirects},r.urlAfterRedirects=c.urlAfterRedirects}),function see(n,e,t,r,i){return At(s=>function JJ(n,e,t,r,i,s,o="emptyOnly"){return new eee(n,e,t,r,i,o,s).recognize().pipe(Hi(a=>null===a?function ZJ(n){return new Ze(e=>e.error(n))}(new XJ):re(a)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(he(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Cn(c=>{if(r.targetSnapshot=c.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!c.extras.skipLocationChange){const p=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl);t.setBrowserUrl(p,c)}t.browserUrlTree=c.urlAfterRedirects}const d=new KZ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:c,extractedUrl:d,source:p,restoredState:g,extras:y}=o,w=new nE(c,this.urlSerializer.serialize(d),p,g);this.events.next(w);const b=O2(d,this.rootComponentType).snapshot;return re(r={...o,targetSnapshot:b,urlAfterRedirects:d,extras:{...y,skipLocationChange:!1,replaceUrl:!1}})}{const c="";return this.events.next(new k2(o.id,t.serializeUrl(r.extractedUrl),c,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Ar}}),Cn(o=>{const a=new QZ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),he(o=>r={...o,guards:bJ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function NJ(n,e){return At(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?re({...t,guardsResult:!0}):function RJ(n,e,t,r){return bt(n).pipe(At(i=>function UJ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?re(s.map(a=>{const u=Lh(e)??i,l=Yl(a,u);return _o(function xJ(n){return n&&Bh(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(mo())})).pipe(Xl()):re(!0)}(i.component,i.route,t,e,r)),mo(i=>!0!==i,!0))}(o,r,i,n).pipe(At(a=>a&&function DJ(n){return"boolean"==typeof n}(a)?function PJ(n,e,t,r){return bt(e).pipe(Pa(i=>WC(function FJ(n,e){return null!==n&&e&&e(new tJ(n)),re(!0)}(i.route.parent,r),function OJ(n,e){return null!==n&&e&&e(new rJ(n)),re(!0)}(i.route,r),function VJ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function IJ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>u2(()=>re(o.guards.map(u=>{const l=Lh(o.node)??t,c=Yl(u,l);return _o(function AJ(n){return n&&Bh(n.canActivateChild)}(c)?c.canActivateChild(r,n):l.runInContext(()=>c(r,n))).pipe(mo())})).pipe(Xl())));return re(s).pipe(Xl())}(n,i.path,t),function LJ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return re(!0);const i=r.map(s=>u2(()=>{const o=Lh(e)??t,a=Yl(s,o);return _o(function SJ(n){return n&&Bh(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(mo())}));return re(i).pipe(Xl())}(n,i.route,t))),mo(i=>!0!==i,!0))}(r,s,n,e):re(a)),he(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Cn(o=>{if(r.guardsResult=o.guardsResult,La(o.guardsResult))throw U2(0,o.guardsResult);const a=new YZ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),go(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),gE(o=>{if(o.guards.canActivateChecks.length)return re(o).pipe(Cn(a=>{const u=new XZ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Hi(a=>{let u=!1;return re(a).pipe(function oee(n,e){return At(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let s=0;return bt(i).pipe(Pa(o=>function aee(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!iV(i)&&(s[Ah]=i.title),function uee(n,e,t,r){const i=function lee(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return re({});const s={};return bt(i).pipe(At(o=>function cee(n,e,t,r){const i=Lh(e)??r,s=Yl(n,i);return _o(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(mo(),Cn(a=>{s[o]=a}))),KC(1),function wZ(n){return he(()=>n)}(s),yo(o=>hE(o)?Ar:Sh(o)))}(s,n,e,r).pipe(he(o=>(n._resolvedData=o,n.data=F2(n,t).resolve,i&&iV(i)&&(n.data[Ah]=i.title),null)))}(o.route,r,n,e)),Cn(()=>s++),KC(1),At(o=>s===i.length?re(t):Ar))})}(t.paramsInheritanceStrategy,this.environmentInjector),Cn({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Cn(a=>{const u=new ZZ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),gE(o=>{const a=u=>{const l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Cn(c=>{u.component=c}),he(()=>{})));for(const c of u.children)l.push(...a(c));return l};return o2(a(o.targetSnapshot.root)).pipe(Jm(),Gl(1))}),gE(()=>this.afterPreactivation()),he(o=>{const a=function cJ(n,e,t){const r=Oh(n,e._root,t?t._root:void 0);return new P2(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),Cn(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>he(r=>(new wJ(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Cn({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Va(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),QC(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),yo(o=>{if(s=!0,j2(o)){$2(o)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new ay(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),$2(o)){const u=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),l={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||aV(r.source)};t.scheduleNavigation(u,Ph,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new M2(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(o))}catch(u){r.reject(u)}}return Ar}))}))}cancelNavigationTransition(t,r,i){const s=new ay(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aV(n){return n!==Ph}let uV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ge);return r}getResolvedTitleForRoute(t){return t.data[Ah]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return Se(fee)},providedIn:"root"}),n})(),fee=(()=>{class n extends uV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(q(e2))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return Se(mee)},providedIn:"root"}),n})();class gee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mee=(()=>{class n extends gee{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=bn(n)))(r||n)}}(),n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vy=new K("",{providedIn:"root",factory:()=>({})});let _ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return Se(vee)},providedIn:"root"}),n})(),vee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wee(n){throw n}function bee(n,e,t){return e.parse("/")}const Iee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Cee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Et=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Se(K9),this.isNgZoneEnabled=!1,this.options=Se(vy,{optional:!0})||{},this.errorHandler=this.options.errorHandler||wee,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bee,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Se(_ee),this.routeReuseStrategy=Se(pee),this.urlCreationStrategy=Se(aJ),this.titleStrategy=Se(uV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=p2(Se(Zl,{optional:!0})??[]),this.navigationTransitions=Se(_y),this.urlSerializer=Se(kh),this.location=Se(wC),this.isNgZoneEnabled=Se(st)instanceof st&&st.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Oa,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=O2(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ph,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(dE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let c=null;switch(a){case"merge":c={...this.currentUrlTree.queryParams,...s};break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=s||null}return null!==c&&(c=this.removeEmptyProps(c)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,c,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=La(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ph,null,r)}navigate(t,r={skipLocationChange:!1}){return function Eee(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new O(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Iee}:!1===r?{...Cee}:r,La(t))return y2(this.currentUrlTree,t,i);const s=this.parseUrl(t);return y2(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l,c;return o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((d,p)=>{a=d,u=p}),c="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:c,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wi=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Tr;const u=o.nativeElement.tagName;this.isAnchorElement="A"===u||"AREA"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Va&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=jl(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=jl(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=jl(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function yR(n,e,t){return function X4(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?mR:Ca}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(A(Et),A(vo),function qg(n){return function I5(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(aN(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(wn(),n)}("tabindex"),A(Is),A(Lr),A(Ra))},n.\u0275dir=ie({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&yt("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Ui("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Yr]}),n})();class cV{}let See=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(go(t=>t instanceof Va),Pa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Em(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return bt(i).pipe(Wr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):re(null);const s=i.pipe(At(o=>null===o?re(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?bt([s,this.loader.loadComponent(r)]).pipe(Wr()):s})}}return n.\u0275fac=function(t){return new(t||n)(q(Et),q(VF),q(bs),q(cV),q(mE))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yE=new K("");let dV=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Va&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof N2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new N2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function QR(){throw new Error("invalid")}()},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function Ua(n,e){return{\u0275kind:n,\u0275providers:e}}function fV(){const n=Se(tr);return e=>{const t=n.get(Rm);if(e!==t.components[0])return;const r=n.get(Et),i=n.get(pV);1===n.get(vE)&&r.initialNavigation(),n.get(gV,null,te.Optional)?.setUpPreloading(),n.get(yE,null,te.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const pV=new K("",{factory:()=>new Tr}),vE=new K("",{providedIn:"root",factory:()=>1});const gV=new K("");function Nee(n){return Ua(0,[{provide:gV,useExisting:See},{provide:cV,useExisting:n}])}const mV=new K("ROUTER_FORROOT_GUARD"),Ree=[wC,{provide:kh,useClass:YC},Et,Fh,{provide:vo,useFactory:function hV(n){return n.routerState.root},deps:[Et]},mE,[]];function Pee(){return new zF("Router",Et)}let wy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Ree,[],{provide:Zl,multi:!0,useValue:t},{provide:mV,useFactory:Vee,deps:[[Et,new Lt,new Kd]]},{provide:vy,useValue:r||{}},r?.useHash?{provide:Ra,useClass:OQ}:{provide:Ra,useClass:pL},{provide:yE,useFactory:()=>{const n=Se(JY),e=Se(st),t=Se(vy),r=Se(_y),i=Se(kh);return t.scrollOffset&&n.setOffset(t.scrollOffset),new dV(i,r,n,e,t)}},r?.preloadingStrategy?Nee(r.preloadingStrategy).\u0275providers:[],{provide:zF,multi:!0,useFactory:Pee},r?.initialNavigation?Uee(r):[],[{provide:yV,useFactory:fV},{provide:LF,multi:!0,useExisting:yV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Zl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(q(mV,8))},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({imports:[lE]}),n})();function Vee(n){return"guarded"}function Uee(n){return["disabled"===n.initialNavigation?Ua(3,[{provide:xm,multi:!0,useFactory:()=>{const e=Se(Et);return()=>{e.setUpLocationChangeListener()}}},{provide:vE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ua(2,[{provide:vE,useValue:0},{provide:xm,multi:!0,deps:[tr],useFactory:e=>{const t=e.get(RQ,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const s=e.get(Et),o=e.get(pV);(function r(i){e.get(Et).events.pipe(go(o=>o instanceof Va||o instanceof ay||o instanceof M2),he(o=>o instanceof Va||o instanceof ay&&(0===o.code||1===o.code)&&null),go(o=>null!==o),Gl(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(_y).afterPreactivation=()=>(i(!0),o.closed?re(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const yV=new K("");function _V(n,e,t,r,i,s,o){try{var a=n[s](o),u=a.value}catch(l){return void t(l)}a.done?e(u):Promise.resolve(u).then(r,i)}function v(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(u){_V(s,r,i,o,a,"next",u)}function a(u){_V(s,r,i,o,a,"throw",u)}o(void 0)})}}const V=function(n,e){if(!n)throw ec(e)},ec=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},vV=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},by={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0;let p=(15&a)<<2|l>>6,g=63&l;u||(g=64,o||(p=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vV(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==d)throw Error();r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},wV=function(n){const e=vV(n);return by.encodeByteArray(e,!0)},Iy=function(n){return wV(n).replace(/\./g,"")},Cy=function(n){try{return by.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jee(n){return bV(void 0,n)}function bV(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Hee(t)||(n[t]=bV(n[t],e[t]));return n}function Hee(n){return"__proto__"!==n}const Ey=()=>{try{return function Gee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cy(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},IV=n=>{var e,t;return null===(t=null===(e=Ey())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},CV=n=>{const e=IV(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},EV=n=>{var e;return null===(e=Ey())||void 0===e?void 0:e[`_${n}`]};class tc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function DV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Iy(JSON.stringify({alg:"none",type:"JWT"})),Iy(JSON.stringify(o)),""].join(".")}function rn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function IE(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function TV(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ba(){try{return"object"==typeof indexedDB}catch{return!1}}function Hh(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function CE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ri extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qi.prototype.create)}}class qi{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Zee(n,e){return n.replace(Jee,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new ri(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Jee=/\{\$([^}]+)}/g;function Gh(n){return JSON.parse(n)}function Dn(n){return JSON.stringify(n)}const Dy=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=Gh(Cy(s[0])||""),t=Gh(Cy(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Ns(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function nc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function EE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ty(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Sy(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(SV(s)&&SV(o)){if(!Sy(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function SV(n){return null!==n&&"object"==typeof n}function zh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function qh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class nte{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(p<<1|p>>>31)}let l,c,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),c=1518500249):(l=s^o^a,c=1859775393):d<60?(l=s&o|a&(s|o),c=2400959708):(l=s^o^a,c=3395469782);const p=(i<<5|i>>>27)+l+u+c+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class ite{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function ste(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=DE),void 0===i.error&&(i.error=DE),void 0===i.complete&&(i.complete=DE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DE(){}const xy=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function TE(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function sn(n){return n&&n._delegate?n._delegate:n}class Tn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $a="[DEFAULT]";class hte{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function pte(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$a})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=$a){return this.instances.has(e)}getOptions(e=$a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===$a?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=$a){return this.component?this.component.multipleInstances?e:$a:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class gte{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hte(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const SE=[];var Me=(()=>{return(n=Me||(Me={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Me;var n})();const AV={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},mte=Me.INFO,yte={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},_te=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=yte[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class ja{constructor(e){this.name=e,this._logLevel=mte,this._logHandler=_te,this._userLogHandler=null,SE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?AV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}let xV,kV;const MV=new WeakMap,AE=new WeakMap,NV=new WeakMap,xE=new WeakMap,kE=new WeakMap;let ME={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return AE.get(n);if("objectStoreNames"===e)return n.objectStoreNames||NV.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Tte(n){return"function"==typeof n?function Dte(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bte(){return kV||(kV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(NE(this),e),Rs(MV.get(this))}:function(...e){return Rs(n.apply(NE(this),e))}:function(e,...t){const r=n.call(NE(this),e,...t);return NV.set(r,e.sort?e.sort():[e]),Rs(r)}}(n):(n instanceof IDBTransaction&&function Cte(n){if(AE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});AE.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function wte(){return xV||(xV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,ME):n)}function Rs(n){if(n instanceof IDBRequest)return function Ite(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&MV.set(t,n)}).catch(()=>{}),kE.set(e,n),e}(n);if(xE.has(n))return xE.get(n);const e=Tte(n);return e!==n&&(xE.set(n,e),kE.set(e,n)),e}const NE=n=>kE.get(n);function ky(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Rs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Rs(o.result),u.oldVersion,u.newVersion,Rs(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function RE(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Rs(t).then(()=>{})}const Ste=["get","getKey","getAll","getAllKeys","count"],Ate=["put","add","delete","clear"],PE=new Map;function RV(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(PE.get(e))return PE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ate.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ste.includes(t))return;const s=function(){var o=v(function*(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(yield Promise.all([c[t](...u),i&&l.done]))[0]});return function(u){return o.apply(this,arguments)}}();return PE.set(e,s),s}!function Ete(n){ME=n(ME)}(n=>({...n,get:(e,t,r)=>RV(e,t)||n.get(e,t,r),has:(e,t)=>!!RV(e,t)||n.has(e,t)}));class xte{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function kte(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const OE="@firebase/app",Ha=new ja("@firebase/app"),My="[DEFAULT]",nne={[OE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ga=new Map,Ny=new Map;function rne(n,e){try{n.container.addComponent(e)}catch(t){Ha.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jn(n){const e=n.name;if(Ny.has(e))return Ha.debug(`There were multiple attempts to register component ${e}.`),!1;Ny.set(e,n);for(const t of Ga.values())rne(t,n);return!0}function za(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Ps=new qi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sne{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}const Wa="9.16.0";function OV(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:My,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(t||(t=(()=>{var n;return null===(n=Ey())||void 0===n?void 0:n.config})()),!t)throw Ps.create("no-options");const s=Ga.get(i);if(s){if(Sy(t,s.options)&&Sy(r,s.config))return s;throw Ps.create("duplicate-app",{appName:i})}const o=new gte(i);for(const u of Ny.values())o.addComponent(u);const a=new sne(t,r,o);return Ga.set(i,a),a}function Ry(n=My){const e=Ga.get(n);if(!e&&n===My)return OV();if(!e)throw Ps.create("no-app",{appName:n});return e}function FV(){return Array.from(Ga.values())}function ot(n,e,t){var r;let i=null!==(r=nne[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ha.warn(a.join(" "))}jn(new Tn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Kh="firebase-heartbeat-store";let LE=null;function LV(){return LE||(LE=ky("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Kh)}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),LE}function VE(){return(VE=v(function*(n){try{return(yield LV()).transaction(Kh).objectStore(Kh).get(UV(n))}catch(e){if(e instanceof ri)Ha.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e?.message});Ha.warn(t.message)}}})).apply(this,arguments)}function VV(n,e){return UE.apply(this,arguments)}function UE(){return(UE=v(function*(n,e){try{const r=(yield LV()).transaction(Kh,"readwrite");return yield r.objectStore(Kh).put(e,UV(n)),r.done}catch(t){if(t instanceof ri)Ha.warn(t.message);else{const r=Ps.create("idb-set",{originalErrorMessage:t?.message});Ha.warn(r.message)}}})).apply(this,arguments)}function UV(n){return`${n.name}!${n.options.appId}`}class dne{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fne(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return v(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=BV();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return v(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=BV(),{heartbeatsToSend:r,unsentEntries:i}=function hne(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$V(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$V(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Iy(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function BV(){return(new Date).toISOString().substring(0,10)}class fne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!Ba()&&Hh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function une(n){return VE.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return v(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return VV(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return v(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return VV(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function $V(n){return Iy(JSON.stringify({version:2,heartbeats:n})).length}!function pne(n){jn(new Tn("platform-logger",e=>new xte(e),"PRIVATE")),jn(new Tn("heartbeat",e=>new dne(e),"PRIVATE")),ot(OE,"0.9.1",n),ot(OE,"0.9.1","esm2017"),ot("fire-js","")}(""),ot("firebase","9.16.0","app");const jV="@firebase/installations",BE="0.6.1",GV=`w:${BE}`,zV="FIS_v2",Os=new qi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function WV(n){return n instanceof ri&&n.code.includes("request-failed")}function $E({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function qV(n){return{token:n.token,requestStatus:2,expiresIn:Ine(n.expiresIn),creationTime:Date.now()}}function jE(n,e){return HE.apply(this,arguments)}function HE(){return(HE=v(function*(n,e){const r=(yield e.json()).error;return Os.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function KV({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function QV(n,{refreshToken:e}){const t=KV(n);return t.append("Authorization",function Cne(n){return`${zV} ${n}`}(e)),t}function GE(n){return zE.apply(this,arguments)}function zE(){return(zE=v(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Ine(n){return Number(n.replace("s","000"))}function Ene(n,e){return WE.apply(this,arguments)}function WE(){return(WE=v(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=$E(n),i=KV(n),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:zV,appId:n.appId,sdkVersion:GV})},u=yield GE(()=>fetch(r,a));if(u.ok){const l=yield u.json();return{fid:l.fid||t,registrationStatus:2,refreshToken:l.refreshToken,authToken:qV(l.authToken)}}throw yield jE("Create Installation",u)})).apply(this,arguments)}function YV(n){return new Promise(e=>{setTimeout(e,n)})}const Tne=/^[cdef][\w-]{21}$/;function Sne(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Ane(n){return function Dne(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Tne.test(t)?t:""}catch{return""}}function rc(n){return`${n.appName}!${n.appId}`}const ic=new Map;function XV(n,e){const t=rc(n);ZV(t,e),function Mne(n,e){const t=function JV(){return!qa&&"BroadcastChannel"in self&&(qa=new BroadcastChannel("[Firebase] FID Change"),qa.onmessage=n=>{ZV(n.data.key,n.data.fid)}),qa}();t&&t.postMessage({key:n,fid:e}),function eU(){0===ic.size&&qa&&(qa.close(),qa=null)}()}(t,e)}function ZV(n,e){const t=ic.get(n);if(t)for(const r of t)r(e)}let qa=null;const Ka="firebase-installations-store";let KE=null;function QE(){return KE||(KE=ky("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ka)}})),KE}function Py(n,e){return YE.apply(this,arguments)}function YE(){return(YE=v(function*(n,e){const t=rc(n),i=(yield QE()).transaction(Ka,"readwrite"),s=i.objectStore(Ka),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&XV(n,e.fid),e})).apply(this,arguments)}function XE(n){return ZE.apply(this,arguments)}function ZE(){return(ZE=v(function*(n){const e=rc(n),r=(yield QE()).transaction(Ka,"readwrite");yield r.objectStore(Ka).delete(e),yield r.done})).apply(this,arguments)}function Qh(n,e){return JE.apply(this,arguments)}function JE(){return(JE=v(function*(n,e){const t=rc(n),i=(yield QE()).transaction(Ka,"readwrite"),s=i.objectStore(Ka),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&XV(n,a.fid),a})).apply(this,arguments)}function e0(n){return t0.apply(this,arguments)}function t0(){return(t0=v(function*(n){let e;const t=yield Qh(n.appConfig,r=>{const i=Pne(r),s=One(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function Pne(n){return nU(n||{fid:Sne(),registrationStatus:0})}function One(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Os.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Fne(n,e){return n0.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Lne(n)}:{installationEntry:e}}function n0(){return(n0=v(function*(n,e){try{const t=yield Ene(n,e);return Py(n.appConfig,t)}catch(t){throw WV(t)&&409===t.customData.serverCode?yield XE(n.appConfig):yield Py(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function Lne(n){return r0.apply(this,arguments)}function r0(){return(r0=v(function*(n){let e=yield tU(n.appConfig);for(;1===e.registrationStatus;)yield YV(100),e=yield tU(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield e0(n);return r||t}return e})).apply(this,arguments)}function tU(n){return Qh(n,e=>{if(!e)throw Os.create("installation-not-found");return nU(e)})}function nU(n){return function Vne(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Une(n,e){return s0.apply(this,arguments)}function s0(){return(s0=v(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=Bne(n,t),i=QV(n,t),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:GV,appId:n.appId}})},u=yield GE(()=>fetch(r,a));if(u.ok)return qV(yield u.json());throw yield jE("Generate Auth Token",u)})).apply(this,arguments)}function Bne(n,{fid:e}){return`${$E(n)}/${e}/authTokens:generate`}function o0(n){return a0.apply(this,arguments)}function a0(){return(a0=v(function*(n,e=!1){let t;const r=yield Qh(n.appConfig,s=>{if(!iU(s))throw Os.create("not-registered");const o=s.authToken;if(!e&&Hne(o))return s;if(1===o.requestStatus)return t=$ne(n,e),s;{if(!navigator.onLine)throw Os.create("app-offline");const a=zne(s);return t=jne(n,a),a}});return t?yield t:r.authToken})).apply(this,arguments)}function $ne(n,e){return u0.apply(this,arguments)}function u0(){return(u0=v(function*(n,e){let t=yield rU(n.appConfig);for(;1===t.authToken.requestStatus;)yield YV(100),t=yield rU(n.appConfig);const r=t.authToken;return 0===r.requestStatus?o0(n,e):r})).apply(this,arguments)}function rU(n){return Qh(n,e=>{if(!iU(e))throw Os.create("not-registered");return function Wne(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function jne(n,e){return l0.apply(this,arguments)}function l0(){return(l0=v(function*(n,e){try{const t=yield Une(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Py(n.appConfig,r),t}catch(t){if(!WV(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Py(n.appConfig,r)}else yield XE(n.appConfig);throw t}})).apply(this,arguments)}function iU(n){return void 0!==n&&2===n.registrationStatus}function Hne(n){return 2===n.requestStatus&&!function Gne(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function zne(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function c0(){return(c0=v(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield e0(e);return r?r.catch(console.error):o0(e).catch(console.error),t.fid})).apply(this,arguments)}function d0(){return(d0=v(function*(n,e=!1){const t=n;return yield Qne(t),(yield o0(t,e)).token})).apply(this,arguments)}function Qne(n){return h0.apply(this,arguments)}function h0(){return(h0=v(function*(n){const{registrationPromise:e}=yield e0(n);e&&(yield e)})).apply(this,arguments)}function g0(n){return Os.create("missing-app-config-values",{valueName:n})}const sU="installations",ere=n=>{const e=n.getProvider("app").getImmediate(),t=function Zne(n){if(!n||!n.options)throw g0("App Configuration");if(!n.name)throw g0("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw g0(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:za(e,"heartbeat"),_delete:()=>Promise.resolve()}},tre=n=>{const t=za(n.getProvider("app").getImmediate(),sU).getImmediate();return{getId:()=>function qne(n){return c0.apply(this,arguments)}(t),getToken:i=>function Kne(n){return d0.apply(this,arguments)}(t,i)}};(function nre(){jn(new Tn(sU,ere,"PUBLIC")),jn(new Tn("installations-internal",tre,"PRIVATE"))})(),ot(jV,BE),ot(jV,BE,"esm2017");const m0="@firebase/remote-config",_r=new qi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fre{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return v(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function pre(n=navigator){return n.languages&&n.languages[0]||n.language}class gre{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return v(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:pre()},l={method:"POST",headers:a,body:JSON.stringify(u)},c=fetch(o,l),d=new Promise((D,M)=>{e.signal.addEventListener(()=>{const I=new Error("The operation was aborted.");I.name="AbortError",M(I)})});let p;try{yield Promise.race([c,d]),p=yield c}catch(D){let M="fetch-client-network";throw"AbortError"===D?.name&&(M="fetch-timeout"),_r.create(M,{originalErrorMessage:D?.message})}let g=p.status;const y=p.headers.get("ETag")||void 0;let w,b;if(200===p.status){let D;try{D=yield p.json()}catch(M){throw _r.create("fetch-client-parse",{originalErrorMessage:M?.message})}w=D.entries,b=D.state}if("INSTANCE_STATE_UNSPECIFIED"===b?g=500:"NO_CHANGE"===b?g=304:("NO_TEMPLATE"===b||"EMPTY_CONFIG"===b)&&(w={}),304!==g&&200!==g)throw _r.create("fetch-status",{httpStatus:g});return{status:g,eTag:y,config:w}})()}}class _re{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return v(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return v(function*(){yield function mre(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(_r.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function yre(n){if(!(n instanceof ri&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+TE(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class bre{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fy(n,e){const t=n.target.error||void 0;return _r.create(e,{originalErrorMessage:t&&t?.message})}const Qa="app_namespace_store";class Dre{constructor(e,t,r,i=function Ere(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Fy(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Qa,{keyPath:"compositeKey"})}}catch(t){e(_r.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return v(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Qa],"readonly").objectStore(Qa),u=t.createCompositeKey(e);try{const l=a.get(u);l.onerror=c=>{s(Fy(c,"storage-get"))},l.onsuccess=c=>{const d=c.target.result;i(d?d.value:void 0)}}catch(l){s(_r.create("storage-get",{originalErrorMessage:l?.message}))}})})()}set(e,t){var r=this;return v(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([Qa],"readwrite").objectStore(Qa),l=r.createCompositeKey(e);try{const c=u.put({compositeKey:l,value:t});c.onerror=d=>{o(Fy(d,"storage-set"))},c.onsuccess=()=>{s()}}catch(c){o(_r.create("storage-set",{originalErrorMessage:c?.message}))}})})()}delete(e){var t=this;return v(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Qa],"readwrite").objectStore(Qa),u=t.createCompositeKey(e);try{const l=a.delete(u);l.onerror=c=>{s(Fy(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s(_r.create("storage-delete",{originalErrorMessage:l?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Tre{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return v(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Are(){return b0.apply(this,arguments)}function b0(){return(b0=v(function*(){if(!Ba())return!1;try{return yield Hh()}catch{return!1}})).apply(this,arguments)}!function Sre(){jn(new Tn("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw _r.create("registration-window");if(!Ba())throw _r.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw _r.create("registration-project-id");if(!o)throw _r.create("registration-api-key");if(!a)throw _r.create("registration-app-id");const u=new Dre(a,r.name,t=t||"firebase"),l=new Tre(u),c=new ja(m0);c.logLevel=Me.ERROR;const d=new gre(i,Wa,t,s,o,a),p=new _re(d,u),g=new fre(p,u,l,c),y=new bre(r,g,l,u,c);return function cre(n){const e=sn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(y),y},"PUBLIC").setMultipleInstances(!0)),ot(m0,"0.4.1"),ot(m0,"0.4.1","esm2017")}();const xre="/firebase-messaging-sw.js",kre="/firebase-cloud-messaging-push-scope",lU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cU="google.c.a.c_id",Nre="google.c.a.c_l",Rre="google.c.a.ts",Pre="google.c.a.e";var sc=(()=>{return(n=sc||(sc={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",sc;var n})();function Fs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ore(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const I0="fcm_token_details_db",dU="fcm_token_object_Store";function Lre(n){return C0.apply(this,arguments)}function C0(){return C0=v(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(I0))return null;let e=null;return(yield ky(I0,5,{upgrade:(r=v(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(dU))return;const l=a.objectStore(dU),c=yield l.index("fcmSenderId").get(n);if(yield l.clear(),c)if(2===s){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Fs(d.vapidKey)}}}else if(3===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Fs(d.auth),p256dh:Fs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Fs(d.vapidKey)}}}else if(4===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Fs(d.auth),p256dh:Fs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Fs(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield RE(I0),yield RE("fcm_vapid_details_db"),yield RE("undefined"),Vre(e)?e:null;var r}),C0.apply(this,arguments)}function Vre(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Ya="firebase-messaging-store";let E0=null;function D0(){return E0||(E0=ky("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ya)}})),E0}function hU(n){return T0.apply(this,arguments)}function T0(){return(T0=v(function*(n){const e=k0(n),r=yield(yield D0()).transaction(Ya).objectStore(Ya).get(e);if(r)return r;{const i=yield Lre(n.appConfig.senderId);if(i)return yield S0(n,i),i}})).apply(this,arguments)}function S0(n,e){return A0.apply(this,arguments)}function A0(){return(A0=v(function*(n,e){const t=k0(n),i=(yield D0()).transaction(Ya,"readwrite");return yield i.objectStore(Ya).put(e,t),yield i.done,e})).apply(this,arguments)}function $re(n){return x0.apply(this,arguments)}function x0(){return(x0=v(function*(n){const e=k0(n),r=(yield D0()).transaction(Ya,"readwrite");yield r.objectStore(Ya).delete(e),yield r.done})).apply(this,arguments)}function k0({appConfig:n}){return n.appId}const Sn=new qi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hre(n,e){return M0.apply(this,arguments)}function M0(){return(M0=v(function*(n,e){const t=yield O0(n),r=pU(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(P0(n.appConfig),i)).json()}catch(o){throw Sn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Sn.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Sn.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Gre(n,e){return N0.apply(this,arguments)}function N0(){return(N0=v(function*(n,e){const t=yield O0(n),r=pU(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${P0(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Sn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Sn.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Sn.create("token-update-no-token");return s.token})).apply(this,arguments)}function fU(n,e){return R0.apply(this,arguments)}function R0(){return(R0=v(function*(n,e){const r={method:"DELETE",headers:yield O0(n)};try{const s=yield(yield fetch(`${P0(n.appConfig)}/${e}`,r)).json();if(s.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Sn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function P0({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function O0(n){return F0.apply(this,arguments)}function F0(){return(F0=v(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function pU({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==lU&&(i.web.applicationPubKey=r),i}function Wre(n){return L0.apply(this,arguments)}function L0(){return(L0=v(function*(n){const e=yield Kre(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Fs(e.getKey("auth")),p256dh:Fs(e.getKey("p256dh"))},r=yield hU(n.firebaseDependencies);if(r){if(Qre(r.subscriptionOptions,t))return Date.now()>=r.createTime+6048e5?qre(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield fU(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return mU(n.firebaseDependencies,t)}return mU(n.firebaseDependencies,t)})).apply(this,arguments)}function gU(n){return V0.apply(this,arguments)}function V0(){return(V0=v(function*(n){const e=yield hU(n.firebaseDependencies);e&&(yield fU(n.firebaseDependencies,e.token),yield $re(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function qre(n,e){return U0.apply(this,arguments)}function U0(){return(U0=v(function*(n,e){try{const t=yield Gre(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield S0(n.firebaseDependencies,r),t}catch(t){throw yield gU(n),t}})).apply(this,arguments)}function mU(n,e){return B0.apply(this,arguments)}function B0(){return(B0=v(function*(n,e){const r={token:yield Hre(n,e),createTime:Date.now(),subscriptionOptions:e};return yield S0(n,r),r.token})).apply(this,arguments)}function Kre(n,e){return $0.apply(this,arguments)}function $0(){return($0=v(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ore(e)})})).apply(this,arguments)}function Qre(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function yU(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function Yre(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function Xre(n,e){e.data&&(n.data=e.data)}(e,n),function Zre(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(n.fcmOptions.analyticsLabel=u)}(e,n),e}function Jre(n){return"object"==typeof n&&!!n&&cU in n}function _U(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function j0(n){return Sn.create("missing-app-config-values",{valueName:n})}_U("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_U("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tie{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function eie(n){if(!n||!n.options)throw j0("App Configuration Object");if(!n.name)throw j0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw j0(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function vU(n){return H0.apply(this,arguments)}function H0(){return(H0=v(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(xre,{scope:kre}),n.swRegistration.update().catch(()=>{})}catch(e){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function nie(n,e){return G0.apply(this,arguments)}function G0(){return(G0=v(function*(n,e){if(!e&&!n.swRegistration&&(yield vU(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function rie(n,e){return z0.apply(this,arguments)}function z0(){return(z0=v(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=lU)})).apply(this,arguments)}function W0(){return(W0=v(function*(n,e){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield rie(n,e?.vapidKey),yield nie(n,e?.serviceWorkerRegistration),Wre(n)})).apply(this,arguments)}function iie(n,e,t){return q0.apply(this,arguments)}function q0(){return(q0=v(function*(n,e,t){const r=sie(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[cU],message_name:t[Nre],message_time:t[Rre],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sie(n){switch(n){case sc.NOTIFICATION_CLICKED:return"notification_open";case sc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function K0(){return(K0=v(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===sc.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(yU(t)):n.onMessageHandler.next(yU(t)));const r=t.data;Jre(r)&&"1"===r[Pre]&&(yield iie(n,t.messageType,r))})).apply(this,arguments)}const bU="@firebase/messaging",aie=n=>{const e=new tie(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function oie(n,e){return K0.apply(this,arguments)}(e,t)),e},uie=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function wU(n,e){return W0.apply(this,arguments)}(e,r)}};function CU(){return Q0.apply(this,arguments)}function Q0(){return(Q0=v(function*(){try{yield Hh()}catch{return!1}return typeof window<"u"&&Ba()&&CE()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function lie(){jn(new Tn("messaging",aie,"PUBLIC")),jn(new Tn("messaging-internal",uie,"PRIVATE")),ot(bU,"0.12.1"),ot(bU,"0.12.1","esm2017")}();const Ly="analytics",hie="firebase_id",gie="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",EU="https://www.googletagmanager.com/gtag/js",An=new ja("@firebase/analytics");function DU(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function mie(n,e){const t=document.createElement("script");t.src=`${EU}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function _ie(n,e,t,r,i,s){return Z0.apply(this,arguments)}function Z0(){return(Z0=v(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield DU(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){An.error(a)}n("config",i,s)})).apply(this,arguments)}function vie(n,e,t,r,i){return J0.apply(this,arguments)}function J0(){return(J0=v(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield DU(t);for(const u of o){const l=a.find(d=>d.measurementId===u),c=l&&e[l.appId];if(!c){s=[];break}s.push(c)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){An.error(s)}})).apply(this,arguments)}function Iie(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(EU)&&t.src.includes(n))return t;return null}const Ur=new qi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),TU=new class Tie{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Sie(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Aie(n){return eD.apply(this,arguments)}function eD(){return(eD=v(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Sie(r)},s=gie.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw Ur.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function xie(n){return tD.apply(this,arguments)}function tD(){return(tD=v(function*(n,e=TU,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Ur.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ur.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Nie;return setTimeout(v(function*(){a.abort()}),void 0!==t?t:6e4),SU({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function SU(n,e,t){return nD.apply(this,arguments)}function nD(){return(nD=v(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=TU){var s;const{appId:o,measurementId:a}=n;try{yield kie(r,e)}catch(u){if(a)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield Aie(n);return i.deleteThrottleMetadata(o),u}catch(u){const l=u;if(!Mie(l)){if(i.deleteThrottleMetadata(o),a)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw u}const c=503===Number(null===(s=l?.customData)||void 0===s?void 0:s.httpStatus)?TE(t,i.intervalMillis,30):TE(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return i.setThrottleMetadata(o,d),An.debug(`Calling attemptFetch again in ${c} millis`),SU(n,d,r,i)}})).apply(this,arguments)}function kie(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Ur.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Mie(n){if(!(n instanceof ri&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Nie{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let rD,lD;function iD(){return(iD=v(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function AU(n){lD=n}function xU(n){rD=n}function Vie(){return cD.apply(this,arguments)}function cD(){return(cD=v(function*(){if(!Ba())return An.warn(Ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Hh()}catch(n){return An.warn(Ur.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function dD(){return(dD=v(function*(n,e,t,r,i,s,o){var a;const u=xie(n);u.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>An.error(g)),e.push(u);const l=Vie().then(g=>{if(g)return r.getId()}),[c,d]=yield Promise.all([u,l]);Iie(s)||mie(s,c.measurementId),lD&&(i("consent","default",lD),AU(void 0)),i("js",new Date);const p=null!==(a=o?.config)&&void 0!==a?a:{};return p.origin="firebase",p.update=!0,null!=d&&(p[hie]=d),i("config",c.measurementId,p),rD&&(i("set",rD),xU(void 0)),c.measurementId})).apply(this,arguments)}class Bie{constructor(e){this.app=e}_delete(){return delete Ls[this.app.options.appId],Promise.resolve()}}let Ls={},kU=[];const MU={};let RU,Vs,Vy="dataLayer",hD=!1;function jie(n,e,t){!function $ie(){const n=[];if(IE()&&n.push("This is a browser extension environment."),CE()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ur.create("invalid-analytics-context",{errorInfo:e});An.warn(t.message)}}();const r=n.options.appId;if(!r)throw Ur.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Ur.create("no-api-key");An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ls[r])throw Ur.create("already-exists",{id:r});if(!hD){!function yie(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Vy);const{wrappedGtag:s,gtagCore:o}=function bie(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function wie(n,e,t,r){function s(){return(s=v(function*(o,a,u){try{"event"===o?yield vie(n,e,t,a,u):"config"===o?yield _ie(n,e,t,r,a,u):"consent"===o?n("consent","update",u):n("set",a)}catch(l){An.error(l)}})).apply(this,arguments)}return function i(o,a,u){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Ls,kU,MU,Vy,"gtag");Vs=s,RU=o,hD=!0}return Ls[r]=function Uie(n,e,t,r,i,s,o){return dD.apply(this,arguments)}(n,kU,MU,e,RU,Vy,t),new Bie(n)}function Gie(){return fD.apply(this,arguments)}function fD(){return(fD=v(function*(){if(IE()||!CE()||!Ba())return!1;try{return yield Hh()}catch{return!1}})).apply(this,arguments)}const PU="@firebase/analytics";!function Wie(){jn(new Tn(Ly,(e,{options:t})=>jie(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),jn(new Tn("analytics-internal",function n(e){try{const t=e.getProvider(Ly).getImmediate();return{logEvent:(r,i,s)=>function zie(n,e,t,r){n=sn(n),function Rie(n,e,t,r,i){return iD.apply(this,arguments)}(Vs,Ls[n.app.options.appId],e,t,r).catch(i=>An.error(i))}(t,r,i,s)}}catch(t){throw Ur.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),ot(PU,"0.9.1"),ot(PU,"0.9.1","esm2017")}();class qie extends qn{constructor(e,t){super()}schedule(e,t=0){return this}}const Uy={setInterval(n,e,...t){const{delegate:r}=Uy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Uy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class FU extends qie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Uy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Uy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Jo(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const LU={now:()=>(LU.delegate||Date).now(),delegate:void 0};class Yh{constructor(e,t=Yh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Yh.now=LU.now;class VU extends Yh{constructor(e,t=Yh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Yie=new class Qie extends VU{}(class Kie extends FU{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Xie=new VU(FU),Xh=new bl("7.5.0"),pD="__angularfire_symbol__analyticsIsSupportedValue",gD="__angularfire_symbol__analyticsIsSupported",mD="__angularfire_symbol__remoteConfigIsSupportedValue",yD="__angularfire_symbol__remoteConfigIsSupported",_D="__angularfire_symbol__messagingIsSupportedValue",vD="__angularfire_symbol__messagingIsSupported";function By(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[gD]||(globalThis[gD]=Gie().then(n=>globalThis[pD]=n).catch(()=>globalThis[pD]=!1)),globalThis[vD]||(globalThis[vD]=CU().then(n=>globalThis[_D]=n).catch(()=>globalThis[_D]=!1)),globalThis[yD]||(globalThis[yD]=Are().then(n=>globalThis[mD]=n).catch(()=>globalThis[mD]=!1));const $y=(n,e)=>{const t=e?[e]:FV(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function oc(){}class UU{constructor(e,t=Yie){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Zie{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oc,{},oc,oc)),t.pipe(Cn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let jy=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new UU(Zone.current)),this.insideAngular=t.run(()=>new UU(Zone.current,Xie)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(q(st))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Xa(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Jie(n){return Xa().ngZone.runOutsideAngular(()=>n())}function Za(n){return Xa().ngZone.run(()=>n())}function ese(n){return Xa(),function tse(n){return function(t){return(t=t.lift(new Zie(n.ngZone))).pipe(Xu(n.outsideAngular),Yu(n.insideAngular))}}(Xa())(n)}const nse=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Za(()=>n.apply(void 0,r))},Us=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=Za(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oc,{},oc,oc)))),r[s]=nse(r[s],t));const i=Jie(()=>n.apply(this,r));if(!e){if(i instanceof Ze){const s=Xa();return i.pipe(Xu(s.outsideAngular),Yu(s.insideAngular))}return Za(()=>i)}return i instanceof Ze?i.pipe(ese):i instanceof Promise?Za(()=>new Promise((s,o)=>i.then(a=>Za(()=>s(a)),a=>Za(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Za(()=>i)};class Ja{constructor(e){return e}}class Hy{constructor(){return FV()}}const bD=new K("angularfire2._apps"),ise={provide:Ja,useFactory:function rse(n){return n&&1===n.length?n[0]:new Ja(Ry())},deps:[[new Lt,bD]]},sse={provide:Hy,deps:[[new Lt,bD]]};function ose(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ja(r)}}let ase=(()=>{class n{constructor(t){ot("angularfire",Xh.full,"core"),ot("angularfire",Xh.full,"app"),ot("angular",kR.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(q(Mm))},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({providers:[ise,sse]}),n})();const lse=Us(OV,!0),ID=new Map,BU={activated:!1,tokenObservers:[]},cse={initialized:!1,enabled:!1};function xn(n){return ID.get(n)||Object.assign({},BU)}function Gy(){return cse}class mse{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return v(function*(){t.stop();try{t.pending=new tc,yield function yse(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new tc,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ir=new qi("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jU(n){if(!xn(n).activated)throw ir.create("use-before-activation",{appName:n.name})}function DD(n,e){return TD.apply(this,arguments)}function TD(){return(TD=v(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(d){throw ir.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw ir.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw ir.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(u[1]),c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}})).apply(this,arguments)}function bse(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Zh="firebase-app-check-store";let qy=null;function GU(){return qy||(qy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ir.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Zh,{keyPath:"compositeKey"})}}catch(t){e(ir.create("storage-open",{originalErrorMessage:t?.message}))}}),qy)}function SD(){return(SD=v(function*(n,e){const r=(yield GU()).transaction(Zh,"readwrite"),s=r.objectStore(Zh).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ir.create("storage-set",{originalErrorMessage:null===(l=u.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const Jh=new ja("@firebase/app-check");function kD(n,e){return Ba()?function Dse(n,e){return function zU(n,e){return SD.apply(this,arguments)}(function qU(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function KU(){return Gy().enabled}function QU(){return ND.apply(this,arguments)}function ND(){return(ND=v(function*(){const n=Gy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mse={error:"UNKNOWN_ERROR"};function Nse(n){return by.encodeString(JSON.stringify(n),!1)}function Ky(n){return RD.apply(this,arguments)}function RD(){return(RD=v(function*(n,e=!1){const t=n.app;jU(t);const r=xn(t);let s,i=r.token;if(i&&!ac(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(ac(u)?i=u:yield kD(t,void 0))}if(!e&&i&&ac(i))return{token:i.token};let a,o=!1;if(KU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=DD(bse(t,yield QU()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield kD(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield xn(t).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Jh.warn(u.message):Jh.error(u),s=u}return i?s?a=ac(i)?{token:i.token,internalError:s}:ZU(s):(a={token:i.token},r.token=i,yield kD(t,i)):a=ZU(s),o&&XU(t,a),a})).apply(this,arguments)}function OD(n,e){const t=xn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function YU(n){const{app:e}=n,t=xn(e);let r=t.tokenRefresher;r||(r=function Rse(n){const{app:e}=n;return new mse(v(function*(){let r;if(r=xn(e).token?yield Ky(n,!0):yield Ky(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=xn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XU(n,e){const t=xn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ac(n){return n.expireTimeMillis-Date.now()>0}function ZU(n){return{token:Nse(Mse),error:n}}class Pse{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xn(this.app);for(const t of e)OD(this.app,t.next);return Promise.resolve()}}const oB="app-check-internal";!function Kse(){jn(new Tn("app-check",n=>function Ose(n,e){return new Pse(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oB).initialize()})),jn(new Tn(oB,n=>function Fse(n){return{getToken:e=>Ky(n,e),addTokenListener:e=>function PD(n,e,t,r){const{app:i}=n,s=xn(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&ac(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),YU(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>YU(n))}(n,"INTERNAL",e),removeTokenListener:e=>OD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),ot("@firebase/app-check","0.6.1")}();class Yy{constructor(){return $y("app-check")}}typeof window<"u"&&window;const Jse=function uB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lB=new qi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cB=new ja("@firebase/auth");function Xy(n,...e){cB.logLevel<=Me.ERROR&&cB.error(`Auth (${Wa}): ${n}`,...e)}function vr(n,...e){throw BD(n,...e)}function Ki(n,...e){return BD(n,...e)}function dB(n,e,t){const r=Object.assign(Object.assign({},Jse()),{[e]:t});return new qi("auth","Firebase",r).create(e,{appName:n.name})}function BD(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lB.create(n,...e)}function F(n,e,...t){if(!n)throw BD(e,...t)}function Qi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xy(e),new Error(e)}function wo(n,e){n||Qi(e)}const hB=new Map;function Bs(n){wo(n instanceof Function,"Expected a class definition");let e=hB.get(n);return e?(wo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hB.set(n,e),e)}function ef(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function fB(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class tf{constructor(e,t){this.shortDelay=e,this.longDelay=t,wo(t>e,"Short delay should be less than long delay!"),this.isMobile=bE()||TV()}get(){return function noe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function $D(){return"http:"===fB()||"https:"===fB()}()||IE()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jD(n,e){wo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class pB{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ioe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},soe=new tf(3e4,6e4);function Qt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function on(n,e,t,r){return HD.apply(this,arguments)}function HD(){return(HD=v(function*(n,e,t,r,i={}){return gB(n,i,v(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=zh(Object.assign({key:n.config.apiKey},o)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),pB.fetch()(mB(n,n.config.apiHost,t,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function gB(n,e,t){return GD.apply(this,arguments)}function GD(){return(GD=v(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ioe),e);try{const i=new ooe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw nf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw nf(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw nf(n,"email-already-in-use",o);if("USER_DISABLED"===u)throw nf(n,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dB(n,c,l);vr(n,c)}}catch(i){if(i instanceof ri)throw i;vr(n,"network-request-failed")}})).apply(this,arguments)}function $s(n,e,t,r){return zD.apply(this,arguments)}function zD(){return(zD=v(function*(n,e,t,r,i={}){const s=yield on(n,e,t,r,i);return"mfaPendingCredential"in s&&vr(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function mB(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?jD(n.config,i):`${n.config.apiScheme}://${i}`}class ooe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ki(this.auth,"network-request-failed")),soe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ki(n,e,r);return i.customData._tokenResponse=t,i}function WD(){return(WD=v(function*(n,e){return on(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function loe(n,e){return KD.apply(this,arguments)}function KD(){return(KD=v(function*(n,e){return on(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function rf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function QD(){return(QD=v(function*(n,e=!1){const t=sn(n),r=yield t.getIdToken(e),i=Zy(r);F(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:rf(YD(i.auth_time)),issuedAtTime:rf(YD(i.iat)),expirationTime:rf(YD(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function YD(n){return 1e3*Number(n)}function Zy(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Xy("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cy(t);return i?JSON.parse(i):(Xy("Failed to decode base64 JWT payload"),null)}catch(i){return Xy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function js(n,e){return XD.apply(this,arguments)}function XD(){return(XD=v(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof ri&&hoe(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function hoe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class foe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(v(function*(){yield t.iteration()}),r)}iteration(){var e=this;return v(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class yB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rf(this.lastLoginAt),this.creationTime=rf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sf(n){return ZD.apply(this,arguments)}function ZD(){return(ZD=v(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield js(n,loe(t,{idToken:r}));F(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?moe(s.providerUserInfo):[],a=goe(n.providerData,o),c=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yB(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,d)})).apply(this,arguments)}function JD(){return(JD=v(function*(n){const e=sn(n);yield sf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function goe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function moe(n){return n.map(e=>{var{providerId:t}=e,r=bd(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function eT(){return(eT=v(function*(n,e){const t=yield gB(n,{},v(function*(){const r=zh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=mB(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pB.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class af{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){F(e.idToken,"internal-error"),F(typeof e.idToken<"u","internal-error"),F(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function doe(n){const e=Zy(n);return F(e,"internal-error"),F(typeof e.exp<"u","internal-error"),F(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return v(function*(){return F(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return v(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function yoe(n,e){return eT.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new af;return r&&(F("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(F("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(F("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new af,this.toJSON())}_performRefresh(){return Qi("not implemented")}}function bo(n,e){F("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class eu{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=bd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new foe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yB(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return v(function*(){const r=yield js(t,t.stsTokenManager.getToken(t.auth,e));return F(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function coe(n){return QD.apply(this,arguments)}(this,e)}reload(){return function poe(n){return JD.apply(this,arguments)}(this)}_assign(e){this!==e&&(F(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new eu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){F(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return v(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield sf(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return v(function*(){const t=yield e.getIdToken();return yield js(e,function aoe(n,e){return WD.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,c;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,p=null!==(i=t.email)&&void 0!==i?i:void 0,g=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,y=null!==(o=t.photoURL)&&void 0!==o?o:void 0,w=null!==(a=t.tenantId)&&void 0!==a?a:void 0,b=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,D=null!==(l=t.createdAt)&&void 0!==l?l:void 0,M=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:I,emailVerified:$,isAnonymous:Q,providerData:X,stsTokenManager:Pt}=t;F(I&&Pt,e,"internal-error");const $u=af.fromJSON(this.name,Pt);F("string"==typeof I,e,"internal-error"),bo(d,e.name),bo(p,e.name),F("boolean"==typeof $,e,"internal-error"),F("boolean"==typeof Q,e,"internal-error"),bo(g,e.name),bo(y,e.name),bo(w,e.name),bo(b,e.name),bo(D,e.name),bo(M,e.name);const hM=new eu({uid:I,auth:e,email:p,emailVerified:$,displayName:d,isAnonymous:Q,photoURL:y,phoneNumber:g,tenantId:w,stsTokenManager:$u,createdAt:D,lastLoginAt:M});return X&&Array.isArray(X)&&(hM.providerData=X.map(N_e=>Object.assign({},N_e))),b&&(hM._redirectEventId=b),hM}static _fromIdTokenResponse(e,t,r=!1){return v(function*(){const i=new af;i.updateFromServerResponse(t);const s=new eu({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sf(s),s})()}}const _B=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(function*(){return!0})()}_set(t,r){var i=this;return v(function*(){i.storage[t]=r})()}_get(t){var r=this;return v(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return v(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Jy(n,e,t){return`firebase:${n}:${e}:${t}`}class lc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return v(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?eu._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return v(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(function*(){if(!t.length)return new lc(Bs(_B),e,r);const i=(yield Promise.all(t.map(function(){var l=v(function*(c){if(yield c._isAvailable())return c});return function(c){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||Bs(_B);const o=Jy(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const c=yield l._get(o);if(c){const d=eu._fromJSON(e,c);l!==s&&(a=d),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var l=v(function*(c){if(c!==s)try{yield c._remove(o)}catch{}});return function(c){return l.apply(this,arguments)}}())),new lc(s,e,r)):new lc(s,e,r)})()}}function vB(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EB(e))return"Blackberry";if(DB(e))return"Webos";if(tT(e))return"Safari";if((e.includes("chrome/")||bB(e))&&!e.includes("edge/"))return"Chrome";if(CB(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function wB(n=rn()){return/firefox\//i.test(n)}function tT(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bB(n=rn()){return/crios\//i.test(n)}function IB(n=rn()){return/iemobile/i.test(n)}function CB(n=rn()){return/android/i.test(n)}function EB(n=rn()){return/blackberry/i.test(n)}function DB(n=rn()){return/webos/i.test(n)}function e_(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function TB(n=rn()){return e_(n)||CB(n)||DB(n)||EB(n)||/windows phone/i.test(n)||IB(n)}function SB(n,e=[]){let t;switch(n){case"Browser":t=vB(rn());break;case"Worker":t=`${vB(rn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wa}/${r}`}class boe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return v(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Ioe{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AB(this),this.idTokenSubscription=new AB(this),this.beforeStateQueue=new boe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lB,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Bs(t)),this._initializationPromise=this.queue(v(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield lc.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return v(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return v(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(s=l.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return F(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return v(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return v(function*(){try{yield sf(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function roe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return v(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return v(function*(){const r=e?sn(e):null;return r&&F(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return v(function*(){if(!r._deleted)return e&&F(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(v(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return v(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(v(function*(){yield t.assertedPersistence.setPersistence(Bs(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return v(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return v(function*(){if(!t.redirectPersistenceManager){const r=e&&Bs(e)||t._popupRedirectResolver;F(r,t,"argument-error"),t.redirectPersistenceManager=yield lc.create(t,[Bs(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return v(function*(){var r,i;return t._isInitialized&&(yield t.queue(v(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return v(function*(){if(e===t.currentUser)return t.queue(v(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return F(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return v(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return F(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return v(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function wr(n){return sn(n)}class AB{constructor(e){this.auth=e,this.observer=null,this.addObserver=function rte(n,e){const t=new ite(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return F(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xB(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kB(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class MB{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,t){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}function rT(){return(rT=v(function*(n,e){return on(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function sT(){return(sT=v(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithPassword",Qt(n,e))})).apply(this,arguments)}function dT(){return(dT=v(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithEmailLink",Qt(n,e))})).apply(this,arguments)}function hT(){return(hT=v(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithEmailLink",Qt(n,e))})).apply(this,arguments)}class uf extends MB{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new uf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new uf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return v(function*(){switch(t.signInMethod){case"password":return function Soe(n,e){return sT.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function Noe(n,e){return dT.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:vr(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return v(function*(){switch(r.signInMethod){case"password":return function RB(n,e){return rT.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function Roe(n,e){return hT.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:vr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Hs(n,e){return fT.apply(this,arguments)}function fT(){return(fT=v(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithIdp",Qt(n,e))})).apply(this,arguments)}class df{constructor(e){var t,r,i,s,o,a;const u=Wh(qh(e)),l=null!==(t=u.apiKey)&&void 0!==t?t:null,c=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function Boe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);F(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function $oe(n){const e=Wh(qh(n)).link,t=e?Wh(qh(e)).deep_link_id:null,r=Wh(qh(n)).deep_link_id;return(r?Wh(qh(r)).link:null)||r||t||e||n}(e);try{return new df(t)}catch{return null}}}let PB=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return uf._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=df.parseLink(r);return F(i,"argument-error"),uf._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Io{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class joe extends Io{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function OB(n,e){return vT.apply(this,arguments)}function vT(){return(vT=v(function*(n,e){return $s(n,"POST","/v1/accounts:signUp",Qt(n,e))})).apply(this,arguments)}class ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(function*(){const s=yield eu._fromIdTokenResponse(e,r,i),o=FB(r);return new ii({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return v(function*(){yield e._updateTokensIfNecessary(r,!0);const i=FB(r);return new ii({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function FB(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class r_ extends ri{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,r_.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new r_(e,t,r,i)}}function LB(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?r_._fromErrorAndOperation(n,s,e,r):s})}function IT(n,e){return CT.apply(this,arguments)}function CT(){return(CT=v(function*(n,e,t=!1){const r=yield js(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ii._forOperation(n,"link",r)})).apply(this,arguments)}function DT(){return(DT=v(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield js(n,LB(r,i,e,n),t);F(s.idToken,r,"internal-error");const o=Zy(s.idToken);F(o,r,"internal-error");const{sub:a}=o;return F(n.uid===a,r,"user-mismatch"),ii._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&vr(r,"user-mismatch"),s}})).apply(this,arguments)}function BB(n,e){return TT.apply(this,arguments)}function TT(){return(TT=v(function*(n,e,t=!1){const r="signIn",i=yield LB(n,r,e),s=yield ii._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function AT(){return(AT=v(function*(n,e){return BB(wr(n),e)})).apply(this,arguments)}function Qoe(n,e,t){return BT.apply(this,arguments)}function BT(){return(BT=v(function*(n,e,t){const r=wr(n),i=yield OB(r,{returnSecureToken:!0,email:e,password:t}),s=yield ii._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function Yoe(n,e,t){return function ST(n,e){return AT.apply(this,arguments)}(sn(n),PB.credential(e,t))}function jB(n,e,t,r){return sn(n).onIdTokenChanged(e,t,r)}function sae(n){return sn(n).signOut()}const o_="__sak";class HB{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(o_,"1"),this.storage.removeItem(o_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hae=(()=>{class n extends HB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lae(){const n=rn();return tT(n)||e_(n)}()&&function woe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=TB(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function voe(){return function Yee(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return v(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return v(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return v(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),GB=(()=>{class n extends HB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let pae=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return v(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(u).map(function(){var d=v(function*(p){return p(i.origin,a)});return function(p){return d.apply(this,arguments)}}()),c=yield function fae(n){return Promise.all(n.map(function(){var e=v(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:c})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function tS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class gae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return v(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,l)=>{const c=tS("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(g.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Yt(){return window}function nS(){return typeof Yt().WorkerGlobalScope<"u"&&"function"==typeof Yt().importScripts}function rS(){return(rS=v(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zB="firebaseLocalStorageDb",a_="firebaseLocalStorage",WB="fbase_key";class ff{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function u_(n,e){return n.transaction([a_],e?"readwrite":"readonly").objectStore(a_)}function iS(){const n=indexedDB.open(zB,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(a_,{keyPath:WB})}catch(i){t(i)}}),n.addEventListener("success",v(function*(){const r=n.result;r.objectStoreNames.contains(a_)?e(r):(r.close(),yield function bae(){const n=indexedDB.deleteDatabase(zB);return new ff(n).toPromise()}(),e(yield iS()))}))})}function qB(n,e,t){return sS.apply(this,arguments)}function sS(){return(sS=v(function*(n,e,t){const r=u_(n,!0).put({[WB]:e,value:t});return new ff(r).toPromise()})).apply(this,arguments)}function oS(){return(oS=v(function*(n,e){const t=u_(n,!1).get(e),r=yield new ff(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function KB(n,e){const t=u_(n,!0).delete(e);return new ff(t).toPromise()}const Dae=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return v(function*(){return t.db||(t.db=yield iS()),t.db})()}_withRetries(t){var r=this;return v(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return v(function*(){return nS()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return v(function*(){t.receiver=pae._getInstance(function vae(){return nS()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=v(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=v(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return v(function*(){var r,i;if(t.activeServiceWorker=yield function yae(){return rS.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new gae(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return v(function*(){if(r.sender&&r.activeServiceWorker&&function _ae(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return v(function*(){try{if(!indexedDB)return!1;const t=yield iS();return yield qB(t,o_,"1"),yield KB(t,o_),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return v(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return v(function*(){return i._withPendingWrite(v(function*(){return yield i._withRetries(s=>qB(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return v(function*(){const i=yield r._withRetries(s=>function Iae(n,e){return oS.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return v(function*(){return r._withPendingWrite(v(function*(){return yield r._withRetries(i=>KB(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return v(function*(){const r=yield t._withRetries(o=>{const a=u_(o,!1).getAll();return new ff(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(v(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function YB(n){return`__${n}${Math.floor(1e6*Math.random())}`}function nu(n,e){return e?Bs(e):(F(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}YB("rcb"),new tf(3e4,6e4);class mS extends MB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Hs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jae(n){return BB(n.auth,new mS(n),n.bypassAuthState)}function Hae(n){const{auth:e,user:t}=n;return F(t,e,"internal-error"),function UB(n,e){return DT.apply(this,arguments)}(t,new mS(n),n.bypassAuthState)}function Gae(n){return yS.apply(this,arguments)}function yS(){return(yS=v(function*(n){const{auth:e,user:t}=n;return F(t,e,"internal-error"),IT(t,new mS(n),n.bypassAuthState)})).apply(this,arguments)}class zae{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=v(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return v(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(l))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jae;case"linkViaPopup":case"linkViaRedirect":return Gae;case"reauthViaPopup":case"reauthViaRedirect":return Hae;default:vr(this.auth,"internal-error")}}resolve(e){wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new tf(2e3,1e4);const pf=new Map;class qae extends zae{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return v(function*(){let r=pf.get(t.auth._key());if(!r){try{const s=(yield function Kae(n,e){return IS.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}pf.set(t.auth._key(),r)}return t.bypassAuthState||pf.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return v(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return v(function*(){})()}cleanUp(){}}function IS(){return(IS=v(function*(n,e){const t=JB(e),r=ZB(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Qae(n,e){pf.set(n._key(),e)}function ZB(n){return Bs(n._redirectPersistence)}function JB(n){return Jy("pendingRedirect",n.config.apiKey,n.name)}function e$(n,e){return xS.apply(this,arguments)}function xS(){return(xS=v(function*(n,e,t=!1){const r=wr(n),i=nu(r,e),o=yield new qae(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class eue{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function tue(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r$(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!r$(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ki(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(n$(e))}saveEventToCache(e){this.cachedEventUids.add(n$(e)),this.lastProcessedEventTime=Date.now()}}function n$(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function r$({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function nue(n){return MS.apply(this,arguments)}function MS(){return(MS=v(function*(n,e={}){return on(n,"GET","/v1/projects",e)})).apply(this,arguments)}const rue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iue=/^https?/;function NS(){return(NS=v(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield nue(n);for(const t of e)try{if(oue(t))return}catch{}vr(n,"unauthorized-domain")})).apply(this,arguments)}function oue(n){const e=ef(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!iue.test(t))return!1;if(rue.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const aue=new tf(3e4,6e4);function i$(){const n=Yt().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let c_=null;function lue(n){return c_=c_||function uue(n){return new Promise((e,t)=>{var r,i,s;function o(){i$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i$(),t(Ki(n,"network-request-failed"))},timeout:aue.get()})}if(null!==(i=null===(r=Yt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Yt().gapi)||void 0===s||!s.load){const a=YB("iframefcb");return Yt()[a]=()=>{gapi.load?o():t(Ki(n,"network-request-failed"))},function QB(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ki("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function xae(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>t(u))}o()}}).catch(e=>{throw c_=null,e})}(n),c_}const cue=new tf(5e3,15e3),fue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gue(n){const e=n.config;F(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?jD(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:Wa},i=pue.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${zh(r).slice(1)}`}function RS(){return RS=v(function*(n){const e=yield lue(n),t=Yt().gapi;return F(t,n,"internal-error"),e.open({where:document.body,url:gue(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fue,dontclear:!0},r=>new Promise(function(){var i=v(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Ki(n,"network-request-failed"),u=Yt().setTimeout(()=>{o(a)},cue.get());function l(){Yt().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),RS.apply(this,arguments)}const yue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class s${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o$(n,e,t,r,i,s){F(n.config.authDomain,n,"auth-domain-config-required"),F(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wa,eventId:i};if(e instanceof Io){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",EE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,l]of Object.entries(s||{}))o[u]=l}if(e instanceof joe){const u=e.getScopes().filter(l=>""!==l);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];return`${function Tue({config:n}){return n.emulator?jD(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${zh(a).slice(1)}`}const PS="webStorageSupport",Aue=class Sue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GB,this._completeRedirectFn=e$,this._overrideRedirectResult=Qae}_openPopup(e,t,r,i){var s=this;return v(function*(){var o;wo(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=o$(e,t,r,ef(),i);return function Iue(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},yue),{width:r.toString(),height:i.toString(),top:s,left:o}),l=rn().toLowerCase();t&&(a=bB(l)?"_blank":t),wB(l)&&(e=e||"http://localhost",u.scrollbars="yes");const c=Object.entries(u).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(function _oe(n=rn()){var e;return e_(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function Cue(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new s$(null);const d=window.open(e||"",a,c);F(d,n,"popup-blocked");try{d.focus()}catch{}return new s$(d)}(e,a,tS())})()}_openRedirect(e,t,r,i){var s=this;return v(function*(){return yield s._originValidation(e),function mae(n){Yt().location.href=n}(o$(e,t,r,ef(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(wo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return v(function*(){const r=yield function mue(n){return RS.apply(this,arguments)}(e),i=new eue(e);return r.register("authEvent",s=>(F(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(PS,{type:PS},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[PS];void 0!==o&&t(!!o),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function sue(n){return NS.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TB()||tT()||e_()}};var u$="@firebase/auth";class xue{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return v(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){F(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Rue=EV("authIdTokenMaxAge")||300;let c$=null;const Pue=n=>function(){var e=v(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Rue)return;const s=r?.token;c$!==s&&(c$=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Oue(n=Ry()){const e=za(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function eoe(n,e){const t=za(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Sy(t.getOptions(),e??{}))return i;vr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Aue,persistence:[Dae,hae,GB]}),r=EV("authTokenSyncURL");if(r){const s=Pue(r);(function iae(n,e,t){sn(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),jB(t,o=>s(o))}const i=IV("auth");return i&&function Coe(n,e,t){const r=wr(n);F(r._canInitEmulator,r,"emulator-config-failed"),F(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=xB(e),{host:o,port:a}=function Eoe(n){const e=xB(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kB(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:kB(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Doe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}function d$(n){return new Ze(function(e){return{unsubscribe:jB(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}!function Mue(n){jn(new Tn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{F(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),F(!o?.includes(":"),"argument-error",{appName:a.name});const l={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SB(n)},c=new Ioe(a,u,l);return function toe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Bs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jn(new Tn("auth-internal",e=>{const t=wr(e.getProvider("auth").getImmediate());return new xue(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ot(u$,"0.21.1",function kue(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),ot(u$,"0.21.1","esm2017")}("Browser");class gf{constructor(e){return e}}class OS{constructor(){return $y("auth")}}const FS=new K("angularfire2.auth-instances");function Lue(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gf(r)}}const Vue={provide:OS,deps:[[new Lt,FS]]},Uue={provide:gf,useFactory:function Fue(n,e){const t=By("auth",n,e);return t&&new gf(t)},deps:[[new Lt,FS],Ja]};let Bue=(()=>{class n{constructor(){ot("angularfire",Xh.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({providers:[Uue,Vue]}),n})();const jue=Us(d$,!0),Hue=Us(Qoe,!0),Gue=Us(Oue,!0),zue=Us(Yoe,!0),Wue=Us(sae,!0);var W,que=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gs={},LS=LS||{},ue=que||self;function d_(){}function h_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var VS="closure_uid_"+(1e9*Math.random()>>>0),Que=0;function Yue(n,e,t){return n.call.apply(n.bind,arguments)}function Xue(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hn(n,e,t){return(Hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yue:Xue).apply(null,arguments)}function f_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Co(){this.s=this.s,this.o=this.o}Co.prototype.s=!1,Co.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Kue(n){Object.prototype.hasOwnProperty.call(n,VS)&&n[VS]||(n[VS]=++Que)}(this)},Co.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const f$=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function US(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function p$(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(h_(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Gn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Gn.prototype.h=function(){this.defaultPrevented=!0};var Jue=function(){if(!ue.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ue.addEventListener("test",d_,e),ue.removeEventListener("test",d_,e)}catch{}return n}();function p_(n){return/^[\s\xa0]*$/.test(n)}var g$=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function BS(n,e){return n<e?-1:n>e?1:0}function g_(){var n=ue.navigator;return n&&(n=n.userAgent)?n:""}function Yi(n){return-1!=g_().indexOf(n)}function $S(n){return $S[" "](n),n}$S[" "]=d_;var m_,n,tle=Yi("Opera"),cc=Yi("Trident")||Yi("MSIE"),m$=Yi("Edge"),jS=m$||cc,y$=Yi("Gecko")&&!(-1!=g_().toLowerCase().indexOf("webkit")&&!Yi("Edge"))&&!(Yi("Trident")||Yi("MSIE"))&&!Yi("Edge"),nle=-1!=g_().toLowerCase().indexOf("webkit")&&!Yi("Edge");function _$(){var n=ue.document;return n?n.documentMode:void 0}e:{var HS="",GS=(n=g_(),y$?/rv:([^\);]+)(\)|;)/.exec(n):m$?/Edge\/([\d\.]+)/.exec(n):cc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nle?/WebKit\/(\S+)/.exec(n):tle?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(GS&&(HS=GS?GS[1]:""),cc){var zS=_$();if(null!=zS&&zS>parseFloat(HS)){m_=String(zS);break e}}m_=HS}var rle={};var sle=ue.document&&cc&&(_$()||parseInt(m_,10))||void 0;function yf(n,e){if(Gn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(y$){e:{try{$S(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ole[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yf.X.h.call(this)}}kn(yf,Gn);var ole={2:"touch",3:"pen",4:"mouse"};yf.prototype.h=function(){yf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _f="closure_listenable_"+(1e6*Math.random()|0),ale=0;function ule(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++ale,this.ba=this.ea=!1}function y_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function qS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function w$(n){const e={};for(const t in n)e[t]=n[t];return e}const b$="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I$(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<b$.length;s++)t=b$[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function __(n){this.src=n,this.g={},this.h=0}function KS(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=f$(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(y_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function QS(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}__.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=QS(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new ule(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var YS="closure_lm_"+(1e6*Math.random()|0),XS={};function C$(n,e,t,r,i){if(r&&r.once)return D$(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)C$(n,e[s],t,r,i);return null}return t=tA(t),n&&n[_f]?n.N(e,t,mf(r)?!!r.capture:!!r,i):E$(n,e,t,!1,r,i)}function E$(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=mf(i)?!!i.capture:!!i,a=JS(n);if(a||(n[YS]=a=new __(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function lle(){const e=cle;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Jue||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(S$(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function D$(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)D$(n,e[s],t,r,i);return null}return t=tA(t),n&&n[_f]?n.O(e,t,mf(r)?!!r.capture:!!r,i):E$(n,e,t,!0,r,i)}function T$(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)T$(n,e[s],t,r,i);else r=mf(r)?!!r.capture:!!r,t=tA(t),n&&n[_f]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=QS(s=n.g[e],t,r,i))&&(y_(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=JS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=QS(e,t,r,i)),(t=-1<n?e[n]:null)&&ZS(t))}function ZS(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[_f])KS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(S$(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=JS(e))?(KS(t,n),0==t.h&&(t.src=null,e[YS]=null)):y_(n)}}}function S$(n){return n in XS?XS[n]:XS[n]="on"+n}function cle(n,e){if(n.ba)n=!0;else{e=new yf(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ZS(n),n=t.call(r,e)}return n}function JS(n){return(n=n[YS])instanceof __?n:null}var eA="__closure_events_fn_"+(1e9*Math.random()>>>0);function tA(n){return"function"==typeof n?n:(n[eA]||(n[eA]=function(e){return n.handleEvent(e)}),n[eA])}function an(){Co.call(this),this.i=new __(this),this.P=this,this.I=null}function Mn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Gn(e,n);else if(e instanceof Gn)e.target=e.target||n;else{var i=e;I$(e=new Gn(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=v_(o,r,!0,e)&&i}if(i=v_(o=e.g=n,r,!0,e)&&i,i=v_(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=v_(o=e.g=t[s],r,!1,e)&&i}function v_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,u=o.ha||o.src;o.ea&&KS(n.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}kn(an,Co),an.prototype[_f]=!0,an.prototype.removeEventListener=function(n,e,t,r){T$(this,n,e,t,r)},an.prototype.M=function(){if(an.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)y_(t[r]);delete n.g[e],n.h--}}this.I=null},an.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},an.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nA=ue.JSON.stringify;function dle(){var n=k$;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rA,A$=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new fle,n=>n.reset());class fle{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ple(n){ue.setTimeout(()=>{throw n},0)}function x$(n,e){rA||function gle(){var n=ue.Promise.resolve(void 0);rA=function(){n.then(mle)}}(),iA||(rA(),iA=!0),k$.add(n,e)}var iA=!1,k$=new class hle{constructor(){this.h=this.g=null}add(e,t){const r=A$.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mle(){for(var n;n=dle();){try{n.h.call(n.g)}catch(t){ple(t)}var e=A$;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}iA=!1}function w_(n,e){an.call(this),this.h=n||1,this.g=e||ue,this.j=Hn(this.lb,this),this.l=Date.now()}function sA(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function oA(n,e,t){if("function"==typeof n)t&&(n=Hn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hn(n.handleEvent,n)}return 2147483647<Number(e)?-1:ue.setTimeout(n,e||0)}function M$(n){n.g=oA(()=>{n.g=null,n.i&&(n.i=!1,M$(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kn(w_,an),(W=w_.prototype).ca=!1,W.R=null,W.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Mn(this,"tick"),this.ca&&(sA(this),this.start()))}},W.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.M=function(){w_.X.M.call(this),sA(this),delete this.g};class yle extends Co{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:M$(this)}M(){super.M(),this.g&&(ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vf(n){Co.call(this),this.h=n,this.g={}}kn(vf,Co);var N$=[];function R$(n,e,t,r){Array.isArray(t)||(t&&(N$[0]=t.toString()),t=N$);for(var i=0;i<t.length;i++){var s=C$(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function P$(n){qS(n.g,function(e,t){this.g.hasOwnProperty(t)&&ZS(e)},n),n.g={}}function b_(){this.g=!0}function dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ble(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return nA(t)}catch{return e}}(n,t)+(r?" "+r:"")})}vf.prototype.M=function(){vf.X.M.call(this),P$(this)},vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},b_.prototype.Aa=function(){this.g=!1},b_.prototype.info=function(){};var ru={},O$=null;function I_(){return O$=O$||new an}function F$(n){Gn.call(this,ru.Pa,n)}function wf(n){const e=I_();Mn(e,new F$(e))}function L$(n,e){Gn.call(this,ru.STAT_EVENT,n),this.stat=e}function sr(n){const e=I_();Mn(e,new L$(e,n))}function V$(n,e){Gn.call(this,ru.Qa,n),this.size=e}function bf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ue.setTimeout(function(){n()},e)}ru.Pa="serverreachability",kn(F$,Gn),ru.STAT_EVENT="statevent",kn(L$,Gn),ru.Qa="timingevent",kn(V$,Gn);var C_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},U$={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function aA(){}function $$(){}aA.prototype.h=null;var cA,If={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function uA(){Gn.call(this,"d")}function lA(){Gn.call(this,"c")}function E_(){}function Cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new vf(this),this.O=Ile,this.T=new w_(n=jS?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new j$}function j$(){this.i=null,this.g="",this.h=!1}kn(uA,Gn),kn(lA,Gn),kn(E_,aA),E_.prototype.g=function(){return new XMLHttpRequest},E_.prototype.i=function(){return{}},cA=new E_;var Ile=45e3,dA={},D_={};function hA(n,e,t){n.K=1,n.v=x_(zs(e)),n.s=t,n.P=!0,H$(n,null)}function H$(n,e){n.F=Date.now(),Ef(n),n.A=zs(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),J$(t.i,"t",r),n.C=0,t=n.l.H,n.h=new j$,n.g=Cj(n.l,t?e:null,!n.s),0<n.N&&(n.L=new yle(Hn(n.La,n,n.g),n.N)),R$(n.S,n.g,"readystatechange",n.ib),e=n.H?w$(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),wf(),function _le(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function G$(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function z$(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Cle(n,t),i==D_){4==e&&(n.o=4,sr(14),r=!1),dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==dA){n.o=4,sr(15),dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}dc(n.j,n.m,i,null),fA(n,i)}G$(n)&&i!=D_&&i!=dA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,sr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),bA(e),e.K=!0,sr(11))):(dc(n.j,n.m,t,"[Invalid Chunked Response]"),iu(n),Df(n))}function Cle(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?D_:(t=Number(e.substring(t,r)),isNaN(t)?dA:(r+=1)+t>e.length?D_:(e=e.substr(r,t),n.C=r+t,e))}function Ef(n){n.V=Date.now()+n.O,W$(n,n.O)}function W$(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bf(Hn(n.gb,n),e)}function T_(n){n.B&&(ue.clearTimeout(n.B),n.B=null)}function Df(n){0==n.l.G||n.I||vj(n.l,n)}function iu(n){T_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,sA(n.T),P$(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function fA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pA(t.h,n)))if(!n.J&&pA(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;O_(t),R_(t)}wA(t),sr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=bf(Hn(t.cb,t),6e3));if(1>=nj(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ou(t,11)}else if((n.J||t.g==n)&&O_(t),!p_(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(t.T=l[0],l=l[1],2==t.G)if("c"==l[0]){t.I=l[1],t.ka=l[2];const c=l[3];null!=c&&(t.ma=c,t.j.info("VER="+t.ma));const d=l[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const p=l[5];null!=p&&"number"==typeof p&&0<p&&(t.J=r=1.5*p,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const g=n.g;if(g){const y=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.h;s.g||-1==y.indexOf("spdy")&&-1==y.indexOf("quic")&&-1==y.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(gA(s,s.h),s.h=null))}if(r.D){const w=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.za=w,dt(r.F,r.D,w))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((r=t).sa=Ij(r,r.H?r.ka:null,r.V),o.J){rj(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(T_(a),Ef(a)),r.g=o}else yj(r);0<t.i.length&&P_(t)}else"stop"!=l[0]&&"close"!=l[0]||ou(t,7);else 3==t.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ou(t,7):vA(t):"noop"!=l[0]&&t.l&&t.l.wa(l),t.A=0)}wf()}catch{}}function q$(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(h_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Dle(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(h_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ele(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(h_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(W=Cf.prototype).setTimeout=function(n){this.O=n},W.ib=function(n){n=n.target;const e=this.L;e&&3==Ws(n)?e.l():this.La(n)},W.La=function(n){try{if(n==this.g)e:{const c=Ws(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>c)&&(3!=c||jS||this.g&&(this.h.h||this.g.fa()||dj(this.g)))){this.I||4!=c||7==e||wf(),T_(this);var t=this.g.aa();this.Y=t;t:if(G$(this)){var r=dj(this.g);n="";var i=r.length,s=4==Ws(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){iu(this),Df(this);var o="";break t}this.h.i=new ue.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function vle(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,c,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p_(a)){var l=a;break t}}l=null}if(!(t=l)){this.i=!1,this.o=3,sr(12),iu(this),Df(this);break e}dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fA(this,t)}this.P?(z$(this,c,o),jS&&this.i&&3==c&&(R$(this.S,this.T,"tick",this.hb),this.T.start())):(dc(this.j,this.m,o,null),fA(this,o)),4==c&&iu(this),this.i&&!this.I&&(4==c?vj(this.l,this):(this.i=!1,Ef(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,sr(12)):(this.o=0,sr(13)),iu(this),Df(this)}}}catch{}},W.hb=function(){if(this.g){var n=Ws(this.g),e=this.g.fa();this.C<e.length&&(T_(this),z$(this,n,e),this.i&&4!=n&&Ef(this))}},W.cancel=function(){this.I=!0,iu(this)},W.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function wle(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(wf(),sr(17)),iu(this),this.o=2,Df(this)):W$(this,this.V-n)};var K$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function su(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof su){this.h=void 0!==e?e:n.h,S_(this,n.j),this.s=n.s,this.g=n.g,A_(this,n.m),this.l=n.l,e=n.i;var t=new Af;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Q$(this,t),this.o=n.o}else n&&(t=String(n).match(K$))?(this.h=!!e,S_(this,t[1]||"",!0),this.s=Tf(t[2]||""),this.g=Tf(t[3]||"",!0),A_(this,t[4]),this.l=Tf(t[5]||"",!0),Q$(this,t[6]||"",!0),this.o=Tf(t[7]||"")):(this.h=!!e,this.i=new Af(null,this.h))}function zs(n){return new su(n)}function S_(n,e,t){n.j=t?Tf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function A_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Q$(n,e,t){e instanceof Af?(n.i=e,function Nle(n,e){e&&!n.j&&(Eo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(X$(this,r),J$(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Sf(e,kle)),n.i=new Af(e,n.h))}function dt(n,e,t){n.i.set(e,t)}function x_(n){return dt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Tf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sle),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sle(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}su.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sf(e,Y$,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sf(e,Y$,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sf(t,"/"==t.charAt(0)?xle:Ale,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sf(t,Mle)),n.join("")};var Y$=/[#\/\?@]/g,Ale=/[#\?:]/g,xle=/[#\?]/g,kle=/[#\?@]/g,Mle=/#/g;function Af(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eo(n){n.g||(n.g=new Map,n.h=0,n.i&&function Tle(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function X$(n,e){Eo(n),e=hc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Z$(n,e){return Eo(n),e=hc(n,e),n.g.has(e)}function J$(n,e,t){X$(n,e),0<t.length&&(n.i=null,n.g.set(hc(n,e),US(t)),n.h+=t.length)}function hc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ej(n){this.l=n||Ple,n=ue.PerformanceNavigationTiming?0<(n=ue.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ue.g&&ue.g.Ga&&ue.g.Ga()&&ue.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=Af.prototype).add=function(n,e){Eo(this),this.i=null,n=hc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},W.forEach=function(n,e){Eo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},W.oa=function(){Eo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},W.W=function(n){Eo(this);let e=[];if("string"==typeof n)Z$(this,n)&&(e=e.concat(this.g.get(hc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},W.set=function(n,e){return Eo(this),this.i=null,Z$(this,n=hc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},W.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Ple=10;function tj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nj(n){return n.h?1:n.g?n.g.size:0}function pA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gA(n,e){n.g?n.g.add(e):n.h=e}function rj(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ij(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return US(n.i)}function mA(){}function Ole(){this.g=new mA}function Fle(n,e,t){const r=t||"";try{q$(n,function(i,s){let o=i;mf(i)&&(o=nA(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function k_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xf(n){this.l=n.ac||null,this.j=n.jb||!1}function M_(n,e){an.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=yA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ej.prototype.cancel=function(){if(this.i=ij(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mA.prototype.stringify=function(n){return ue.JSON.stringify(n,void 0)},mA.prototype.parse=function(n){return ue.JSON.parse(n,void 0)},kn(xf,aA),xf.prototype.g=function(){return new M_(this.l,this.j)},xf.prototype.i=function(n){return function(){return n}}({}),kn(M_,an);var yA=0;function sj(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function kf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Mf(n)}function Mf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(W=M_.prototype).open=function(n,e){if(this.readyState!=yA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Mf(this)},W.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ue).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kf(this)),this.readyState=yA},W.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Mf(this)),this.g&&(this.readyState=3,Mf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ue.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sj(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},W.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kf(this):Mf(this),3==this.readyState&&sj(this)}},W.Va=function(n){this.g&&(this.response=this.responseText=n,kf(this))},W.Ua=function(n){this.g&&(this.response=n,kf(this))},W.ga=function(){this.g&&kf(this)},W.setRequestHeader=function(n,e){this.v.append(n,e)},W.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(M_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Vle=ue.JSON.parse;function Dt(n){an.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oj,this.K=this.L=!1}kn(Dt,an);var oj="",Ule=/^https?$/i,Ble=["POST","PUT"];function aj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uj(n),N_(n)}function uj(n){n.D||(n.D=!0,Mn(n,"complete"),Mn(n,"error"))}function lj(n){if(n.h&&typeof LS<"u"&&(!n.C[1]||4!=Ws(n)||2!=n.aa()))if(n.v&&4==Ws(n))oA(n.Ha,0,n);else if(Mn(n,"readystatechange"),4==Ws(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.H).match(K$)[1]||null;if(!i&&ue.self&&ue.self.location){var s=ue.self.location.protocol;i=s.substr(0,s.length-1)}r=!Ule.test(i?i.toLowerCase():"")}t=r}if(t)Mn(n,"complete"),Mn(n,"success");else{n.m=6;try{var o=2<Ws(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",uj(n)}}finally{N_(n)}}}function N_(n,e){if(n.g){cj(n);const t=n.g,r=n.C[0]?d_:null;n.g=null,n.C=null,e||Mn(n,"ready");try{t.onreadystatechange=r}catch{}}}function cj(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ue.clearTimeout(n.A),n.A=null)}function Ws(n){return n.g?n.g.readyState:0}function dj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case oj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hj(n){let e="";return qS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function _A(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dt(n,e,t))}function Nf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fj(n){this.Ca=0,this.i=[],this.j=new b_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Nf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Nf("baseRetryDelayMs",5e3,n),this.bb=Nf("retryDelaySeedMs",1e4,n),this.$a=Nf("forwardChannelMaxRetries",2,n),this.ta=Nf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ej(n&&n.concurrentRequestLimit),this.Fa=new Ole,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function vA(n){if(pj(n),3==n.G){var e=n.U++,t=zs(n.F);dt(t,"SID",n.I),dt(t,"RID",e),dt(t,"TYPE","terminate"),Rf(n,t),(e=new Cf(n,n.j,e,void 0)).K=2,e.v=x_(zs(t)),t=!1,ue.navigator&&ue.navigator.sendBeacon&&(t=ue.navigator.sendBeacon(e.v.toString(),"")),!t&&ue.Image&&((new Image).src=e.v,t=!0),t||(e.g=Cj(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ef(e)}bj(n)}function R_(n){n.g&&(bA(n),n.g.cancel(),n.g=null)}function pj(n){R_(n),n.u&&(ue.clearTimeout(n.u),n.u=null),O_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&ue.clearTimeout(n.m),n.m=null)}function P_(n){tj(n.h)||n.m||(n.m=!0,x$(n.Ja,n),n.C=0)}function gj(n,e){var t;t=e?e.m:n.U++;const r=zs(n.F);dt(r,"SID",n.I),dt(r,"RID",t),dt(r,"AID",n.T),Rf(n,r),n.o&&n.s&&_A(r,n.o,n.s),t=new Cf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=mj(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),gA(n.h,t),hA(t,r,e)}function Rf(n,e){n.ia&&qS(n.ia,function(t,r){dt(e,r,t)}),n.l&&q$({},function(t,r){dt(e,r,t)})}function mj(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Hn(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<t;u++){let l=i[u].h;const c=i[u].g;if(l-=s,0>l)s=Math.max(0,i[u].h-100),a=!1;else try{Fle(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function yj(n){n.g||n.u||(n.Z=1,x$(n.Ia,n),n.A=0)}function wA(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=bf(Hn(n.Ia,n),wj(n,n.A)),n.A++,0))}function bA(n){null!=n.B&&(ue.clearTimeout(n.B),n.B=null)}function _j(n){n.g=new Cf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=zs(n.sa);dt(e,"RID","rpc"),dt(e,"SID",n.I),dt(e,"CI",n.L?"0":"1"),dt(e,"AID",n.T),dt(e,"TYPE","xmlhttp"),Rf(n,e),n.o&&n.s&&_A(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=x_(zs(e)),t.s=null,t.P=!0,H$(t,n)}function O_(n){null!=n.v&&(ue.clearTimeout(n.v),n.v=null)}function vj(n,e){var t=null;if(n.g==e){O_(n),bA(n),n.g=null;var r=2}else{if(!pA(n.h,e))return;t=e.D,rj(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Mn(r=I_(),new V$(r,t)),P_(n)}else yj(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function jle(n,e){return!(nj(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=bf(Hn(n.Ja,n,e),wj(n,n.C)),n.C++,0)))}(n,e)||2==r&&wA(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ou(n,5);break;case 4:ou(n,10);break;case 3:ou(n,6);break;default:ou(n,2)}}function wj(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ou(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Hn(n.kb,n);t||(t=new su("//www.google.com/images/cleardot.gif"),ue.location&&"http"==ue.location.protocol||S_(t,"https"),x_(t)),function Lle(n,e){const t=new b_;if(ue.Image){const r=new Image;r.onload=f_(k_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=f_(k_,t,r,"TestLoadImage: error",!1,e),r.onabort=f_(k_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=f_(k_,t,r,"TestLoadImage: timeout",!1,e),ue.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else sr(2);n.G=0,n.l&&n.l.va(e),bj(n),pj(n)}function bj(n){if(n.G=0,n.la=[],n.l){const e=ij(n.h);(0!=e.length||0!=n.i.length)&&(p$(n.la,e),p$(n.la,n.i),n.h.i.length=0,US(n.i),n.i.length=0),n.l.ua()}}function Ij(n,e,t){var r=t instanceof su?zs(t):new su(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),A_(r,r.m);else{var i=ue.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new su(null,void 0);r&&S_(s,r),e&&(s.g=e),i&&A_(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&dt(r,t,e),dt(r,"VER",n.ma),Rf(n,r),r}function Cj(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dt(t&&n.Da&&!n.ra?new xf({jb:!0}):n.ra)).Ka(n.H),e}function Ej(){}function F_(){if(cc&&!(10<=Number(sle)))throw Error("Environmental error: no available transport.")}function Br(n,e){an.call(this),this.g=new fj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!p_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fc(this)}function Dj(n){uA.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Tj(){lA.call(this),this.status=1}function fc(n){this.g=n}(W=Dt.prototype).Ka=function(n){this.L=n},W.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cA.g(),this.C=function B$(n){return n.h||(n.h=n.i())}(this.u?this.u:cA),this.g.onreadystatechange=Hn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void aj(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ue.FormData&&n instanceof ue.FormData,!(0<=f$(Ble,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cj(this),0<this.B&&((this.K=function $le(n){return cc&&function ile(){return function ele(n){var e=rle;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=g$(String(m_)).split("."),t=g$("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=BS(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||BS(0==i[2].length,0==s[2].length)||BS(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.qa,this)):this.A=oA(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){aj(this,s)}},W.qa=function(){typeof LS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mn(this,"timeout"),this.abort(8))},W.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mn(this,"complete"),Mn(this,"abort"),N_(this))},W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),N_(this,!0)),Dt.X.M.call(this)},W.Ha=function(){this.s||(this.F||this.v||this.l?lj(this):this.fb())},W.fb=function(){lj(this)},W.aa=function(){try{return 2<Ws(this)?this.g.status:-1}catch{return-1}},W.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},W.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Vle(e)}},W.Ea=function(){return this.m},W.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=fj.prototype).ma=8,W.G=1,W.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Cf(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=w$(s),I$(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mj(this,i,e),dt(t=zs(this.F),"RID",n),dt(t,"CVER",22),this.D&&dt(t,"X-HTTP-Session-Id",this.D),Rf(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(hj(s)))+"&"+e:this.o&&_A(t,this.o,s)),gA(this.h,i),this.Ya&&dt(t,"TYPE","init"),this.O?(dt(t,"$req",e),dt(t,"SID","null"),i.Z=!0,hA(i,t,null)):hA(i,t,e),this.G=2}}else 3==this.G&&(n?gj(this,n):0==this.i.length||tj(this.h)||gj(this))},W.Ia=function(){if(this.u=null,_j(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=bf(Hn(this.eb,this),n)}},W.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,sr(10),R_(this),_j(this))},W.cb=function(){null!=this.v&&(this.v=null,R_(this),wA(this),sr(19))},W.kb=function(n){n?(this.j.info("Successfully pinged google.com"),sr(2)):(this.j.info("Failed to ping google.com"),sr(1))},(W=Ej.prototype).xa=function(){},W.wa=function(){},W.va=function(){},W.ua=function(){},W.Ra=function(){},F_.prototype.g=function(n,e){return new Br(n,e)},kn(Br,an),Br.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;sr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Ij(n,null,n.V),P_(n)},Br.prototype.close=function(){vA(this.g)},Br.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nA(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&P_(e)},Br.prototype.M=function(){this.g.l=null,delete this.j,vA(this.g),delete this.g,Br.X.M.call(this)},kn(Dj,uA),kn(Tj,lA),kn(fc,Ej),fc.prototype.xa=function(){Mn(this.g,"a")},fc.prototype.wa=function(n){Mn(this.g,new Dj(n))},fc.prototype.va=function(n){Mn(this.g,new Tj)},fc.prototype.ua=function(){Mn(this.g,"b")},F_.prototype.createWebChannel=F_.prototype.g,Br.prototype.send=Br.prototype.u,Br.prototype.open=Br.prototype.m,Br.prototype.close=Br.prototype.close,C_.NO_ERROR=0,C_.TIMEOUT=8,C_.HTTP_ERROR=6,U$.COMPLETE="complete",$$.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",an.prototype.listen=an.prototype.N,Dt.prototype.listenOnce=Dt.prototype.O,Dt.prototype.getLastError=Dt.prototype.Oa,Dt.prototype.getLastErrorCode=Dt.prototype.Ea,Dt.prototype.getStatus=Dt.prototype.aa,Dt.prototype.getResponseJson=Dt.prototype.Sa,Dt.prototype.getResponseText=Dt.prototype.fa,Dt.prototype.send=Dt.prototype.da,Dt.prototype.setWithCredentials=Dt.prototype.Ka;var Hle=Gs.createWebChannelTransport=function(){return new F_},Gle=Gs.getStatEventTarget=function(){return I_()},IA=Gs.ErrorCode=C_,zle=Gs.EventType=U$,Wle=Gs.Event=ru,Sj=Gs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},qle=Gs.FetchXmlHttpFactory=xf,L_=Gs.WebChannel=$$,Kle=Gs.XhrIo=Dt;const Aj="@firebase/firestore";class un{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let pc="9.16.0";const Do=new ja("@firebase/firestore");function CA(){return Do.logLevel}function P(n,...e){if(Do.logLevel<=Me.DEBUG){const t=e.map(EA);Do.debug(`Firestore (${pc}): ${n}`,...t)}}function kt(n,...e){if(Do.logLevel<=Me.ERROR){const t=e.map(EA);Do.error(`Firestore (${pc}): ${n}`,...t)}}function gc(n,...e){if(Do.logLevel<=Me.WARN){const t=e.map(EA);Do.warn(`Firestore (${pc}): ${n}`,...t)}}function EA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function G(n="Unexpected state"){const e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+n;throw kt(e),new Error(e)}function z(n,e){n||G()}function U(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class R extends ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(un.UNAUTHENTICATED))}shutdown(){}}class Yle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xle{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(v(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xt)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z("string"==typeof r.accessToken),new xj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return z(null===e||"string"==typeof e),new un(e)}}class Zle{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(z(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Jle{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Zle(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ece{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z("string"==typeof t.token),this.A=t.token,new kj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function tce(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Mj{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tce(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function le(n,e){return n<e?-1:n>e?1:0}function mc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new R(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new R(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new R(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new vt(0,0))}static max(){return new Y(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pf{constructor(e,t,r){void 0===t?t=0:t>e.length&&G(),void 0===r?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Oe extends Pf{construct(e,t,r){return new Oe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new R(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Oe(t)}static emptyPath(){return new Oe([])}}const nce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Pf{construct(e,t,r){return new Mt(e,t,r)}static isValidIdentifier(e){return nce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new R(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new R(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new R(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new R(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}class L{constructor(e){this.path=e}static fromPath(e){return new L(Oe.fromString(e))}static fromName(e){return new L(Oe.fromString(e).popFirst(5))}static empty(){return new L(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Oe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Oe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new L(new Oe(e.slice()))}}function Pj(n){return new $r(n.readTime,n.key,-1)}class $r{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $r(Y.min(),L.empty(),-1)}static max(){return new $r(Y.max(),L.empty(),-1)}}function TA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=L.comparator(n.documentKey,e.documentKey),0!==t?t:le(n.largestBatchId,e.largestBatchId))}const Oj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function To(n){return SA.apply(this,arguments)}function SA(){return SA=v(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==Oj)throw n;P("LocalStore","Unexpectedly lost primary lease")}),SA.apply(this,arguments)}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new C((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof C?t:C.resolve(t)}catch(t){return C.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):C.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):C.reject(t)}static resolve(e){return new C((t,r)=>{t(e)})}static reject(e){return new C((t,r)=>{r(e)})}static waitFor(e){return new C((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=C.resolve(!1);for(const r of e)t=t.next(i=>i?C.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new C((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,t){return new C((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function So(n){return"IndexedDbTransactionError"===n.name}let jr=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class cce{constructor(e,t,r,i,s,o,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}function Lj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lf(n){return null==n}function Vf(n){return 0===n&&1/n==-1/0}class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zt(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const dce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(n){if(z(!!n),"string"==typeof n){let e=0;const t=dce.exec(n);if(z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function du(n){return"string"==typeof n?Zt.fromBase64String(n):Zt.fromUint8Array(n)}function xA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Bj(n){const e=n.mapValue.fields.__previous_value__;return xA(e)?Bj(e):e}function Uf(n){const e=Ao(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}const xo_mapValue={fields:{__type__:{stringValue:"__max__"}}};function hu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xA(n)?4:Gj(n)?9007199254740991:10:G()}function Xi(n,e){if(n===e)return!0;const t=hu(n);if(t!==hu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uf(n).isEqual(Uf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ao(r.timestampValue),o=Ao(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,du(n.bytesValue).isEqual(du(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Tt(r.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tt(r.integerValue)===Tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Tt(r.doubleValue),o=Tt(i.doubleValue);return s===o?Vf(s)===Vf(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return mc(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Lj(s)!==Lj(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Xi(s[a],o[a])))return!1;return!0}(n,e);default:return G()}var i}function Bf(n,e){return void 0!==(n.values||[]).find(t=>Xi(t,e))}function ko(n,e){if(n===e)return 0;const t=hu(n),r=hu(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Tt(i.integerValue||i.doubleValue),a=Tt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return $j(n.timestampValue,e.timestampValue);case 4:return $j(Uf(n),Uf(e));case 5:return le(n.stringValue,e.stringValue);case 6:return function(i,s){const o=du(i),a=du(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const l=le(o[u],a[u]);if(0!==l)return l}return le(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=le(Tt(i.latitude),Tt(s.latitude));return 0!==o?o:le(Tt(i.longitude),Tt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const l=ko(o[u],a[u]);if(l)return l}return le(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===xo_mapValue&&s===xo_mapValue)return 0;if(i===xo_mapValue)return 1;if(s===xo_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},l=Object.keys(u);a.sort(),l.sort();for(let c=0;c<a.length&&c<l.length;++c){const d=le(a[c],l[c]);if(0!==d)return d;const p=ko(o[a[c]],u[l[c]]);if(0!==p)return p}return le(a.length,l.length)}(n.mapValue,e.mapValue);default:throw G()}}function $j(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return le(n,e);const t=Ao(n),r=Ao(e),i=le(t.seconds,r.seconds);return 0!==i?i:le(t.nanos,r.nanos)}function yc(n){return kA(n)}function kA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ao(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?du(n.bytesValue).toBase64():"referenceValue"in n?L.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=kA(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${kA(r.fields[a])}`;return s+"}"}(n.mapValue):G();var e}function MA(n){return!!n&&"integerValue"in n}function $f(n){return!!n&&"arrayValue"in n}function jj(n){return!!n&&"nullValue"in n}function Hj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function j_(n){return!!n&&"mapValue"in n}function jf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Gj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Mo{constructor(e,t){this.position=e,this.inclusive=t}}function qj(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?L.comparator(L.fromName(o.referenceValue),t.key):ko(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Kj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xi(n.position[t],e.position[t]))return!1;return!0}class Qj{}class Ae extends Qj{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new pce(e,t,r):"array-contains"===t?new yce(e,r):"in"===t?new tH(e,r):"not-in"===t?new _ce(e,r):"array-contains-any"===t?new vce(e,r):new Ae(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new gce(e,r):new mce(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ko(t,this.value)):null!==t&&hu(this.value)===hu(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class We extends Qj{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new We(e,t)}matches(e){return _c(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function _c(n){return"and"===n.op}function RA(n){return function Yj(n){for(const e of n.filters)if(e instanceof We)return!1;return!0}(n)&&_c(n)}function PA(n){if(n instanceof Ae)return n.field.canonicalString()+n.op.toString()+yc(n.value);if(RA(n))return n.filters.map(e=>PA(e)).join(",");{const e=n.filters.map(t=>PA(t)).join(",");return`${n.op}(${e})`}}function Xj(n,e){return n instanceof Ae?(t=n,(r=e)instanceof Ae&&t.op===r.op&&t.field.isEqual(r.field)&&Xi(t.value,r.value)):n instanceof We?function(t,r){return r instanceof We&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&Xj(s,r.filters[o]),!0)}(n,e):void G();var t,r}function Jj(n){return n instanceof Ae?`${(e=n).field.canonicalString()} ${e.op} ${yc(e.value)}`:n instanceof We?function(e){return e.op.toString()+" {"+e.getFilters().map(Jj).join(" ,")+"}"}(n):"Filter";var e}class pce extends Ae{constructor(e,t,r){super(e,t,r),this.key=L.fromName(r.referenceValue)}matches(e){const t=L.comparator(e.key,this.key);return this.matchesComparison(t)}}class gce extends Ae{constructor(e,t){super(e,"in",t),this.keys=eH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mce extends Ae{constructor(e,t){super(e,"not-in",t),this.keys=eH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>L.fromName(r.referenceValue))}class yce extends Ae{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $f(t)&&Bf(t.arrayValue,this.value)}}class tH extends Ae{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bf(this.value.arrayValue,t)}}class _ce extends Ae{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bf(this.value.arrayValue,t)}}class vce extends Ae{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bf(this.value.arrayValue,r))}}class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function wce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class St{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new H_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new H_(this.root,e,this.comparator,!1)}getReverseIterator(){return new H_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new H_(this.root,e,this.comparator,!0)}}class H_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=i??Nn.EMPTY,this.right=s??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Nn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Nn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1,Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Nn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xe{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nH(this.data.getIterator())}getIteratorFrom(e){return new nH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class nH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class br{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new br([])}unionWith(e){let t=new Xe(Mt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!j_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jf(t)}setAll(e){let t=Mt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=jf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());j_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];j_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rn(jf(this.value))}}function rH(n){const e=[];return cu(n.fields,(t,r)=>{const i=new Mt([t]);if(j_(r)){const s=rH(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new br(e)}class at{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new at(e,0,Y.min(),Y.min(),Y.min(),Rn.empty(),0)}static newFoundDocument(e,t,r,i){return new at(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new at(e,2,t,Y.min(),Y.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,Y.min(),Y.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bce{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function OA(n,e=null,t=[],r=[],i=null,s=null,o=null){return new bce(n,e,t,r,i,s,o)}function pu(n){const e=U(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>PA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yc(r)).join(",")),e.ft=t}return e.ft}function Hf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kj(n.startAt,e.startAt)&&Kj(n.endAt,e.endAt)}function G_(n){return L.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class qs{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.dt=null,this._t=null}}function bc(n){return new qs(n)}function aH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function gu(n){const e=U(n);if(null===e.dt){e.dt=[];const t=function W_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function FA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new vc(t)),e.dt.push(new vc(Mt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new vc(Mt.keyField(),s))}}}return e.dt}function or(n){const e=U(n);if(!e._t)if("F"===e.limitType)e._t=OA(e.path,e.collectionGroup,gu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of gu(e))t.push(new vc(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Mo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Mo(e.startAt.position,e.startAt.inclusive):null;e._t=OA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function q_(n,e,t){return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gf(n,e){return Hf(or(n),or(e))&&n.limitType===e.limitType}function uH(n){return`${pu(or(n))}|lt:${n.limitType}`}function UA(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Jj(r)).join(", ")}]`),Lf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yc(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yc(r)).join(",")),`Target(${t})`}(or(n))}; limitType=${n.limitType})`}function BA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):L.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of gu(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=qj(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,gu(t),r)||t.endAt&&!function(i,s,o){const a=qj(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,gu(t),r)));var t,r}function cH(n){return(e,t)=>{let r=!1;for(const i of gu(n)){const s=Ice(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Ice(n,e,t){const r=n.field.isKeyField()?L.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?ko(a,u):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}function dH(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vf(e)?"-0":e}}function hH(n){return{integerValue:""+n}}function fH(n,e){return function Uj(n){return"number"==typeof n&&Number.isInteger(n)&&!Vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?hH(e):dH(n,e)}class K_{constructor(){this._=void 0}}function Cce(n,e,t){return n instanceof Ic?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof mu?gH(n,e):n instanceof yu?mH(n,e):function(r,i){const s=pH(r,i),o=yH(s)+yH(r.gt);return MA(s)&&MA(r.gt)?hH(o):dH(r.yt,o)}(n,e)}function Ece(n,e,t){return n instanceof mu?gH(n,e):n instanceof yu?mH(n,e):t}function pH(n,e){return n instanceof Cc?MA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ic extends K_{}class mu extends K_{constructor(e){super(),this.elements=e}}function gH(n,e){const t=_H(e);for(const r of n.elements)t.some(i=>Xi(i,r))||t.push(r);return{arrayValue:{values:t}}}class yu extends K_{constructor(e){super(),this.elements=e}}function mH(n,e){let t=_H(e);for(const r of n.elements)t=t.filter(i=>!Xi(i,r));return{arrayValue:{values:t}}}class Cc extends K_{constructor(e,t){super(),this.yt=e,this.gt=t}}function yH(n){return Tt(n.integerValue||n.doubleValue)}function _H(n){return $f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tce{constructor(e,t){this.version=e,this.transformResults=t}}class ht{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ht}static exists(e){return new ht(void 0,e)}static updateTime(e){return new ht(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Q_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Y_{}function vH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dc(n.key,ht.none()):new Ec(n.key,n.data,ht.none());{const t=n.data,r=Rn.empty();let i=new Xe(Mt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ks(n.key,r,new br(i.toArray()),ht.none())}}function Sce(n,e,t){n instanceof Ec?function(r,i,s){const o=r.value.clone(),a=IH(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Ks?function(r,i,s){if(!Q_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=IH(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(bH(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wf(n,e,t,r){return n instanceof Ec?function(i,s,o,a){if(!Q_(i.precondition,s))return o;const u=i.value.clone(),l=CH(i.fieldTransforms,a,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ks?function(i,s,o,a){if(!Q_(i.precondition,s))return o;const u=CH(i.fieldTransforms,a,s),l=s.data;return l.setAll(bH(i)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(n,e,t,r):(o=t,Q_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Ace(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=pH(r.transform,i||null);null!=s&&(null===t&&(t=Rn.empty()),t.set(r.field,s))}return t||null}function wH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mc(t,r,(i,s)=>function Dce(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mu&&r instanceof mu||t instanceof yu&&r instanceof yu?mc(t.elements,r.elements,Xi):t instanceof Cc&&r instanceof Cc?Xi(t.gt,r.gt):t instanceof Ic&&r instanceof Ic);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ec extends Y_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ks extends Y_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IH(n,e,t){const r=new Map;z(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ece(o,a,t[i]))}return r}function CH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Cce(s,o,e))}return r}class Dc extends Y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $A extends Y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xce{constructor(e){this.count=e}}var $t,Fe;function EH(n){switch(n){default:return G();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function DH(n){if(void 0===n)return kt("GRPC error has no .code"),E.UNKNOWN;switch(n){case $t.OK:return E.OK;case $t.CANCELLED:return E.CANCELLED;case $t.UNKNOWN:return E.UNKNOWN;case $t.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case $t.INTERNAL:return E.INTERNAL;case $t.UNAVAILABLE:return E.UNAVAILABLE;case $t.UNAUTHENTICATED:return E.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case $t.NOT_FOUND:return E.NOT_FOUND;case $t.ALREADY_EXISTS:return E.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return E.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case $t.ABORTED:return E.ABORTED;case $t.OUT_OF_RANGE:return E.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return E.UNIMPLEMENTED;case $t.DATA_LOSS:return E.DATA_LOSS;default:return G()}}(Fe=$t||($t={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";class No{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Vj(this.inner)}size(){return this.innerSize}}const kce=new St(L.comparator);function Ir(){return kce}const TH=new St(L.comparator);function qf(...n){let e=TH;for(const t of n)e=e.insert(t.key,t);return e}function SH(n){let e=TH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zi(){return Kf()}function AH(){return Kf()}function Kf(){return new No(n=>n.toString(),(n,e)=>n.isEqual(e))}const Mce=new St(L.comparator),Nce=new Xe(L.comparator);function _e(...n){let e=Nce;for(const t of n)e=e.add(t);return e}const Rce=new Xe(le);function X_(){return Rce}class Qf{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Yf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qf(Y.min(),i,X_(),Ir(),_e())}}class Yf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Yf(r,t,_e(),_e(),_e())}}class Z_{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class xH{constructor(e,t){this.targetId=e,this.Et=t}}class kH{constructor(e,t,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class MH{constructor(){this.At=0,this.Rt=RH(),this.bt=Zt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=_e(),t=_e(),r=_e();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new Yf(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=RH()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Pce{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ir(),this.qt=NH(),this.Ut=new Xe(le)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(G_(s))if(0===r){const o=new L(s.path);this.Qt(t,o,at.newNoDocument(o,Y.min()))}else z(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&G_(a.target)){const u=new L(a.target.path);null!==this.Lt.get(u)||this.te(o,u)||this.Qt(o,u,at.newNoDocument(u,e))}s.St&&(t.set(o,s.Ct()),s.xt())}});let r=_e();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Yt(u);return!l||2===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new Qf(e,t,this.Ut,this.Lt,r);return this.Lt=Ir(),this.qt=NH(),this.Ut=new Xe(le),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new MH,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Xe(le),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||P("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new MH),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function NH(){return new St(L.comparator)}function RH(){return new St(L.comparator)}const Oce={asc:"ASCENDING",desc:"DESCENDING"},Fce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lce={and:"AND",or:"OR"};class Vce{constructor(e,t){this.databaseId=e,this.wt=t}}function Tc(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PH(n,e){return n.wt?e.toBase64():e.toUint8Array()}function Uce(n,e){return Tc(n,e.toTimestamp())}function Nt(n){return z(!!n),Y.fromTimestamp(function(e){const t=Ao(e);return new vt(t.seconds,t.nanos)}(n))}function jA(n,e){return(t=n,new Oe(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function OH(n){const e=Oe.fromString(n);return z(GH(e)),e}function Xf(n,e){return jA(n.databaseId,e.path)}function Ji(n,e){const t=OH(e);if(t.get(1)!==n.databaseId.projectId)throw new R(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new R(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new L(LH(t))}function HA(n,e){return jA(n.databaseId,e)}function Zf(n){return new Oe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LH(n){return z(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VH(n,e,t){return{name:Xf(n,e),fields:t.value.mapValue.fields}}function BH(n,e){return{documents:[HA(n,e.path)]}}function zA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=HA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=HA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return HH(We.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Sc((c=l).field),direction:Gce(c.dir)};var c})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(l=e.limit,n.wt||Lf(l)?l:{value:l});var l,a,u;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),t}function $H(n){let e=function FH(n){const e=OH(n);return 4===e.length?Oe.emptyPath():LH(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){z(1===r);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(c){const d=jH(c);return d instanceof We&&RA(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(c=>{return new vc(Ac((d=c).field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(c){let d;return d="object"==typeof c?c.value:c,Lf(d)?null:d}(t.limit));let u=null;var c;t.startAt&&(u=new Mo((c=t.startAt).values||[],!!c.before));let l=null;return t.endAt&&(l=function(c){return new Mo(c.values||[],!c.before)}(t.endAt)),function oH(n,e,t,r,i,s,o,a){return new qs(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",u,l)}function jH(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ac(e.unaryFilter.field);return Ae.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ac(e.unaryFilter.field);return Ae.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ac(e.unaryFilter.field);return Ae.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ac(e.unaryFilter.field);return Ae.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):void 0!==n.fieldFilter?Ae.create(Ac((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return We.create(e.compositeFilter.filters.map(t=>jH(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return G()}}(e.compositeFilter.op))}(n):G();var e}function Gce(n){return Oce[n]}function zce(n){return Fce[n]}function Wce(n){return Lce[n]}function Sc(n){return{fieldPath:n.canonicalString()}}function Ac(n){return Mt.fromServerFormat(n.fieldPath)}function HH(n){return n instanceof Ae?function(e){if("=="===e.op){if(Hj(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NAN"}};if(jj(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hj(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NOT_NAN"}};if(jj(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sc(e.field),op:zce(e.op),value:e.value}}}(n):n instanceof We?function(e){const t=e.getFilters().map(r=>HH(r));return 1===t.length?t[0]:{compositeFilter:{op:Wce(e.op),filters:t}}}(n):G()}function qce(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class qA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Sce(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=AH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=vH(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,(t,r)=>wH(t,r))&&mc(this.baseMutations,e.baseMutations,(t,r)=>wH(t,r))}}class KA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){z(e.mutations.length===r.length);let i=Mce;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new KA(e,t,r,i)}}class QA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ro{constructor(e,t,r,i,s=Y.min(),o=Y.min(),a=Zt.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class XH{constructor(e){this.ie=e}}function YA(n){const e=$H({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?q_(e,e.limit,"L"):e}class bu{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Tt(e.integerValue));else if("doubleValue"in e){const r=Tt(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Vf(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(du(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?Gj(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):G()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),L.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}bu.Ie=new bu;class wde{constructor(){this.Je=new nx}addToCollectionParentIndex(e,t){return this.Je.add(t),C.resolve()}getCollectionParents(e,t){return C.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return C.resolve()}deleteFieldIndex(e,t){return C.resolve()}getDocumentsMatchingTarget(e,t){return C.resolve(null)}getIndexType(e,t){return C.resolve(0)}getFieldIndexes(e,t){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,t){return C.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return C.resolve($r.min())}updateCollectionGroup(e,t,r){return C.resolve()}updateIndexEntries(e,t){return C.resolve()}}class nx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Oe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Oe.comparator)).toArray()}}new Uint8Array(0);class Cr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(41943040,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);class Cu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Cu(0)}static vn(){return new Cu(-1)}}class Sde{constructor(){this.changes=new No(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?C.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kde{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bG{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Wf(r.mutation,i,br.empty(),vt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){const i=Zi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=qf();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Zi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ir();const o=Kf(),a=Kf();return t.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(void 0===c||c.mutation instanceof Ks)?s=s.insert(l.key,l):void 0!==c?(o.set(l.key,c.mutation.getFieldMask()),Wf(c.mutation,l,c.mutation.getFieldMask(),vt.now())):o.set(l.key,br.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),t.forEach((l,c)=>{var d;return a.set(l,new kde(c,null!==(d=o.get(l))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Kf();let i=new St((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let c=r.get(u)||br.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||_e()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=AH();c.forEach(p=>{if(!s.has(p)){const g=vH(t.get(p),r.get(p));null!==g&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return C.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return L.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function LA(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):C.resolve(Zi());let a=-1,u=s;return o.next(l=>C.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?C.resolve():this.remoteDocumentCache.getEntry(e,c).next(p=>{u=u.insert(c,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,_e())).next(c=>({batchId:a,changes:SH(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new L(t)).next(r=>{let i=qf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=qf();return this.indexManager.getCollectionParents(e,i).next(o=>C.forEach(o,a=>{const u=(l=t,c=a.child(i),new qs(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((a,u)=>{const l=u.getKey();null===i.get(l)&&(i=i.insert(l,at.newInvalidDocument(l)))});let o=qf();return i.forEach((a,u)=>{const l=s.get(a);void 0!==l&&Wf(l.mutation,u,br.empty(),vt.now()),BA(t,u)&&(o=o.insert(a,u))}),o})}}class Mde{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return C.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Nt(r.createTime)}),C.resolve()}getNamedQuery(e,t){return C.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:YA(r.bundledQuery),readTime:Nt(r.readTime)}),C.resolve();var r}}class Nde{constructor(){this.overlays=new St(L.comparator),this.es=new Map}getOverlay(e,t){return C.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zi();return C.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),C.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),C.resolve()}getOverlaysForCollection(e,t,r){const i=Zi(),s=t.length+1,o=new L(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return C.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new St((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let c=s.get(l.largestBatchId);null===c&&(c=Zi(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Zi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return C.resolve(a)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QA(t,r));let s=this.es.get(t);void 0===s&&(s=_e(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class rx{constructor(){this.ns=new Xe(cn.ss),this.rs=new Xe(cn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new cn(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new cn(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new L(new Oe([])),r=new cn(t,e),i=new cn(t,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new L(new Oe([])),r=new cn(t,e),i=new cn(t,e+1);let s=_e();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new cn(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class cn{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return L.comparator(e.key,t.key)||le(e._s,t._s)}static os(e,t){return le(e._s,t._s)||L.comparator(e.key,t.key)}}class Rde{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Xe(cn.ss)}checkEmpty(e){return C.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const o=new qA(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new cn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,t){return C.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return C.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new cn(t,0),i=new cn(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(le);return t.forEach(i=>{const s=new cn(i,0),o=new cn(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),C.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;L.isDocumentKey(s)||(s=s.child(""));const o=new cn(new L(s),0);let a=new Xe(le);return this.gs.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u._s)),!0)},o),C.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){z(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return C.forEach(t.mutations,i=>{const s=new cn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new cn(t,0),i=this.gs.firstAfterOrEqual(r);return C.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return C.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Pde{constructor(e){this.Es=e,this.docs=new St(L.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return C.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=Ir();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():at.newInvalidDocument(i))}),C.resolve(r)}getAllFromCollection(e,t,r){let i=Ir();const s=new L(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||TA(Pj(u),r)<=0||(i=i.insert(u.key,u.mutableCopy()))}return C.resolve(i)}getAllFromCollectionGroup(e,t,r,i){G()}As(e,t){return C.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ode(this)}getSize(e){return C.resolve(this.size)}}class Ode extends Sde{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),C.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Fde{constructor(e){this.persistence=e,this.Rs=new No(t=>pu(t),Hf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.bs=0,this.Ps=new rx,this.targetCount=0,this.vs=Cu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),C.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,C.resolve()}updateTargetData(e,t){return this.Dn(t),C.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),C.waitFor(s).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return C.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),C.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),C.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return C.resolve(r)}containsKey(e,t){return C.resolve(this.Ps.containsKey(t))}}class IG{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new jr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Fde(this),this.indexManager=new wde,this.remoteDocumentCache=new Pde(r=>this.referenceDelegate.xs(r)),this.yt=new XH(t),this.Ns=new Mde(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nde,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Rde(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);const i=new Lde(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return C.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Lde extends sce{constructor(e){super(),this.currentSequenceNumber=e}}class uv{constructor(e){this.persistence=e,this.Fs=new rx,this.$s=null}static Bs(e){return new uv(e)}get Ls(){if(this.$s)return this.$s;throw G()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),C.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),C.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Ls,r=>{const i=L.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,Y.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return C.or([()=>C.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class ax{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=_e(),i=_e();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ax(e,t.fromCache,r,i)}}class EG{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(aH(t))return C.resolve(null);let r=or(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=q_(t,null,"F"),r=or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Fi(t,a);return this.$i(t,l,o,u.readTime)?this.ki(e,q_(t,null,"F")):this.Bi(e,l,t,u)}))})))}Oi(e,t,r,i){return aH(t)||i.isEqual(Y.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,r,i)?this.Mi(e,t):(CA()<=Me.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),UA(t)),this.Bi(e,o,t,function Rj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(1e9===r?new vt(t+1,0):new vt(t,r));return new $r(i,L.empty(),e)}(i,-1)))})}Fi(e,t){let r=new Xe(cH(e));return t.forEach((i,s)=>{BA(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return CA()<=Me.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",UA(t)),this.Ni.getDocumentsMatchingQuery(e,t,$r.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Ude{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new St(le),this.Ui=new No(s=>pu(s),Hf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bG(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function TG(n,e){return ux.apply(this,arguments)}function ux(){return ux=v(function*(n,e){const t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=_e();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return t.localDocuments.getDocuments(r,u).next(l=>({ji:l,removedBatchIds:o,addedBatchIds:a}))})})}),ux.apply(this,arguments)}function Bde(n,e){const t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,l){const c=u.batch,d=c.keys();let p=C.resolve();return d.forEach(g=>{p=p.next(()=>l.getEntry(a,g)).next(y=>{const w=u.docVersions.get(g);z(null!==w),y.version.compareTo(w)<0&&(c.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=_e();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function SG(n){const e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $de(n,e){const t=U(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const a=[];e.targetChanges.forEach((c,d)=>{const p=i.get(d);if(!p)return;a.push(t.Cs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,c.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);var y,w,b;e.targetMismatches.has(d)?g=g.withResumeToken(Zt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,r)),i=i.insert(d,g),w=g,b=c,(0===(y=p).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0)&&a.push(t.Cs.updateTargetData(s,g))});let u=Ir(),l=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(function AG(n,e,t){let r=_e(),i=_e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ir();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Wi:o,zi:i}})}(s,o,e.documentUpdates).next(c=>{u=c.Wi,l=c.zi})),!r.isEqual(Y.min())){const c=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return C.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.qi=i,s))}function jde(n,e){const t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mc(n,e){const t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,C.resolve(i)):t.Cs.allocateTargetId(r).next(o=>(i=new Ro(e,o,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Nc(n,e,t){return lx.apply(this,arguments)}function lx(){return lx=v(function*(n,e,t){const r=U(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!So(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),lx.apply(this,arguments)}function cv(n,e,t){const r=U(n);let i=Y.min(),s=_e();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,l){const c=U(a),d=c.Ui.get(l);return void 0!==d?C.resolve(c.qi.get(d)):c.Cs.getTargetData(u,l)}(r,o,or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,t?i:Y.min(),t?s:_e())).next(a=>(function MG(n,e,t){let r=n.Ki.get(e)||Y.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}(r,function lH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,Hi:s})))}class px{constructor(){this.activeTargetIds=X_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PG{constructor(){this.Lr=new px,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new px,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zde{Ur(e){}shutdown(){}}class OG{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Wde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qde{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Kde extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const o=this.ho(e,t);P("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(u=>(P("RestConnection","Received: ",u),u),u=>{throw gc("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}_o(e,t,r,i,s,o){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${Wde[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,o)=>{const a=new Kle;a.setWithCredentials(!0),a.listenOnce(zle.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case IA.NO_ERROR:const l=a.getResponseJson();P("Connection","XHR received:",JSON.stringify(l)),s(l);break;case IA.TIMEOUT:P("Connection",'RPC "'+e+'" timed out'),o(new R(E.DEADLINE_EXCEEDED,"Request time out"));break;case IA.HTTP_ERROR:const c=a.getStatus();if(P("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d?.error;if(p&&p.status&&p.message){const g=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(w)>=0?w:E.UNKNOWN}(p.status);o(new R(g,p.message))}else o(new R(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new R(E.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{P("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(t,"POST",u,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Hle(),o=Gle(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new qle({})),this.lo(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;const u=i.join("");P("Connection","Creating WebChannel: "+u,a);const l=s.createWebChannel(u,a);let c=!1,d=!1;const p=new qde({Hr:y=>{d?P("Connection","Not sending because WebChannel is closed:",y):(c||(P("Connection","Opening WebChannel transport."),l.open(),c=!0),P("Connection","WebChannel sending:",y),l.send(y))},Jr:()=>l.close()}),g=(y,w,b)=>{y.listen(w,D=>{try{b(D)}catch(M){setTimeout(()=>{throw M},0)}})};return g(l,L_.EventType.OPEN,()=>{d||P("Connection","WebChannel transport opened.")}),g(l,L_.EventType.CLOSE,()=>{d||(d=!0,P("Connection","WebChannel transport closed"),p.io())}),g(l,L_.EventType.ERROR,y=>{d||(d=!0,gc("Connection","WebChannel transport errored:",y),p.io(new R(E.UNAVAILABLE,"The operation could not be completed")))}),g(l,L_.EventType.MESSAGE,y=>{var w;if(!d){const b=y.data[0];z(!!b);const M=b.error||(null===(w=b[0])||void 0===w?void 0:w.error);if(M){P("Connection","WebChannel received error:",M);const I=M.status;let $=function(X){const Pt=$t[X];if(void 0!==Pt)return DH(Pt)}(I),Q=M.message;void 0===$&&($=E.INTERNAL,Q="Unknown error status: "+I+" with message "+M.message),d=!0,p.io(new R($,Q)),l.close()}else P("Connection","WebChannel received:",b),p.ro(b)}}),g(o,Wle.STAT_EVENT,y=>{y.stat===Sj.PROXY?P("Connection","Detected buffering proxy"):y.stat===Sj.NOPROXY&&P("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.so()},0),p}}function fv(){return typeof document<"u"?document:null}function up(n){return new Vce(n,!0)}class mx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class LG{constructor(e,t,r,i,s,o,a,u){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new mx(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return v(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return v(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return v(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(kt(t.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new R(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro(v(function*(){e.state=0,e.start()}))}Qo(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qde extends LG{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function $ce(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:G(),i=e.targetChange.targetIds||[],s=function(u,l){return u.wt?(z(void 0===l||"string"==typeof l),Zt.fromBase64String(l||"")):(z(void 0===l||l instanceof Uint8Array),Zt.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=void 0===u.code?E.UNKNOWN:DH(u.code);return new R(l,u.message||"")}(o);t=new kH(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ji(n,r.document.name),s=Nt(r.document.updateTime),o=r.document.createTime?Nt(r.document.createTime):Y.min(),a=new Rn({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,s,o,a);t=new Z_(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ji(n,r.document),s=r.readTime?Nt(r.readTime):Y.min(),o=at.newNoDocument(i,s);t=new Z_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ji(n,r.document);t=new Z_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return G();{const r=e.filter,s=new xce(r.count||0);t=new xH(r.targetId,s)}}var u;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Y.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?Nt(s.readTime):Y.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Zf(this.yt),t.addTarget=function(i,s){let o;const a=s.target;return o=G_(a)?{documents:BH(i,a)}:{query:zA(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=PH(i,s.resumeToken):s.snapshotVersion.compareTo(Y.min())>0&&(o.readTime=Tc(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=function Hce(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return G()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Zf(this.yt),t.removeTarget=e,this.Bo(t)}}class Yde extends LG{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function jce(n,e){return n&&n.length>0?(z(void 0!==e),n.map(t=>function(r,i){let s=Nt(r.updateTime?r.updateTime:i);return s.isEqual(Y.min())&&(s=Nt(i)),new Tce(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nt(e.commitTime);return this.listener.Zo(r,t)}return z(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Zf(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function Jf(n,e){let t;if(e instanceof Ec)t={update:VH(n,e.key,e.value)};else if(e instanceof Dc)t={delete:Xf(n,e.key)};else if(e instanceof Ks)t={update:VH(n,e.key,e.data),updateMask:qce(e.fieldMask)};else{if(!(e instanceof $A))return G();t={verify:Xf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Ic)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof mu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof yu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Cc)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw G()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Uce(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:G()),t;var i}(this.yt,r))};this.Bo(t)}}class Xde extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new R(E.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new R(E.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new R(E.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Jde{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kt(t),this.ou=!1):P("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ehe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(a=>{r.enqueueAndForget(v(function*(){var u;Qs(o)&&(P("RemoteStore","Restarting streams for network reachability change."),yield(u=v(function*(l){const c=U(l);c._u.add(4),yield Rc(c),c.gu.set("Unknown"),c._u.delete(4),yield lp(c)}),function(l){return u.apply(this,arguments)})(o))}))}),this.gu=new Jde(r,i)}}function lp(n){return _x.apply(this,arguments)}function _x(){return _x=v(function*(n){if(Qs(n))for(const e of n.wu)yield e(!0)}),_x.apply(this,arguments)}function Rc(n){return vx.apply(this,arguments)}function vx(){return vx=v(function*(n){for(const e of n.wu)yield e(!1)}),vx.apply(this,arguments)}function pv(n,e){const t=U(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Ix(t)?bx(t):Oc(t).ko()&&wx(t,e))}function cp(n,e){const t=U(n),r=Oc(t);t.du.delete(e),r.ko()&&VG(t,e),0===t.du.size&&(r.ko()?r.Fo():Qs(t)&&t.gu.set("Unknown"))}function wx(n,e){n.yu.Ot(e.targetId),Oc(n).zo(e)}function VG(n,e){n.yu.Ot(e),Oc(n).Ho(e)}function bx(n){n.yu=new Pce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Oc(n).start(),n.gu.uu()}function Ix(n){return Qs(n)&&!Oc(n).No()&&n.du.size>0}function Qs(n){return 0===U(n)._u.size}function UG(n){n.yu=void 0}function the(n){return Cx.apply(this,arguments)}function Cx(){return Cx=v(function*(n){n.du.forEach((e,t)=>{wx(n,e)})}),Cx.apply(this,arguments)}function nhe(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=v(function*(n,e){UG(n),Ix(n)?(n.gu.hu(e),bx(n)):n.gu.set("Unknown")}),Ex.apply(this,arguments)}function rhe(n,e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=v(function*(n,e,t){if(n.gu.set("Online"),e instanceof kH&&2===e.state&&e.cause)try{yield(r=v(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.du.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.du.delete(a),i.yu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gv(n,r)}else if(e instanceof Z_?n.yu.Kt(e):e instanceof xH?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Y.min()))try{const r=yield SG(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const l=i.du.get(u);l&&i.du.set(u,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.du.get(a);if(!u)return;i.du.set(a,u.withResumeToken(Zt.EMPTY_BYTE_STRING,u.snapshotVersion)),VG(i,a);const l=new Ro(u.target,a,1,u.sequenceNumber);wx(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){P("RemoteStore","Failed to raise snapshot:",r),yield gv(n,r)}var r}),Dx.apply(this,arguments)}function gv(n,e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=v(function*(n,e,t){if(!So(e))throw e;n._u.add(1),yield Rc(n),n.gu.set("Offline"),t||(t=()=>SG(n.localStore)),n.asyncQueue.enqueueRetryable(v(function*(){P("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield lp(n)}))}),Tx.apply(this,arguments)}function BG(n,e){return e().catch(t=>gv(n,t,e))}function Pc(n){return Sx.apply(this,arguments)}function Sx(){return Sx=v(function*(n){const e=U(n),t=Lo(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;ihe(e);)try{const i=yield jde(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,she(e,i)}catch(i){yield gv(e,i)}$G(e)&&jG(e)}),Sx.apply(this,arguments)}function ihe(n){return Qs(n)&&n.fu.length<10}function she(n,e){n.fu.push(e);const t=Lo(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function $G(n){return Qs(n)&&!Lo(n).No()&&n.fu.length>0}function jG(n){Lo(n).start()}function ohe(n){return Ax.apply(this,arguments)}function Ax(){return Ax=v(function*(n){Lo(n).eu()}),Ax.apply(this,arguments)}function ahe(n){return xx.apply(this,arguments)}function xx(){return xx=v(function*(n){const e=Lo(n);for(const t of n.fu)e.Xo(t.mutations)}),xx.apply(this,arguments)}function uhe(n,e,t){return kx.apply(this,arguments)}function kx(){return kx=v(function*(n,e,t){const r=n.fu.shift(),i=KA.from(r,e,t);yield BG(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Pc(n)}),kx.apply(this,arguments)}function lhe(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=v(function*(n,e){var t;e&&Lo(n).Yo&&(yield(t=v(function*(r,i){if(EH(s=i.code)&&s!==E.ABORTED){const o=r.fu.shift();Lo(r).Mo(),yield BG(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Pc(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),$G(n)&&jG(n)}),Mx.apply(this,arguments)}function HG(n,e){return Nx.apply(this,arguments)}function Nx(){return Nx=v(function*(n,e){const t=U(n);t.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const r=Qs(t);t._u.add(3),yield Rc(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield lp(t)}),Nx.apply(this,arguments)}function Px(){return Px=v(function*(n,e){const t=U(n);e?(t._u.delete(2),yield lp(t)):e||(t._u.add(2),yield Rc(t),t.gu.set("Unknown"))}),Px.apply(this,arguments)}function Oc(n){return n.pu||(n.pu=function(e,t,r){const i=U(e);return i.su(),new Qde(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:the.bind(null,n),Zr:nhe.bind(null,n),Wo:rhe.bind(null,n)}),n.wu.push(function(){var e=v(function*(t){t?(n.pu.Mo(),Ix(n)?bx(n):n.gu.set("Unknown")):(yield n.pu.stop(),UG(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Lo(n){return n.Iu||(n.Iu=function(e,t,r){const i=U(e);return i.su(),new Yde(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:ohe.bind(null,n),Zr:lhe.bind(null,n),tu:ahe.bind(null,n),Zo:uhe.bind(null,n)}),n.wu.push(function(){var e=v(function*(t){t?(n.Iu.Mo(),yield Pc(n)):(yield n.Iu.stop(),n.fu.length>0&&(P("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Ox{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Ox(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new R(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fc(n,e){if(kt("AsyncQueue",`${e}: ${n}`),So(n))return new R(E.UNAVAILABLE,`${e}: ${n}`);throw n}class Lc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||L.comparator(t.key,r.key):(t,r)=>L.comparator(t.key,r.key),this.keyedMap=qf(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new Lc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Lc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class GG{constructor(){this.Tu=new St(L.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):G():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Vc{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Vc(e,t,Lc.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class che{constructor(){this.Au=void 0,this.listeners=[]}}class dhe{constructor(){this.queries=new No(e=>uH(e),Gf),this.onlineState="Unknown",this.Ru=new Set}}function Lx(){return Lx=v(function*(n,e){const t=U(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new che),i)try{s.Au=yield t.onListen(r)}catch(o){const a=Fc(o,`Initialization of query '${UA(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&Bx(t)}),Lx.apply(this,arguments)}function Ux(){return Ux=v(function*(n,e){const t=U(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Ux.apply(this,arguments)}function hhe(n,e){const t=U(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&Bx(t)}function fhe(n,e,t){const r=U(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Bx(n){n.Ru.forEach(e=>{e.next()})}class $x{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class qG{constructor(e){this.key=e}}class KG{constructor(e){this.key=e}}class QG{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=_e(),this.mutatedKeys=_e(),this.Gu=cH(e),this.Qu=new Lc(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new GG,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const p=i.get(c),g=BA(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?y!==w&&(r.track({type:3,doc:g}),b=!0):this.Hu(p,g)||(r.track({type:2,doc:g}),b=!0,(u&&this.Gu(g,u)>0||l&&this.Gu(g,l)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(u||l)&&(a=!0)),b&&(g?(o=o.add(g),s=w?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((l,c)=>function(d,p){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return g(d)-g(p)}(l.type,c.type)||this.Gu(l.doc,c.doc)),this.Ju(r);const o=t?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,u=a!==this.Uu;return this.Uu=a,0!==s.length||u?{snapshot:new Vc(this.query,e.Qu,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new GG,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=_e(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new KG(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new qG(r))}),t}tc(e){this.qu=e.Hi,this.Ku=_e();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Vc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class mhe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yhe{constructor(e){this.key=e,this.nc=!1}}class _he{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new No(a=>uH(a),Gf),this.rc=new Map,this.oc=new Set,this.uc=new St(L.comparator),this.cc=new Map,this.ac=new rx,this.hc={},this.lc=new Map,this.fc=Cu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function vhe(n,e){return jx.apply(this,arguments)}function jx(){return jx=v(function*(n,e){const t=d1(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=yield Mc(t.localStore,or(e));t.isPrimaryClient&&pv(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield Hx(t,e,r,"current"===a,o.resumeToken)}return i}),jx.apply(this,arguments)}function Hx(n,e,t,r,i){return Gx.apply(this,arguments)}function Gx(){return Gx=v(function*(n,e,t,r,i){n._c=(d,p,g)=>{return(y=v(function*(w,b,D,M){let I=b.view.Wu(D);I.$i&&(I=yield cv(w.localStore,b.query,!1).then(({documents:X})=>b.view.Wu(X,I)));const $=M&&M.targetChanges.get(b.targetId),Q=b.view.applyChanges(I,w.isPrimaryClient,$);return e1(w,b.targetId,Q.Xu),Q.snapshot}),function(w,b,D,M){return y.apply(this,arguments)})(n,d,p,g);var y};const s=yield cv(n.localStore,e,!0),o=new QG(e,s.Hi),a=o.Wu(s.documents),u=Yf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);e1(n,t,l.Xu);const c=new mhe(e,t,o);return n.ic.set(e,c),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),l.snapshot}),Gx.apply(this,arguments)}function whe(n,e){return zx.apply(this,arguments)}function zx(){return zx=v(function*(n,e){const t=U(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!Gf(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cp(t.remoteStore,r.targetId),Uc(t,r.targetId)}).catch(To))):(Uc(t,r.targetId),yield Nc(t.localStore,r.targetId,!0))}),zx.apply(this,arguments)}function Wx(){return Wx=v(function*(n,e,t){const r=h1(n);try{const i=yield function(s,o){const a=U(s),u=vt.now(),l=o.reduce((p,g)=>p.add(g.key),_e());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ir(),y=_e();return a.Gi.getEntries(p,l).next(w=>{g=w,g.forEach((b,D)=>{D.isValidDocument()||(y=y.add(b))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,g)).next(w=>{c=w;const b=[];for(const D of o){const M=Ace(D,c.get(D.key).overlayedDocument);null!=M&&b.push(new Ks(D.key,M,rH(M.value.mapValue),ht.exists(!0)))}return a.mutationQueue.addMutationBatch(p,u,b,o)}).next(w=>{d=w;const b=w.applyToLocalDocumentSet(c,y);return a.documentOverlayCache.saveOverlays(p,w.batchId,b)})}).then(()=>({batchId:d.batchId,changes:SH(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.hc[s.currentUser.toKey()];u||(u=new St(le)),u=u.insert(o,a),s.hc[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Ys(r,i.changes),yield Pc(r.remoteStore)}catch(i){const s=Fc(i,"Failed to persist write");t.reject(s)}}),Wx.apply(this,arguments)}function YG(n,e){return qx.apply(this,arguments)}function qx(){return qx=v(function*(n,e){const t=U(n);try{const r=yield $de(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.cc.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?z(o.nc):i.removedDocuments.size>0&&(z(o.nc),o.nc=!1))}),yield Ys(t,r,e)}catch(r){yield To(r)}}),qx.apply(this,arguments)}function XG(n,e,t){const r=U(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=U(s);a.onlineState=o;let u=!1;a.queries.forEach((l,c)=>{for(const d of c.listeners)d.bu(o)&&(u=!0)}),u&&Bx(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ihe(n,e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=v(function*(n,e,t){const r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new St(L.comparator);o=o.insert(s,at.newNoDocument(s,Y.min()));const a=_e().add(s),u=new Qf(Y.min(),new Map,new Xe(le),o,a);yield YG(r,u),r.uc=r.uc.remove(s),r.cc.delete(e),t1(r)}else yield Nc(r.localStore,e,!1).then(()=>Uc(r,e,t)).catch(To)}),Kx.apply(this,arguments)}function Che(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=v(function*(n,e){const t=U(n),r=e.batch.batchId;try{const i=yield Bde(t.localStore,e);Jx(t,r,null),Zx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ys(t,i)}catch(i){yield To(i)}}),Qx.apply(this,arguments)}function Ehe(n,e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=v(function*(n,e,t){const r=U(n);try{const i=yield function(s,o){const a=U(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return a.mutationQueue.lookupMutationBatch(u,o).next(c=>(z(null!==c),l=c.keys(),a.mutationQueue.removeMutationBatch(u,c))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>a.localDocuments.getDocuments(u,l))})}(r.localStore,e);Jx(r,e,t),Zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ys(r,i)}catch(i){yield To(i)}}),Yx.apply(this,arguments)}function Zx(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Jx(n,e,t){const r=U(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Uc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||ZG(n,r)})}function ZG(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(cp(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),t1(n))}function e1(n,e,t){for(const r of t)r instanceof qG?(n.ac.addReference(r.key,e),The(n,r)):r instanceof KG?(P("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||ZG(n,r.key)):G()}function The(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(P("SyncEngine","New document in limbo: "+t),n.oc.add(r),t1(n))}function t1(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new L(Oe.fromString(e)),r=n.fc.next();n.cc.set(r,new yhe(t)),n.uc=n.uc.insert(t,r),pv(n.remoteStore,new Ro(or(bc(t.path)),r,2,jr.at))}}function Ys(n,e,t){return n1.apply(this,arguments)}function n1(){return n1=v(function*(n,e,t){const r=U(n),i=[],s=[],o=[];var a;r.ic.isEmpty()||(r.ic.forEach((a,u)=>{o.push(r._c(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const c=ax.Ci(u.targetId,l);s.push(c)}}))}),yield Promise.all(o),r.sc.Wo(i),yield(a=v(function*(u,l){const c=U(u);try{yield c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>C.forEach(l,p=>C.forEach(p.Si,g=>c.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>C.forEach(p.Di,g=>c.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!So(d))throw d;P("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const p=d.targetId;if(!d.fromCache){const g=c.qi.get(p),w=g.withLastLimboFreeSnapshotVersion(g.snapshotVersion);c.qi=c.qi.insert(p,w)}}}),function(u,l){return a.apply(this,arguments)})(r.localStore,s))}),n1.apply(this,arguments)}function She(n,e){return r1.apply(this,arguments)}function r1(){return r1=v(function*(n,e){const t=U(n);if(!t.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());const r=yield TG(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(o=>{o.forEach(a=>{a.reject(new R(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ys(t,r.ji)}var i}),r1.apply(this,arguments)}function Ahe(n,e){const t=U(n),r=t.cc.get(e);if(r&&r.nc)return _e().add(r.key);{let i=_e();const s=t.rc.get(e);if(!s)return i;for(const o of s){const a=t.ic.get(o);i=i.unionWith(a.view.ju)}return i}}function d1(n){const e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ahe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ihe.bind(null,e),e.sc.Wo=hhe.bind(null,e.eventManager),e.sc.wc=fhe.bind(null,e.eventManager),e}function h1(n){const e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Che.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ehe.bind(null,e),e}class Lhe{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return v(function*(){t.yt=up(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return function DG(n,e,t,r){return new Ude(n,e,t,r)}(this.persistence,new EG,e.initialUser,this.yt)}yc(e){return new IG(uv.Bs,this.yt)}gc(e){return new PG}terminate(){var e=this;return v(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class f1{initialize(e,t){var r=this;return v(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>XG(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=She.bind(null,r.syncEngine),yield function Rx(n,e){return Px.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dhe}createDatastore(e){const t=up(e.databaseInfo.databaseId),r=new Kde(e.databaseInfo);return new Xde(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>XG(this.syncEngine,a,0),o=OG.C()?new OG:new zde,new ehe(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,u,l){const c=new _he(r,i,s,o,a,u);return l&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=v(function*(t){const r=U(t);P("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Rc(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function p1(n,e,t){if(!t)throw new R(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tz(n){if(!L.isDocumentKey(n))throw new R(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nz(n){if(L.isDocumentKey(n))throw new R(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":G()}function Ne(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new R(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mv(n);throw new R(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}const iz=new Map;class sz{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new R(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new R(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Bhe(n,e,t,r){if(!0===e&&!0===r)throw new R(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sz({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new R(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new R(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sz(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Qle;switch(t.type){case"gapi":return new Jle(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new R(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iz.get(e);t&&(P("ComponentProvider","Removing Datastore"),iz.delete(e),t.terminate())}(this),Promise.resolve()}}class Rt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Pn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pn(this.firestore,e,this._query)}}class ts extends Pn{constructor(e,t,r){super(e,t,bc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new L(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function oz(n,e,...t){if(n=sn(n),p1("collection","path",e),n instanceof dp){const r=Oe.fromString(e,...t);return nz(r),new ts(n,null,r)}{if(!(n instanceof Rt||n instanceof ts))throw new R(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Oe.fromString(e,...t));return nz(r),new ts(n.firestore,null,r)}}function az(n,e,...t){if(n=sn(n),1===arguments.length&&(e=Mj.R()),p1("doc","path",e),n instanceof dp){const r=Oe.fromString(e,...t);return tz(r),new Rt(n,null,new L(r))}{if(!(n instanceof Rt||n instanceof ts))throw new R(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Oe.fromString(e,...t));return tz(r),new Rt(n.firestore,n instanceof ts?n.converter:null,new L(r))}}class yv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qhe{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=un.UNAUTHENTICATED,this.clientId=Mj.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=v(function*(a){P("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(P("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return v(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Fc(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function cz(n,e){return g1.apply(this,arguments)}function g1(){return g1=v(function*(n,e){n.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=v(function*(s){r.isEqual(s)||(yield TG(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),g1.apply(this,arguments)}function dz(n,e){return m1.apply(this,arguments)}function m1(){return m1=v(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield y1(n);P("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>HG(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>HG(e.remoteStore,s)),n.onlineComponents=e}),m1.apply(this,arguments)}function y1(n){return _1.apply(this,arguments)}function _1(){return _1=v(function*(n){return n.offlineComponents||(P("FirestoreClient","Using default OfflineComponentProvider"),yield cz(n,new Lhe)),n.offlineComponents}),_1.apply(this,arguments)}function _v(n){return v1.apply(this,arguments)}function v1(){return v1=v(function*(n){return n.onlineComponents||(P("FirestoreClient","Using default OnlineComponentProvider"),yield dz(n,new f1)),n.onlineComponents}),v1.apply(this,arguments)}function Bc(n){return I1.apply(this,arguments)}function I1(){return I1=v(function*(n){const e=yield _v(n),t=e.eventManager;return t.onListen=vhe.bind(null,e.syncEngine),t.onUnlisten=whe.bind(null,e.syncEngine),t}),I1.apply(this,arguments)}class tfe{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new mx(this,"async_queue_retry"),this.Wc=()=>{const t=fv();t&&P("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=fv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=fv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Xt;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return v(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!So(t))throw t;P("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,kt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Ox.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&G()}verifyOperationInProgress(){}Xc(){var e=this;return v(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function C1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ut extends dp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new tfe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mz(this),this._firestoreClient.terminate()}}function rfe(n,e){const r="string"==typeof n?n:e||"(default)",i=za("object"==typeof n?n:Ry(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=CV("firestore");s&&function $he(n,e,t,r={}){var i;const s=(n=Ne(n,dp))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&gc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=un.MOCK_USER;else{o=DV(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new R(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new un(u)}n._authCredentials=new Yle(new xj(o,a))}}(i,...s)}return i}function jt(n){return n._firestoreClient||mz(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mz(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cce(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new qhe(n._authCredentials,n._appCheckCredentials,n._queue,r)}class Du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Du(Zt.fromBase64String(e))}catch(t){throw new R(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Du(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new R(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vz{constructor(e){this._methodName=e}}class E1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new R(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}const ife=/^__.*__$/;class sfe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}function bz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class wv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Iv(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(bz(this.sa)&&ife.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class ofe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||up(e)}da(e,t,r,i=!1){return new wv({sa:e,methodName:t,fa:r,path:Mt.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function jc(n){const e=n._freezeSettings(),t=up(n._databaseId);return new ofe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D1(n,e,t,r,i,s={}){const o=n.da(s.merge||s.mergeFields?2:0,e,t,i);S1("Data must be an object, but it was:",o,r);const a=Tz(r,o);let u,l;if(s.merge)u=new br(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const p=A1(e,d,t);if(!o.contains(p))throw new R(E.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Az(c,p)||c.push(p)}u=new br(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new sfe(new Rn(a),u,l)}function Tu(n,e){if(Sz(n=sn(n)))return S1("Unsupported field value:",e,n),Tz(n,e);if(n instanceof vz)return function(t,r){if(!bz(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=Tu(o,r.aa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=sn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fH(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=vt.fromDate(t);return{timestampValue:Tc(r.yt,i)}}if(t instanceof vt){const i=new vt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tc(r.yt,i)}}if(t instanceof E1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Du)return{bytesValue:PH(r.yt,t._byteString)};if(t instanceof Rt){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${mv(t)}`)}(n,e)}function Tz(n,e){const t={};return Vj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(n,(r,i)=>{const s=Tu(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Sz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof E1||n instanceof Du||n instanceof Rt||n instanceof vz)}function S1(n,e,t){if(!Sz(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mv(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function A1(n,e,t){if((e=sn(e))instanceof $c)return e._internalPath;if("string"==typeof e)return bv(n,e);throw Iv("Field path arguments must be of type string or ",n,!1,void 0,t)}const cfe=new RegExp("[~\\*/\\[\\]]");function bv(n,e,t){if(e.search(cfe)>=0)throw Iv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $c(...e.split("."))._internalPath}catch{throw Iv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Iv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new R(E.INVALID_ARGUMENT,a+n+u)}function Az(n,e){return n.some(t=>t.isEqual(e))}class x1{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dfe extends x1{data(){return super.data()}}function Cv(n,e){return"string"==typeof e?bv(n,e):e instanceof $c?e._internalPath:e._delegate._internalPath}class ffe{convertValue(e,t="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw G()}}convertObject(e,t){const r={};return cu(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new E1(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bj(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uf(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Oe.fromString(e);z(GH(r));const i=new lu(r.get(1),r.get(3)),s=new L(r.popFirst(5));return i.isEqual(t)||kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gc extends x1{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sv extends Gc{data(e={}){return super.data(e)}}class zc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Su(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sv(this._firestore,this._userDataWriter,r.key,r,new Su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Sv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Su(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Sv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Su(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:pfe(o.type),doc:a,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pfe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class Vo extends ffe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function pp(n,e){return function(t,r){const i=new Xt;return t.asyncQueue.enqueueAndForget(v(function*(){return function bhe(n,e,t){return Wx.apply(this,arguments)}(yield function b1(n){return _v(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(jt(n),e)}!function(n,e=!0){pc=Wa,jn(new Tn("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new ut(new Xle(t.getProvider("auth-internal")),new ece(t.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new R(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ot(Aj,"3.8.1",n),ot(Aj,"3.8.1","esm2017")}();var bfe={includeMetadataChanges:!1};function R1(n,e){return void 0===e&&(e=bfe),new Ze(function(t){var r=function yfe(n,...e){var t,r,i;n=sn(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||C1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(C1(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,l,c;if(n instanceof Rt)l=Ne(n.firestore,ut),c=bc(n._key.path),u={next:d=>{e[o]&&e[o](function N1(n,e,t){const r=t.docs.get(e._key),i=new Vo(n);return new Gc(n,i,e._key,r,new Su(t.hasPendingWrites,t.fromCache),e.converter)}(l,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Ne(n,Pn);l=Ne(d.firestore,ut),c=d._query;const p=new Vo(l);u={next:g=>{e[o]&&e[o](new zc(l,p,d,g))},error:e[o+1],complete:e[o+2]},function xz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new R(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(d,p,g,y){const w=new yv(y),b=new $x(p,w,g);return d.asyncQueue.enqueueAndForget(v(function*(){return function Fx(n,e){return Lx.apply(this,arguments)}(yield Bc(d),b)})),()=>{w.bc(),d.asyncQueue.enqueueAndForget(v(function*(){return function Vx(n,e){return Ux.apply(this,arguments)}(yield Bc(d),b)}))}}(jt(l),c,a,u)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Afe(n,e){return void 0===e&&(e={}),function Sfe(n){return R1(n,{includeMetadataChanges:!0}).pipe(he(function(e){return e.docs}))}(n).pipe(he(function(t){return t.map(function(r){return function Lz(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class xv{constructor(e){return e}}const $z="firestore",F1=new K("angularfire2.firestore-instances");function Mfe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xv(r)}}const Nfe={provide:class xfe{constructor(){return $y($z)}},deps:[[new Lt,F1]]},Rfe={provide:xv,useFactory:function kfe(n,e){const t=By($z,n,e);return t&&new xv(t)},deps:[[new Lt,F1],Ja]};let Pfe=(()=>{class n{constructor(){ot("angularfire",Xh.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({providers:[Rfe,Nfe]}),n})();const Ffe=Us(Afe,!0),Lfe=Us(rfe,!0);class si{constructor(e){this.fireStore=e}addProducto(e){return function mfe(n,e){const t=Ne(n.firestore,ut),r=az(n),i=function M1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return pp(t,[D1(jc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ht.exists(!1))]).then(()=>r)}(oz(this.fireStore,"Abarrotes"),e)}getProductos(){const e=oz(this.fireStore,"Abarrotes");return Ffe(e,{idField:"id"})}deleteAbarrotes(e){return function gfe(n){return pp(Ne(n.firestore,ut),[new Dc(n._key,ht.none())])}(az(this.fireStore,`Abarrotes/${e.id}`))}}si.\u0275fac=function(e){return new(e||si)(q(xv))},si.\u0275prov=J({token:si,factory:si.\u0275fac,providedIn:"root"});const Vfe=function(n){return["/agregarProducto",n]};function Ufe(n,e){if(1&n&&(x(0,"div",7)(1,"div",8)(2,"div",9),Ce(3,"img",10),k(),x(4,"div",11)(5,"div",12)(6,"h4"),B(7),k(),x(8,"h5",13),B(9),ka(10,"currency"),k(),x(11,"p",14),B(12),k(),x(13,"div",15)(14,"button",16),B(15,"Agregar al carrito"),k()()()()()()),2&n){const t=e.$implicit;pe(3),Sa("src",t.foto,Ca),pe(4),In(t.name),pe(2),In(Ma(10,5,t.precio)),pe(3),In(t.descripcion),pe(2),mt("routerLink",Dm(7,Vfe,t.name))}}class gp{constructor(e,t){this.route=e,this.detallesProductos=t,this.productos=[],this.producto=[]}ngOnInit(){this.id=String(this.route.snapshot.paramMap.get("id")),this.detallesProductos.getProductos().subscribe(e=>{this.productos=e,this.filtrar()})}filtrar(){this.producto=this.productos.filter(e=>e.name===this.id)}atras(){window.history.back()}}gp.\u0275fac=function(e){return new(e||gp)(A(vo),A(si))},gp.\u0275cmp=Ln({type:gp,selectors:[["app-detalles-productos"]],decls:10,vars:1,consts:[[1,"m-4"],[2,"font-size","40px"],[1,"mt-5","mb-5"],[1,"row","mx-auto","g-3",2,"width","100%"],["class","col",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],[1,"btn","btn-danger",2,"width","150px",3,"click"],[1,"col"],[1,"row","border","rounded-3","mx-auto","p-3","position-relative",2,"width","90%"],[1,"col","border","text-center"],["alt","","width","250px",1,"",3,"src"],[1,"col","border"],[1,"m-5"],[1,"text-danger"],[1,""],[1,"d-grid","mb-3",2,"width","180px"],[1,"btn","btn-danger",3,"routerLink"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"h1",1),B(2,"Detalles"),k()(),Ce(3,"hr"),x(4,"div",2)(5,"div",3),gr(6,Ufe,16,9,"div",4),k(),x(7,"div",5)(8,"button",6),yt("click",function(){return t.atras()}),B(9,"Atras"),k()()()),2&e&&(pe(6),mt("ngForOf",t.producto))},dependencies:[Hl,Wi,Ch]});let jz=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(A(Is),A(Lr))},n.\u0275dir=ie({type:n}),n})(),Au=(()=>{class n extends jz{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=bn(n)))(r||n)}}(),n.\u0275dir=ie({type:n,features:[ze]}),n})();const ns=new K("NgValueAccessor"),jfe={provide:ns,useExisting:Ke(()=>xu),multi:!0},Gfe=new K("CompositionEventMode");let xu=(()=>{class n extends jz{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Hfe(){const n=ji()?ji().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(A(Is),A(Lr),A(Gfe,8))},n.\u0275dir=ie({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&yt("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ct([jfe]),ze]}),n})();const zn=new K("NgValidators"),Bo=new K("NgAsyncValidators");function Jz(n){return null!=n}function eW(n){return uh(n)?bt(n):n}function tW(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function nW(n,e){return e.map(t=>t(n))}function rW(n){return n.map(e=>function qfe(n){return!n.validate}(e)?e:t=>e.validate(t))}function L1(n){return null!=n?function iW(n){if(!n)return null;const e=n.filter(Jz);return 0==e.length?null:function(t){return tW(nW(t,e))}}(rW(n)):null}function V1(n){return null!=n?function sW(n){if(!n)return null;const e=n.filter(Jz);return 0==e.length?null:function(t){return function Bfe(...n){const e=yg(n),{args:t,keys:r}=r2(n),i=new Ze(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let c=0;c<o;c++){let d=!1;Sr(t[c]).subscribe(Le(s,p=>{d||(d=!0,l--),a[c]=p},()=>u--,void 0,()=>{(!u||!d)&&(l||s.next(r?s2(r,a):a),s.complete())}))}});return e?i.pipe(i2(e)):i}(nW(t,e).map(eW)).pipe(he(tW))}}(rW(n)):null}function oW(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aW(n){return n._rawValidators}function uW(n){return n._rawAsyncValidators}function U1(n){return n?Array.isArray(n)?n:[n]:[]}function Mv(n,e){return Array.isArray(n)?n.includes(e):n===e}function lW(n,e){const t=U1(e);return U1(n).forEach(i=>{Mv(t,i)||t.push(i)}),t}function cW(n,e){return U1(e).filter(t=>!Mv(n,t))}class dW{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=L1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=V1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ur extends dW{get formDirective(){return null}get path(){return null}}class $o extends dW{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hW{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let mp=(()=>{class n extends hW{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A($o,2))},n.\u0275dir=ie({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&_m("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ze]}),n})(),yp=(()=>{class n extends hW{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A(ur,10))},n.\u0275dir=ie({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&_m("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ze]}),n})();const _p="VALID",Rv="INVALID",Wc="PENDING",vp="DISABLED";function H1(n){return(Pv(n)?n.validators:n)||null}function G1(n,e){return(Pv(e)?e.asyncValidators:n)||null}function Pv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class mW{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_p}get invalid(){return this.status===Rv}get pending(){return this.status==Wc}get disabled(){return this.status===vp}get enabled(){return this.status!==vp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lW(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lW(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cW(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cW(e,this._rawAsyncValidators))}hasValidator(e){return Mv(this._rawValidators,e)}hasAsyncValidator(e){return Mv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_p,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_p||this.status===Wc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vp:_p}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wc,this._hasOwnPendingAsyncValidator=!0;const t=eW(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ct,this.statusChanges=new Ct}_calculateStatus(){return this._allControlsDisabled()?vp:this.errors?Rv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wc)?Wc:this._anyControlsHaveStatus(Rv)?Rv:_p}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function epe(n){return Array.isArray(n)?L1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tpe(n){return Array.isArray(n)?V1(n):n||null}(this._rawAsyncValidators)}}class qc extends mW{constructor(e,t,r){super(H1(t),G1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function gW(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new O(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function pW(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new O(1e3,"");if(!r[t])throw new O(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Kc=new K("CallSetDisabledState",{providedIn:"root",factory:()=>Ov}),Ov="always";function Fv(n,e){return[...e.path,n]}function wp(n,e,t=Ov){z1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function ipe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yW(n,e)})}(n,e),function ope(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function spe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yW(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rpe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Lv(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Uv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Vv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function z1(n,e){const t=aW(n);null!==e.validator?n.setValidators(oW(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=uW(n);null!==e.asyncValidator?n.setAsyncValidators(oW(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Vv(e._rawValidators,i),Vv(e._rawAsyncValidators,i)}function Uv(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=aW(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=uW(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Vv(e._rawValidators,r),Vv(e._rawAsyncValidators,r),t}function yW(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _W(n,e){z1(n,e)}function q1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function vW(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function K1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===xu?t=s:function lpe(n){return Object.getPrototypeOf(n.constructor)===Au}(s)?r=s:i=s}),i||r||t||null}const dpe={provide:ur,useExisting:Ke(()=>Bv)},bp=(()=>Promise.resolve())();let Bv=(()=>{class n extends ur{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ct,this.form=new qc({},L1(t),V1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bp.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){bp.then(()=>{const r=this._findContainer(t.path),i=new qc({});_W(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){bp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,vW(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(A(zn,10),A(Bo,10),A(Kc,8))},n.\u0275dir=ie({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&yt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([dpe]),ze]}),n})();function wW(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function bW(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rs=class extends mW{constructor(e=null,t,r){super(H1(t),G1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=bW(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wW(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wW(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){bW(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},ppe={provide:$o,useExisting:Ke(()=>$v)},EW=(()=>Promise.resolve())();let $v=(()=>{class n extends $o{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new rs,this._registered=!1,this.update=new Ct,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=K1(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),q1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){EW.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&jl(r);EW.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Fv(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(A(ur,9),A(zn,10),A(Bo,10),A(ns,10),A(Om,8),A(Kc,8))},n.\u0275dir=ie({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ct([ppe]),ze,Yr]}),n})(),Ip=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const gpe={provide:ns,useExisting:Ke(()=>jv),multi:!0};let jv=(()=>{class n extends Au{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=bn(n)))(r||n)}}(),n.\u0275dir=ie({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&yt("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[ct([gpe]),ze]}),n})(),DW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({}),n})();const Q1=new K("NgModelWithFormControlWarning"),wpe={provide:ur,useExisting:Ke(()=>Qc)};let Qc=(()=>{class n extends ur{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ct,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Lv(t.control||null,t,!1),function cpe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,vW(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Lv(r||null,t),(n=>n instanceof rs)(i)&&(wp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);_W(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ape(n,e){return Uv(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){z1(this.form,this),this._oldForm&&Uv(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(A(zn,10),A(Bo,10),A(Kc,8))},n.\u0275dir=ie({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&yt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([wpe]),ze,Yr]}),n})();const Cpe={provide:$o,useExisting:Ke(()=>Cp)};let Cp=(()=>{class n extends $o{set isDisabled(t){}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new Ct,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=K1(0,s)}ngOnChanges(t){this._added||this._setUpControl(),q1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Fv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(A(ur,13),A(zn,10),A(Bo,10),A(ns,10),A(Q1,8))},n.\u0275dir=ie({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ct([Cpe]),ze,Yr]}),n})(),$W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({imports:[DW]}),n})(),jW=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kc,useValue:t.callSetDisabledState??Ov}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({imports:[$W]}),n})(),HW=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Q1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Kc,useValue:t.callSetDisabledState??Ov}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({imports:[$W]}),n})();var Upe=ui(226),Ep=ui.n(Upe);class jo{constructor(e){this.auth=e}registerUser({email:e,password:t}){return Hue(this.auth,e,t)}loginUser({email:e,password:t}){return zue(this.auth,e,t)}logout(){return Wue(this.auth)}}jo.\u0275fac=function(e){return new(e||jo)(q(gf))},jo.\u0275prov=J({token:jo,factory:jo.\u0275fac,providedIn:"root"});class Dp{constructor(e,t){this.userService=e,this.router=t,this.formLogin=new qc({email:new rs,password:new rs})}onSubmit(){console.log(this.formLogin.value),this.userService.loginUser(this.formLogin.value).then(e=>{console.log(e),localStorage.setItem("status","logIn"),localStorage.setItem("User",this.formLogin.value.email),location.reload(),"Admin"==localStorage.getItem("modo")?this.router.navigate(["listaProductos"]):this.router.navigate(["inicio"])}).catch(e=>{console.log(e),Ep().fire({position:"center",icon:"error",title:"Correo y/o contrase\xf1a invalidos",showConfirmButton:!1,timer:1700})})}}Dp.\u0275fac=function(e){return new(e||Dp)(A(jo),A(Et))},Dp.\u0275cmp=Ln({type:Dp,selectors:[["app-login"]],decls:30,vars:1,consts:[[1,"mt-5","mx-auto","border","rounded-4",2,"width","325px"],[1,"p-5"],[1,""],[3,"formGroup"],[1,"mb-2"],[1,"mt-3"],["type","email","formControlName","email","placeholder","Correo",1,"form-control"],["type","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control"],["routerLink","/register",2,"font-size","14px"],[1,"text-center","d-grid","mb-2"],[1,"btn","btn-danger",3,"click"],[1,"mb-1","text-center"],[2,"font-size","14px"],[1,"text-center","d-grid"],["routerLink","/registro",1,"btn","btn-outline-secondary"],[1,"bg-black","mx-auto","m-4","rounded","p-3","text-white","text-center",2,"width","350px"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"div",1)(2,"h3",2),B(3,"Login"),k(),x(4,"form",3)(5,"div",4)(6,"div",5),Ce(7,"input",6),k()(),x(8,"div",4)(9,"div"),Ce(10,"input",7),k()(),x(11,"div",4)(12,"a",8),B(13,"\xbfOlvidaste tu contrase\xf1a?"),k()(),x(14,"div",9)(15,"button",10),yt("click",function(){return t.onSubmit()}),B(16,"Iniciar sesi\xf3n"),k()(),x(17,"div",11)(18,"span",12),B(19,"\xbfEres Nuevo?"),k()(),x(20,"div",13)(21,"button",14),B(22,"Crea tu cuenta"),k()()()()(),x(23,"div",15)(24,"p"),B(25,"Acceso Admin"),k(),x(26,"p"),B(27,"correo: admin@hotmail.com "),Ce(28,"br"),B(29," password: 123456"),k()()),2&e&&(pe(4),mt("formGroup",t.formLogin))},dependencies:[Wi,Ip,xu,mp,yp,Qc,Cp]});class Tp{}function Bpe(n,e){if(1&n){const t=Ol();x(0,"tr")(1,"td",8),Ce(2,"img",9),k(),x(3,"td"),B(4),k(),x(5,"td"),B(6),k(),x(7,"td",8),B(8),ka(9,"currency"),k(),x(10,"td",8)(11,"button",10),yt("click",function(){const s=ma(t).$implicit;return ya(gi().onClickDelete(s))}),Ce(12,"i",11),k()()()}if(2&n){const t=e.$implicit;pe(2),Sa("src",t.foto,Ca),pe(2),In(t.name),pe(2),In(t.descripcion),pe(2),In(Ma(9,4,t.precio))}}Tp.\u0275fac=function(e){return new(e||Tp)},Tp.\u0275cmp=Ln({type:Tp,selectors:[["app-inicio"]],decls:22,vars:0,consts:[["id","carouselExampleIndicators",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","https://www.abarroteselsospo.com/gallery_gen/34859b3912e8e84f056e24938290b13a.png","alt","...",1,"d-block","w-100"],[1,"carousel-item"],["src","https://tequilaporfavor.com/images/about/nosotros.jpg","alt","...",1,"d-block","w-100"],["src","https://zukra.cr/wp-content/uploads/2021/01/Gastronomi%CC%81a-sostenible.jpg","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"div",1),Ce(2,"button",2)(3,"button",3)(4,"button",4),k(),x(5,"div",5)(6,"div",6),Ce(7,"img",7),k(),x(8,"div",8),Ce(9,"img",9),k(),x(10,"div",8),Ce(11,"img",10),k()(),x(12,"button",11),Ce(13,"span",12),x(14,"span",13),B(15,"Previous"),k()(),x(16,"button",14),Ce(17,"span",15),x(18,"span",13),B(19,"Next"),k()()(),x(20,"div"),Ce(21,"router-outlet"),k())},dependencies:[cy]});class Sp{constructor(e,t){this.dataProductos=e,this.router=t,this.productos=[]}ngOnInit(){"Admin"!=localStorage.getItem("modo")&&this.router.navigate(["/inicio"]),this.dataProductos.getProductos().subscribe(e=>this.productos=e)}onClickDelete(e){const t=this.dataProductos.deleteAbarrotes(e);console.log(t)}}Sp.\u0275fac=function(e){return new(e||Sp)(A(si),A(Et))},Sp.\u0275cmp=Ln({type:Sp,selectors:[["app-lista-productos"]],decls:24,vars:1,consts:[[1,"m-5"],[2,"font-size","30px","text-align","center"],["routerLink","/registroProductos",1,"btn","btn-success"],[1,"mt-4","table-responsive"],[1,"table","table-bordered","align-middle"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-center"],["alt","","width","60px",3,"src"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"div")(2,"h2",1),B(3,"Lista de productos"),k()(),x(4,"div")(5,"div")(6,"button",2),B(7,"Agregar productos"),k()()(),x(8,"div",3)(9,"table",4)(10,"thead")(11,"tr")(12,"th",5),B(13,"Foto"),k(),x(14,"th",5),B(15,"Nombre"),k(),x(16,"th",5),B(17,"Descripcion"),k(),x(18,"th",5),B(19,"Precio"),k(),x(20,"th",6),B(21,"Eliminar"),k()()(),x(22,"tbody"),gr(23,Bpe,13,6,"tr",7),k()()()()),2&e&&(pe(23),mt("ngForOf",t.productos))},dependencies:[Hl,Wi,Ch]});const $pe=function(n){return["/detalles",n]},jpe=function(n){return["/agregarProducto",n]};function Hpe(n,e){if(1&n&&(x(0,"div",8)(1,"div",9)(2,"div",10),Ce(3,"img",11),k(),Ce(4,"hr"),x(5,"div")(6,"h4"),B(7),k()(),x(8,"div")(9,"h5",12),B(10),ka(11,"currency"),k()(),x(12,"div")(13,"a",13),B(14,"Ver detalles"),k()(),x(15,"div",14)(16,"button",15),B(17,"Agregar al carrito"),k()()()()),2&n){const t=e.$implicit;pe(3),Sa("src",t.foto,Ca),pe(4),In(t.name),pe(3),In(Ma(11,5,t.precio)),pe(3),mt("routerLink",Dm(7,$pe,t.name)),pe(3),mt("routerLink",Dm(9,jpe,t.name))}}class Yc{constructor(e,t){this.ProductosService=e,this.router=t,this.carrito=[]}ngOnInit(){"Admin"==localStorage.getItem("modo")&&this.router.navigate(["/listaProductos"]),this.ProductosService.getProductos().subscribe(e=>{this.productos=e,this.cantidadCarrito()})}cantidadCarrito(){for(let e=0;e<this.productos.length;e++){let t;t=localStorage.getItem(`${this.productos[e].id}`),t=JSON.parse(t),null!=t&&this.carrito.push(t)}this.itemsCarrito=this.carrito.length,localStorage.setItem("ItemsCarrito",this.itemsCarrito),console.log(this.carrito)}}Yc.\u0275fac=function(e){return new(e||Yc)(A(si),A(Et))},Yc.\u0275cmp=Ln({type:Yc,selectors:[["app-productos"]],decls:11,vars:2,consts:[[1,"m-4"],[2,"font-size","40px"],[1,"mt-5","mb-5"],[1,"row","mx-auto","g-3",2,"width","100%"],["class","col",4,"ngFor","ngForOf"],["routerLink","/carrito",1,"boton2-wsp"],[1,"bi","bi-cart2"],["routerLink","/carrito",1,"boton3-wsp"],[1,"col"],[1,"border","rounded-3","mx-auto","p-3","position-relative",2,"width","225px","height","400px"],[1,"text-center"],["alt","","width","150px",3,"src"],[1,"text-danger"],[1,"",3,"routerLink"],[1,"d-grid","position-absolute","bottom-0","start-50","translate-middle-x","mb-3",2,"width","200px"],[1,"btn","btn-danger",3,"routerLink"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"h1",1),B(2,"Productos"),k()(),Ce(3,"hr"),x(4,"div",2)(5,"div",3),gr(6,Hpe,18,11,"div",4),k()(),x(7,"a",5),Ce(8,"i",6),k(),x(9,"a",7),B(10),k()),2&e&&(pe(6),mt("ngForOf",t.productos),pe(4),In(t.itemsCarrito))},dependencies:[Hl,Wi,Ch],styles:[".boton2-wsp[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;line-height:63px;bottom:25px;right:25px;background:#198754;color:#fff;border-radius:50px;text-align:center;font-size:35px;box-shadow:0 1px 10px #0000004d;z-index:100;transition:all .3s ease}.boton2-wsp[_ngcontent-%COMP%]:hover{background:#157347}.boton3-wsp[_ngcontent-%COMP%]{text-decoration:none;position:fixed;width:25px;height:25px;line-height:25px;bottom:70px;right:25px;background:#dc3545;color:#fff;border-radius:50px;text-align:center;font-size:15px;box-shadow:0 1px 10px #0000004d;z-index:100;transition:all .3s ease}@media only screen and (min-width:320px) and (max-width:768px){.boton2-wsp[_ngcontent-%COMP%]{width:63px;height:63px;line-height:66px}.boton3-wsp[_ngcontent-%COMP%]{width:25px;height:25px;line-height:25px}}"]});class Ap{constructor(e,t){this.userService=e,this.router=t,this.formRegister=new qc({email:new rs,password:new rs})}onSubmit(){console.log(this.formRegister.value),this.formRegister.value.password==this.confPassword?this.userService.registerUser(this.formRegister.value).then(e=>{console.log(e),Ep().fire({position:"center",icon:"success",title:"Registrado correctamente",showConfirmButton:!1,timer:1300}),this.userService.logout(),this.router.navigate(["login"])}).catch(e=>{console.log(e)}):console.log("contrase\xf1as no coinciden")}}Ap.\u0275fac=function(e){return new(e||Ap)(A(jo),A(Et))},Ap.\u0275cmp=Ln({type:Ap,selectors:[["app-register"]],decls:20,vars:2,consts:[[1,"mt-5","mx-auto","border","rounded-4",2,"width","80%"],[1,"p-5"],[1,""],[3,"formGroup"],[1,"mb-2"],[1,"mt-3"],["type","email","formControlName","email","placeholder","Correo",1,"form-control"],["type","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control"],[1,"mb-4"],["for","",1,""],["type","password","placeholder","Repite tu Contrase\xf1a",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center","d-grid"],[1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"div",1)(2,"h3",2),B(3,"Registro"),k(),x(4,"form",3)(5,"div",4)(6,"div",5),Ce(7,"input",6),k()(),x(8,"div",4)(9,"div"),Ce(10,"input",7),k()()(),x(11,"div",8)(12,"div",4)(13,"label",9),B(14,"Confirmar contrase\xf1a"),k()(),x(15,"div")(16,"input",10),yt("ngModelChange",function(i){return t.confPassword=i}),k()()(),x(17,"div",11)(18,"button",12),yt("click",function(){return t.onSubmit()}),B(19,"Crear cuenta"),k()()()()),2&e&&(pe(4),mt("formGroup",t.formRegister),pe(12),mt("ngModel",t.confPassword))},dependencies:[Ip,xu,mp,yp,$v,Qc,Cp]});const tk=he(n=>!!n);let Gpe=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(i,s)=>{const o=i.data.authGuardPipe||(()=>tk);return jue(this.auth).pipe(Gl(1),o(i,s),he(a=>"boolean"==typeof a?a:Array.isArray(a)?this.router.createUrlTree(a):this.router.parseUrl(a)))}}}return n.\u0275fac=function(t){return new(t||n)(q(Et),q(gf))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class xp{constructor(e,t){this.productosData=e,this.router=t,this.formRegisterP=new qc({name:new rs,descripcion:new rs,precio:new rs,foto:new rs})}ngOnInit(){"Admin"!=localStorage.getItem("modo")&&this.router.navigate(["/inicio"])}registrar(){if(console.log(this.formRegisterP.value),null!=this.formRegisterP.value.name&&null!=this.formRegisterP.value.descripcion&&null!=this.formRegisterP.value.precio&&null!=this.formRegisterP.value.foto){const e=this.productosData.addProducto(this.formRegisterP.value);console.log(e),Ep().fire({position:"center",icon:"success",title:"Producto registrado",showConfirmButton:!1,timer:1500}),this.router.navigate(["/listaProductos"])}else Ep().fire({position:"center",icon:"error",title:"Llene todos los campos por favor",showConfirmButton:!1,timer:1700})}}function Kpe(n,e){if(1&n){const t=Ol();x(0,"div",8)(1,"div",9)(2,"div",10),Ce(3,"img",11),k(),Ce(4,"hr"),x(5,"div",12)(6,"h4",10),B(7),k()(),x(8,"div",12)(9,"input",13),yt("ngModelChange",function(i){return ma(t),ya(gi().cantidad=i)}),k()(),x(10,"div",14)(11,"button",15),yt("click",function(){return ma(t),ya(gi().agregar())}),B(12,"Agregar"),k()()()()}if(2&n){const t=e.$implicit,r=gi();pe(3),Sa("src",t.foto,Ca),pe(4),In(t.name),pe(2),mt("ngModel",r.cantidad)}}xp.\u0275fac=function(e){return new(e||xp)(A(si),A(Et))},xp.\u0275cmp=Ln({type:xp,selectors:[["app-dialog-producto"]],decls:39,vars:1,consts:[[1,"mt-5","mb-5","mx-auto","border","rounded-4",2,"width","80%"],[1,"p-5"],[1,"mb-4","text-center"],[3,"formGroup"],[1,"mb-3"],[1,"mb-2"],["for","",1,""],["type","text","formControlName","name","placeholder","Nombre del producto",1,"form-control"],["type","text","cols","30","rows","5","formControlName","descripcion","placeholder","Descripci\xf3n del producto",1,"form-control"],[1,"row"],[1,"mb-3","col-6"],["type","number","formControlName","precio","placeholder","Precio",1,"form-control"],["type","number","placeholder","Oferta","disabled","",1,"form-control"],["type","text","formControlName","foto","placeholder","URL",1,"form-control"],[1,"text-center","d-grid"],[1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"div",1)(2,"h2",2),B(3,"Registo de Productos"),k(),x(4,"form",3)(5,"div",4)(6,"div",5)(7,"label",6),B(8,"Nombre del producto"),k()(),x(9,"div"),Ce(10,"input",7),k()(),x(11,"div",4)(12,"div",5)(13,"label",6),B(14,"Descripci\xf3n"),k()(),x(15,"div"),Ce(16,"textarea",8),k()(),x(17,"div",9)(18,"div",10)(19,"div",5)(20,"label",6),B(21,"Precio"),k()(),x(22,"div"),Ce(23,"input",11),k()(),x(24,"div",10)(25,"div",5)(26,"label",6),B(27,"Oferta"),k()(),x(28,"div"),Ce(29,"input",12),k()()(),x(30,"div",4)(31,"div",5)(32,"label",6),B(33,"Foto"),k()(),x(34,"div"),Ce(35,"input",13),k()(),x(36,"div",14)(37,"button",15),yt("click",function(){return t.registrar()}),B(38,"Agregar"),k()()()()()),2&e&&(pe(4),mt("formGroup",t.formRegisterP))},dependencies:[Ip,xu,jv,mp,yp,Qc,Cp]});class kp{constructor(e,t,r){this.route=e,this.addProducto=t,this.router=r,this.carrito=[],this.productos=[],this.producto=[]}ngOnInit(){this.id=String(this.route.snapshot.paramMap.get("id")),this.addProducto.getProductos().subscribe(e=>{this.productos=e,this.filtrar(),this.cantidadCarrito()})}filtrar(){this.producto=this.productos.filter(e=>e.name===this.id)}agregar(){null==this.cantidad||0==this.cantidad||(this.producto[0].cantidad=this.cantidad,localStorage.setItem(`${this.producto[0].id}`,JSON.stringify(this.producto[0])),Ep().fire({position:"center",icon:"success",title:"Agregado al carrito correctamente",showConfirmButton:!1,timer:1300}),window.history.back()),this.itemsCarrito=this.carrito.length,localStorage.setItem("ItemsCarrito",this.itemsCarrito)}cantidadCarrito(){for(let e=0;e<this.productos.length;e++){let t;t=localStorage.getItem(`${this.productos[e].id}`),t=JSON.parse(t),null!=t&&this.carrito.push(t)}this.itemsCarrito=this.carrito.length,localStorage.setItem("ItemsCarrito",this.itemsCarrito),console.log(this.cantidad),console.log(this.carrito)}}function Qpe(n,e){if(1&n){const t=Ol();x(0,"tr")(1,"td",12),Ce(2,"img",13),k(),x(3,"td"),B(4),k(),x(5,"td",12),B(6),k(),x(7,"td",12),B(8),ka(9,"currency"),k(),x(10,"td",12),B(11),ka(12,"currency"),k(),x(13,"td",12)(14,"button",14),yt("click",function(){const s=ma(t).$implicit;return ya(gi().deleteItem(s.id))}),Ce(15,"i",15),k()()()}if(2&n){const t=e.$implicit;pe(2),Sa("src",t.foto,Ca),pe(2),In(t.name),pe(2),In(t.cantidad),pe(2),In(Ma(9,5,t.precio)),pe(3),In(Ma(12,7,t.precioTotal))}}kp.\u0275fac=function(e){return new(e||kp)(A(vo),A(si),A(Et))},kp.\u0275cmp=Ln({type:kp,selectors:[["app-agregar-productos"]],decls:11,vars:2,consts:[[1,"m-4"],[2,"font-size","40px"],[1,"mt-5"],[1,"row","mx-auto","g-3",2,"width","100%"],["class","col",4,"ngFor","ngForOf"],["routerLink","/carrito",1,"boton2-wsp"],[1,"bi","bi-cart2"],["routerLink","/carrito",1,"boton3-wsp"],[1,"col"],[1,"border","rounded-3","mx-auto","p-3","position-relative",2,"width","250px"],[1,"text-center"],["alt","","width","150px",3,"src"],[1,"mb-4"],["type","number","placeholder","Cantidad",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center","d-grid","mb-3"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"h1",1),B(2,"Producto"),k()(),Ce(3,"hr"),x(4,"div",2)(5,"div",3),gr(6,Kpe,13,3,"div",4),k()(),x(7,"a",5),Ce(8,"i",6),k(),x(9,"a",7),B(10),k()),2&e&&(pe(6),mt("ngForOf",t.producto),pe(4),In(t.itemsCarrito))},dependencies:[Hl,xu,jv,mp,$v,Wi],styles:[".boton2-wsp[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;line-height:63px;bottom:25px;right:25px;background:#198754;color:#fff;border-radius:50px;text-align:center;font-size:35px;box-shadow:0 1px 10px #0000004d;z-index:100;transition:all .3s ease}.boton2-wsp[_ngcontent-%COMP%]:hover{background:#157347}.boton3-wsp[_ngcontent-%COMP%]{text-decoration:none;position:fixed;width:25px;height:25px;line-height:25px;bottom:70px;right:25px;background:#dc3545;color:#fff;border-radius:50px;text-align:center;font-size:15px;box-shadow:0 1px 10px #0000004d;z-index:100;transition:all .3s ease}@media only screen and (min-width:320px) and (max-width:768px){.boton2-wsp[_ngcontent-%COMP%]{width:63px;height:63px;line-height:66px}.boton3-wsp[_ngcontent-%COMP%]{width:25px;height:25px;line-height:25px}}"]});class Mp{constructor(e,t){this.addProducto=e,this.router=t,this.carrito=[],this.totalPagar=0,this.productos=[]}ngOnInit(){"Admin"==localStorage.getItem("modo")&&this.router.navigate(["/listaProductos"]),this.addProducto.getProductos().subscribe(e=>{this.productos=e,this.mostrarCarrito()})}mostrarCarrito(){for(let e=0;e<this.productos.length;e++){let t,r;r=localStorage.getItem(`${this.productos[e].id}`),r=JSON.parse(r),null!=r&&(t=r.precio*r.cantidad,r.precioTotal=t,this.carrito.push(r),this.totalPagar=this.totalPagar+r.precio*r.cantidad)}}deleteItem(e){this.carrito=this.carrito.filter(t=>t.id!=e),localStorage.removeItem(e),this.itemsCarrito=this.carrito.length,localStorage.setItem("ItemsCarrito",this.itemsCarrito),this.cargarTotal()}cargarTotal(){let e=0;for(let t=0;t<this.carrito.length;t++)e+=this.carrito[t].precioTotal;this.totalPagar=e}}Mp.\u0275fac=function(e){return new(e||Mp)(A(si),A(Et))},Mp.\u0275cmp=Ln({type:Mp,selectors:[["app-mis-productos"]],decls:33,vars:4,consts:[[1,"m-5"],[2,"font-size","30px","text-align","center"],[1,"mt-4","table-responsive"],[1,"table","table-bordered","align-middle"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"mb-4"],[1,""],[1,"text-center","d-grid","gap-2"],[1,"btn","btn-success"],["routerLink","/productos",1,"btn","btn-danger"],[1,"text-center"],["alt","","width","60px",3,"src"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill"]],template:function(e,t){1&e&&(x(0,"div",0)(1,"div")(2,"h2",1),B(3,"Mi carrito de compras"),k()(),x(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),B(9,"Foto"),k(),x(10,"th",4),B(11,"Nombre"),k(),x(12,"th",4),B(13,"Cantidad"),k(),x(14,"th",4),B(15,"Precio Ud."),k(),x(16,"th",4),B(17,"Precio Total"),k(),x(18,"th",5),B(19,"Eliminar"),k()()(),x(20,"tbody"),gr(21,Qpe,16,9,"tr",6),Ce(22,"tr"),k()()(),x(23,"div",7)(24,"h1"),B(25),ka(26,"currency"),k()(),x(27,"div",8)(28,"div",9)(29,"button",10),B(30,"Pagar"),k(),x(31,"button",11),B(32,"Seguir comprando"),k()()()()),2&e&&(pe(21),mt("ngForOf",t.carrito),pe(4),ch("Total a pagar: ",Ma(26,2,t.totalPagar),""))},dependencies:[Hl,Wi,Ch]});const Ype=[{path:"inicio",component:Tp,children:[{path:"",component:Yc}]},{path:"login",component:Dp,canActivate:[Gpe],data:{authGuardPipe:()=>(n=>hs(tk,he(e=>e&&n||!0)))(["inicio"])}},{path:"productos",component:Yc},{path:"listaProductos",component:Sp},{path:"agregarProducto/:id",component:kp},{path:"detalles/:id",component:gp},{path:"registro",component:Ap},{path:"registroProductos",component:xp},{path:"carrito",component:Mp},{path:"**",pathMatch:"full",redirectTo:"inicio"}];class Xc{}function Xpe(n,e){1&n&&(x(0,"button",18),B(1,"Iniciar Sesi\xf3n"),k())}function Zpe(n,e){if(1&n&&(x(0,"span",19),B(1),k()),2&n){const t=gi(2);pe(1),ch("Hola ",t.holaUser,"")}}function Jpe(n,e){if(1&n){const t=Ol();x(0,"button",20),yt("click",function(){return ma(t),ya(gi(2).logOut())}),B(1,"Cerrar Sesi\xf3n"),k()}}function ege(n,e){if(1&n&&(x(0,"nav",2)(1,"div",3)(2,"a",4),B(3," ECommerce"),k(),x(4,"button",5),Ce(5,"span",6),k(),x(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),B(10,"Inicio"),k()(),x(11,"li",9)(12,"a",11),B(13,"Productos"),k()(),x(14,"li",9)(15,"a",12),B(16,"Carrito"),k()()(),x(17,"form",13)(18,"div",14),gr(19,Xpe,2,0,"button",15),k(),x(20,"div",14),gr(21,Zpe,2,1,"span",16),k(),x(22,"div",14),gr(23,Jpe,2,0,"button",17),k()()()()()),2&n){const t=gi();pe(19),mt("ngIf",t.botonLogIn),pe(2),mt("ngIf",t.botonLogOut),pe(2),mt("ngIf",t.botonLogOut)}}function tge(n,e){1&n&&(x(0,"button",18),B(1,"Iniciar Sesi\xf3n"),k())}function nge(n,e){1&n&&(x(0,"span",19),B(1,"Hola Admin"),k())}function rge(n,e){if(1&n){const t=Ol();x(0,"button",20),yt("click",function(){return ma(t),ya(gi(2).logOut())}),B(1,"Cerrar Sesi\xf3n"),k()}}function ige(n,e){if(1&n&&(x(0,"nav",21)(1,"div",3)(2,"a",4),B(3," ECommerceAdmin"),k(),x(4,"button",5),Ce(5,"span",6),k(),x(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",22),B(10,"Lista Productos"),k()(),x(11,"li",9)(12,"a",23),B(13,"Registro Productos"),k()()(),x(14,"form",13)(15,"div",14),gr(16,tge,2,0,"button",15),k(),x(17,"div",14),gr(18,nge,2,0,"span",16),k(),x(19,"div",14),gr(20,rge,2,0,"button",17),k()()()()()),2&n){const t=gi();pe(16),mt("ngIf",t.botonLogIn),pe(2),mt("ngIf",t.botonLogOut),pe(2),mt("ngIf",t.botonLogOut)}}Xc.\u0275fac=function(e){return new(e||Xc)},Xc.\u0275mod=Ht({type:Xc}),Xc.\u0275inj=Ft({imports:[wy.forRoot(Ype),wy]});class Np{constructor(e,t,r){this.userService=e,this.router=t,this.productosData=r,this.modoAdmin=!1,this.modoUser=!0,this.botonLogIn=!0,this.botonLogOut=!1,this.productos=[],this.carrito=[]}logOut(){this.userService.logout().then(()=>{localStorage.setItem("status","logOut"),localStorage.setItem("User","Invitado"),location.reload()}).catch(e=>console.log(e))}ngOnInit(){this.holaUser=localStorage.getItem("User"),"logIn"!=localStorage.getItem("status")?(this.botonLogIn=!0,this.botonLogOut=!1):(this.botonLogIn=!1,this.botonLogOut=!0),"admin@hotmail.com"==localStorage.getItem("User")&&"logIn"==localStorage.getItem("status")?(console.log("admin logueado"),localStorage.setItem("modo","Admin"),this.modoAdmin=!0,this.modoUser=!1):(localStorage.setItem("modo","User"),this.modoAdmin=!1,this.modoUser=!0),this.productosData.getProductos().subscribe(e=>{this.productos=e,this.cantidadCarrito()})}cantidadCarrito(){for(let e=0;e<this.productos.length;e++){let t,r;r=localStorage.getItem(`${this.productos[e].id}`),r=JSON.parse(r),null!=r&&(t=r.precio*r.cantidad,r.precioTotal=t,this.carrito.push(r))}this.cantidad=this.carrito.length,console.log(this.cantidad),console.log(this.carrito)}}Np.\u0275fac=function(e){return new(e||Np)(A(jo),A(Et),A(si))},Np.\u0275cmp=Ln({type:Np,selectors:[["app-header"]],decls:2,vars:2,consts:[["class","navbar navbar-expand-lg bg-danger",4,"ngIf"],["class","navbar navbar-expand-lg bg-primary",4,"ngIf"],[1,"navbar","navbar-expand-lg","bg-danger"],[1,"container-fluid"],["href","#",1,"navbar-brand","text-white","p-1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item","p-1"],["routerLink","/inicio",1,"nav-link","text-white","text-white"],["routerLink","/productos",1,"nav-link","text-white"],["routerLink","/carrito",1,"nav-link","text-white"],["role","search",1,"d-flex"],[1,"p-1"],["class","btn btn-outline-light","routerLink","/login","type","button",4,"ngIf"],["class","btn btn-link text-white","style","text-decoration: none;",4,"ngIf"],["class","btn btn-outline-light","type","button",3,"click",4,"ngIf"],["routerLink","/login","type","button",1,"btn","btn-outline-light"],[1,"btn","btn-link","text-white",2,"text-decoration","none"],["type","button",1,"btn","btn-outline-light",3,"click"],[1,"navbar","navbar-expand-lg","bg-primary"],["routerLink","/listaProductos",1,"nav-link","text-white"],["routerLink","/registroProductos",1,"nav-link","text-white"]],template:function(e,t){1&e&&(gr(0,ege,24,3,"nav",0),gr(1,ige,21,3,"nav",1)),2&e&&(mt("ngIf",t.modoUser),pe(1),mt("ngIf",t.modoAdmin))},dependencies:[AL,Wi,Ip,yp,Bv],styles:[".boton2-wsp[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;line-height:63px;bottom:25px;right:25px;background:#198754;color:#fff;border-radius:50px;text-align:center;font-size:35px;box-shadow:0 1px 10px #0000004d;z-index:100;transition:all .3s ease}.boton2-wsp[_ngcontent-%COMP%]:hover{background:#157347}.boton3-wsp[_ngcontent-%COMP%]{text-decoration:none;position:fixed;width:25px;height:25px;line-height:25px;bottom:70px;right:25px;background:#dc3545;color:#fff;border-radius:50px;text-align:center;font-size:15px;box-shadow:0 1px 10px #0000004d;z-index:100;transition:all .3s ease}@media only screen and (min-width:320px) and (max-width:768px){.boton2-wsp[_ngcontent-%COMP%]{width:63px;height:63px;line-height:66px}.boton3-wsp[_ngcontent-%COMP%]{width:25px;height:25px;line-height:25px}}"]});class Rp{constructor(){this.title="eCommerce"}}Rp.\u0275fac=function(e){return new(e||Rp)},Rp.\u0275cmp=Ln({type:Rp,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&Ce(0,"app-header")(1,"router-outlet")},dependencies:[cy,Np]});class Zc{}Zc.\u0275fac=function(e){return new(e||Zc)},Zc.\u0275mod=Ht({type:Zc}),Zc.\u0275inj=Ft({imports:[OC,wy,jW,HW]});class Jc{}Jc.\u0275fac=function(e){return new(e||Jc)},Jc.\u0275mod=Ht({type:Jc}),Jc.\u0275inj=Ft({imports:[OC,jW,HW,wy]});const ed_firebase={projectId:"angular2023-ca639",appId:"1:932222907957:web:0355cdec89e7b3760f237c",storageBucket:"angular2023-ca639.appspot.com",apiKey:"AIzaSyBZnC24YBIV0hEDZoqpgr8PiJlf3Br8X0k",authDomain:"angular2023-ca639.firebaseapp.com",messagingSenderId:"932222907957"},GW="@firebase/database";let nk="";class oge{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Gh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class age{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ns(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const WW=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new oge(e)}}catch{}return new age},Mu=WW("localStorage"),rk=WW("sessionStorage"),td=new ja("@firebase/database"),qW=function(){let n=1;return function(){return n++}}(),KW=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,V(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new nte;t.update(e);const r=t.digest();return by.encodeByteArray(r)},Pp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Pp.apply(null,r):e+="object"==typeof r?Dn(r):r,e+=" "}return e};let Nu=null,QW=!0;const dn=function(...n){if(!0===QW&&(QW=!1,null===Nu&&!0===rk.get("logging_enabled")&&function(n,e){V(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(td.logLevel=Me.VERBOSE,Nu=td.log.bind(td),e&&rk.set("logging_enabled",!0)):"function"==typeof n?Nu=n:(Nu=null,rk.remove("logging_enabled"))}(!0)),Nu){const e=Pp.apply(null,n);Nu(e)}},Op=function(n){return function(...e){dn(n,...e)}},ik=function(...n){const e="FIREBASE INTERNAL ERROR: "+Pp(...n);td.error(e)},is=function(...n){const e=`FIREBASE FATAL ERROR: ${Pp(...n)}`;throw td.error(e),new Error(e)},Wn=function(...n){const e="FIREBASE WARNING: "+Pp(...n);td.warn(e)},Hv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ho="[MIN_NAME]",Xs="[MAX_NAME]",Ru=function(n,e){if(n===e)return 0;if(n===Ho||e===Xs)return-1;if(e===Ho||n===Xs)return 1;{const t=JW(n),r=JW(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},cge=function(n,e){return n===e?0:n<e?-1:1},Fp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Dn(e))},sk=function(n){if("object"!=typeof n||null===n)return Dn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Dn(e[r]),t+=":",t+=sk(n[e[r]]);return t+="}",t},XW=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function hn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const ZW=function(n){V(!Hv(n),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const l=[];for(u=52;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const c=l.join("");let d="";for(u=0;u<64;u+=8){let p=parseInt(c.substr(u,8),2).toString(16);1===p.length&&(p="0"+p),d+=p}return d.toLowerCase()},pge=new RegExp("^-?(0*)\\d{1,10}$"),JW=function(n){if(pge.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},nd=function(n){try{n()}catch(e){setTimeout(()=>{throw Wn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Lp=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class _ge{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vge{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}}let Vp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const iq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aq="websocket",uq="long_polling";class ak{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function lq(n,e,t){let r;if(V("string"==typeof e,"typeof type must == string"),V("object"==typeof t,"typeof params must == object"),e===aq)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==uq)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function wge(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return hn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class bge{constructor(){this.counters_={}}incrementCounter(e,t=1){Ns(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return jee(this.counters_)}}const uk={},lk={};function ck(n){const e=n.toString();return uk[e]||(uk[e]=new bge),uk[e]}class Cge{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Go{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Op(e),this.stats_=ck(t),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),lq(t,uq,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Cge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dk((...s)=>{const[o,a,u,l,c]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&iq.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Go.forceAllow_=!0}static forceDisallow(){Go.forceDisallow_=!0}static isAvailable(){return!(!Go.forceAllow_&&(Go.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=wV(t),i=XW(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Dn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dk{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qW(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=dk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dn("frame writing exception"),a.stack&&dn(a.stack),dn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let zv=null;typeof MozWebSocket<"u"?zv=MozWebSocket:typeof WebSocket<"u"&&(zv=WebSocket);let rd=(()=>{class n{constructor(t,r,i,s,o,a,u){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Op(this.connId),this.stats_=ck(r),this.connURL=n.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&iq.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),lq(t,aq,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mu.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new zv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==zv&&!n.forceDisallow_}static previouslyFailed(){return Mu.isInMemoryStorage||!0===Mu.get("previous_websocket_failure")}markConnectionHealthy(){Mu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Gh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(V(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Dn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=XW(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),mq=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Go,rd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=rd&&rd.isAvailable();let i=r&&!rd.previouslyFailed();if(t.webSocketOnly&&(r||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[rd];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Cq{constructor(e,t,r,i,s,o,a,u,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Op("c:"+this.id+":"),this.transportManager_=new mq(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Lp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Fp("t",e),r=Fp("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Fp("t",e),r=Fp("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Fp("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ik("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ik("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Lp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Eq{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Dq{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){V(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Wv extends Dq{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wv}getInitialEvent(e){return V("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ge{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function je(){return new Ge("")}function we(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function zo(n){return n.pieces_.length-n.pieceNum_}function et(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ge(n.pieces_,e)}function fk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Up(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Aq(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ge(e,0)}function ft(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ge(t,0)}function be(n){return n.pieceNum_>=n.pieces_.length}function lr(n,e){const t=we(n),r=we(e);if(null===t)return e;if(t===r)return lr(et(n),et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function pk(n,e){if(zo(n)!==zo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function oi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(zo(n)>zo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Wge{constructor(e,t){this.errorPrefix_=t,this.parts_=Up(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xy(this.parts_[r]);xq(this)}}function xq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pu(n))}function Pu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gk extends Dq{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gk}getInitialEvent(e){return V("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Bp=1e3;let Kv,Ou=(()=>{class n extends Eq{constructor(t,r,i,s,o,a,u,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Op("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Wv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Dn(o)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new tc,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),V(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,u=>{const l=u.d,c=u.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",u),"ok"!==c&&this.removeListen_(i,s),t.onComplete&&t.onComplete(c,l))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Ns(t,"w")){const i=nc(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Dy(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=Dy(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),V(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Dn(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ik("Unrecognized action received from server: "+Dn(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return v(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let u=!1,l=null;const c=function(){l?l.close():(u=!0,s())};t.realtime_={close:c,sendRequest:function(g){V(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(g)}};const p=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[g,y]=yield Promise.all([t.authTokenProvider_.getToken(p),t.appCheckTokenProvider_.getToken(p)]);u?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),t.authToken_=g&&g.accessToken,t.appCheckToken_=y&&y.token,l=new Cq(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,w=>{Wn(w+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(g){t.log_("Failed to get token: "+g),u||(t.repoInfo_.nodeAdmin&&Wn(g),c())}}})()}interrupt(t){dn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){dn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],EE(this.interruptReasons_)&&(this.reconnectDelay_=Bp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>sk(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Ge(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){dn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){dn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+nk.replace(/\./g,"-")]=1,bE()?t["framework.cordova"]=1:TV()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Wv.getInstance().currentlyOnline();return EE(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class De{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new De(e,t)}}class qv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new De(Ho,e),i=new De(Ho,t);return 0!==this.compare(r,i)}minPost(){return De.MIN}}class Nq extends qv{static get __EMPTY_NODE(){return Kv}static set __EMPTY_NODE(e){Kv=e}compare(e,t){return Ru(e.name,t.name)}isDefinedOn(e){throw ec("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return De.MIN}maxPost(){return new De(Xs,Kv)}makePost(e,t){return V("string"==typeof e,"KeyIndex indexValue must always be a string."),new De(e,Kv)}toString(){return".key"}}const ss=new Nq;class Qv{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yk,Ei=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Er.EMPTY_NODE,this.right=o??Er.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Er.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Er.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Er{constructor(e,t=Er.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Er(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ei.BLACK,null,null))}remove(e){return new Er(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ei.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qv(this.root_,null,this.comparator_,!0,e)}}function eme(n,e){return Ru(n.name,e.name)}function mk(n,e){return Ru(n,e)}Er.EMPTY_NODE=new class Jge{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ei(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Rq=function(n){return"number"==typeof n?"number:"+ZW(n):"string:"+n},Pq=function(n){if(n.isLeafNode()){const e=n.val();V("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ns(e,".sv"),"Priority must be a string or number.")}else V(n===yk||n.isEmpty(),"priority of unexpected type.");V(n===yk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Oq,Fq,Lq,id=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,V(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Pq(this.priorityNode_)}static set __childrenNodeConstructor(t){Oq=t}static get __childrenNodeConstructor(){return Oq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return be(t)?this:".priority"===we(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=we(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(V(".priority"!==i||1===zo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Rq(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?ZW(this.value_):this.value_,this.lazyHash_=KW(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(V(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return V(s>=0,"Unknown leaf type: "+r),V(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nt=new class ime extends qv{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ru(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return De.MIN}maxPost(){return new De(Xs,new id("[PRIORITY-POST]",Lq))}makePost(e,t){const r=Fq(e);return new De(t,new id("[PRIORITY-POST]",r))}toString(){return".priority"}},sme=Math.log(2);class ome{constructor(e){this.count=parseInt(Math.log(e+1)/sme,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yv=function(n,e,t,r){n.sort(e);const i=function(u,l){const c=l-u;let d,p;if(0===c)return null;if(1===c)return d=n[u],p=t?t(d):d,new Ei(p,d.node,Ei.BLACK,null,null);{const g=parseInt(c/2,10)+u,y=i(u,g),w=i(g+1,l);return d=n[g],p=t?t(d):d,new Ei(p,d.node,Ei.BLACK,y,w)}},a=function(u){let l=null,c=null,d=n.length;const p=function(y,w){const b=d-y,D=d;d-=y;const M=i(b+1,D),I=n[b],$=t?t(I):I;g(new Ei($,I.node,w,null,M))},g=function(y){l?(l.left=y,l=y):(c=y,l=y)};for(let y=0;y<u.count;++y){const w=u.nextBitIsOne(),b=Math.pow(2,u.count-(y+1));w?p(b,Ei.BLACK):(p(b,Ei.BLACK),p(b,Ei.RED))}return c}(new ome(n.length));return new Er(r||e,a)};let _k;const sd={};class Zs{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return V(sd&&nt,"ChildrenNode.ts has not been loaded"),_k=_k||new Zs({".priority":sd},{".priority":nt}),_k}get(e){const t=nc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Er?t:null}hasIndex(e){return Ns(this.indexSet_,e.toString())}addIndex(e,t){V(e!==ss,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(De.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Yv(r,e.getCompare()):sd;const u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;const c=Object.assign({},this.indexes_);return c[u]=a,new Zs(c,l)}addToIndexes(e,t){const r=Ty(this.indexes_,(i,s)=>{const o=nc(this.indexSet_,s);if(V(o,"Missing index implementation for "+s),i===sd){if(o.isDefinedOn(e.node)){const a=[],u=t.getIterator(De.Wrap);let l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),Yv(a,o.getCompare())}return sd}{const a=t.get(e.name);let u=i;return a&&(u=u.remove(new De(e.name,a))),u.insert(e,e.node)}});return new Zs(r,this.indexSet_)}removeFromIndexes(e,t){const r=Ty(this.indexes_,i=>{if(i===sd)return i;{const s=t.get(e.name);return s?i.remove(new De(e.name,s)):i}});return new Zs(r,this.indexSet_)}}let $p,me=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Pq(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $p||($p=new n(new Er(mk),null,Zs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$p}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$p:r}}getChild(t){const r=we(t);return null===r?this:this.getImmediateChild(r).getChild(et(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(V(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new De(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?$p:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=we(t);if(null===i)return r;{V(".priority"!==we(t)||1===zo(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(et(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(nt,(a,u)=>{r[a]=u.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Rq(this.getPriority().val())+":"),this.forEachChild(nt,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":KW(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new De(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new De(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new De(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,De.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,De.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===jp?-1:0}withIndex(t){if(t===ss||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ss||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nt),s=r.getIterator(nt);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===ss?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const jp=new class ame extends me{constructor(){super(new Er(mk),me.EMPTY_NODE,Zs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return me.EMPTY_NODE}isEmpty(){return!1}};function wt(n,e=null){if(null===n)return me.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),V(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new id(n,wt(e));if(n instanceof Array){let t=me.EMPTY_NODE;return hn(n,(r,i)=>{if(Ns(n,r)&&"."!==r.substring(0,1)){const s=wt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(wt(e))}{const t=[];let r=!1;if(hn(n,(o,a)=>{if("."!==o.substring(0,1)){const u=wt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),t.push(new De(o,u)))}}),0===t.length)return me.EMPTY_NODE;const s=Yv(t,eme,o=>o.name,mk);if(r){const o=Yv(t,nt.getCompare());return new me(s,wt(e),new Zs({".priority":o},{".priority":nt}))}return new me(s,wt(e),Zs.Default)}}Object.defineProperties(De,{MIN:{value:new De(Ho,me.EMPTY_NODE)},MAX:{value:new De(Xs,jp)}}),Nq.__EMPTY_NODE=me.EMPTY_NODE,id.__childrenNodeConstructor=me,function tme(n){yk=n}(jp),function rme(n){Lq=n}(jp),function nme(n){Fq=n}(wt);class vk extends qv{constructor(e){super(),this.indexPath_=e,V(!be(e)&&".priority"!==we(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ru(e.name,t.name):s}makePost(e,t){const r=wt(e),i=me.EMPTY_NODE.updateChild(this.indexPath_,r);return new De(t,i)}maxPost(){const e=me.EMPTY_NODE.updateChild(this.indexPath_,jp);return new De(Xs,e)}toString(){return Up(this.indexPath_,0).join("/")}}const wk=new class lme extends qv{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ru(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,t){const r=wt(e);return new De(t,r)}toString(){return".value"}};function Gp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ik{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ho}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new Ik;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Uq(n){const e={};if(n.isDefault())return e;let t;if(n.index_===nt?t="$priority":n.index_===wk?t="$value":n.index_===ss?t="$key":(V(n.index_ instanceof vk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Dn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Dn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Dn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Dn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Dn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Bq(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nt&&(e.i=n.index_.toString()),e}class Zv extends Eq{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Op("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Zv.getListenId_(e,r),a={};this.listens_[o]=a;const u=Uq(e._queryParams);this.restRequest_(s+".json",u,(l,c)=>{let d=c;if(404===l&&(d=null,l=null),null===l&&this.onDataUpdate_(s,d,!1,r),nc(this.listens_,o)===a){let p;p=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(p,null)}})}unlisten(e,t){const r=Zv.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Uq(e._queryParams),r=e._path.toString(),i=new tc;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zh(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Gh(a.responseText)}catch{Wn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&Wn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class yme{constructor(){this.rootNode_=me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Jv(){return{value:null,children:new Map}}function ad(n,e,t){if(be(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=we(e);n.children.has(r)||n.children.set(r,Jv()),ad(n.children.get(r),e=et(e),t)}}function Tk(n,e,t){null!==n.value?t(e,n.value):function _me(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Tk(i,new Ge(e.toString()+"/"+r),t)})}class vme{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Ime{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new vme(e);const r=1e4+2e4*Math.random();Lp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hn(e,(i,s)=>{s>0&&Ns(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Lp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ai=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ai||(ai={})),ai))();function xk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ew{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ai.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(be(this.path)){if(null!=this.affectedTree.value)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ge(e));return new ew(je(),t,this.revert)}}return V(we(this.path)===e,"operationForChild called for unrelated child."),new ew(et(this.path),this.affectedTree,this.revert)}}class Fu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ai.OVERWRITE}operationForChild(e){return be(this.path)?new Fu(this.source,je(),this.snap.getImmediateChild(e)):new Fu(this.source,et(this.path),this.snap)}}class ud{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ai.MERGE}operationForChild(e){if(be(this.path)){const t=this.children.subtree(new Ge(e));return t.isEmpty()?null:t.value?new Fu(this.source,je(),t.value):new ud(this.source,je(),t)}return V(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ud(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wo{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(be(e))return this.isFullyInitialized()&&!this.filtered_;const t=we(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function qp(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,u)=>function Tme(n,e,t){if(null==e.childName||null==t.childName)throw ec("Should only compare child_ events.");const r=new De(e.childName,e.snapshotNode),i=new De(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,u)),o.forEach(a=>{const u=function Dme(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,n.query_))})})}function tw(n,e){return{eventCache:n,serverCache:e}}function Kp(n,e,t,r){return tw(new Wo(e,t,r),n.serverCache)}function jq(n,e,t,r){return tw(n.eventCache,new Wo(e,t,r))}function nw(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kk;class rt{constructor(e,t=(()=>(kk||(kk=new Er(cge)),kk))()){this.value=e,this.children=t}static fromObject(e){let t=new rt(null);return hn(e,(r,i)=>{t=t.set(new Ge(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:je(),value:this.value};if(be(e))return null;{const r=we(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(et(e),t);return null!=s?{path:ft(new Ge(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(be(e))return this;{const t=we(e),r=this.children.get(t);return null!==r?r.subtree(et(e)):new rt(null)}}set(e,t){if(be(e))return new rt(t,this.children);{const r=we(e),s=(this.children.get(r)||new rt(null)).set(et(e),t),o=this.children.insert(r,s);return new rt(this.value,o)}}remove(e){if(be(e))return this.children.isEmpty()?new rt(null):new rt(null,this.children);{const t=we(e),r=this.children.get(t);if(r){const i=r.remove(et(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new rt(null):new rt(this.value,s)}return this}}get(e){if(be(e))return this.value;{const t=we(e),r=this.children.get(t);return r?r.get(et(e)):null}}setTree(e,t){if(be(e))return t;{const r=we(e),s=(this.children.get(r)||new rt(null)).setTree(et(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new rt(this.value,o)}}fold(e){return this.fold_(je(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ft(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,je(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(be(e))return null;{const s=we(e),o=this.children.get(s);return o?o.findOnPath_(et(e),ft(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,je(),t)}foreachOnPath_(e,t,r){if(be(e))return this;{this.value&&r(t,this.value);const i=we(e),s=this.children.get(i);return s?s.foreachOnPath_(et(e),ft(t,i),r):new rt(null)}}foreach(e){this.foreach_(je(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ft(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Di{constructor(e){this.writeTree_=e}static empty(){return new Di(new rt(null))}}function Qp(n,e,t){if(be(e))return new Di(new rt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=lr(i,e);return s=s.updateChild(o,t),new Di(n.writeTree_.set(i,s))}{const i=new rt(t),s=n.writeTree_.setTree(e,i);return new Di(s)}}}function Mk(n,e,t){let r=n;return hn(t,(i,s)=>{r=Qp(r,ft(e,i),s)}),r}function Hq(n,e){if(be(e))return Di.empty();{const t=n.writeTree_.setTree(e,new rt(null));return new Di(t)}}function Nk(n,e){return null!=Vu(n,e)}function Vu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(lr(t.path,e)):null}function Gq(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nt,(r,i)=>{e.push(new De(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new De(r,i.value))}),e}function qo(n,e){if(be(e))return n;{const t=Vu(n,e);return new Di(null!=t?new rt(t):n.writeTree_.subtree(e))}}function Rk(n){return n.writeTree_.isEmpty()}function ld(n,e){return zq(je(),n.writeTree_,e)}function zq(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(V(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=zq(ft(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ft(n,".priority"),r)),t}}function rw(n,e){return Yq(e,n)}function Nme(n,e){if(n.snap)return oi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&oi(ft(n.path,t),e))return!0;return!1}function Pme(n){return n.visible}function Wq(n,e,t){let r=Di.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)oi(t,o)?(a=lr(t,o),r=Qp(r,a,s.snap)):oi(o,t)&&(a=lr(o,t),r=Qp(r,je(),s.snap.getChild(a)));else{if(!s.children)throw ec("WriteRecord should have .snap or .children");if(oi(t,o))a=lr(t,o),r=Mk(r,a,s.children);else if(oi(o,t))if(a=lr(o,t),be(a))r=Mk(r,je(),s.children);else{const u=nc(s.children,we(a));if(u){const l=u.getChild(et(a));r=Qp(r,je(),l)}}}}}return r}function qq(n,e,t,r,i){if(r||i){const s=qo(n.visibleWrites,e);return!i&&Rk(s)?t:i||null!=t||Nk(s,je())?ld(Wq(n.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(oi(l.path,e)||oi(e,l.path))},e),t||me.EMPTY_NODE):null}{const s=Vu(n.visibleWrites,e);if(null!=s)return s;{const o=qo(n.visibleWrites,e);return Rk(o)?t:null!=t||Nk(o,je())?ld(o,t||me.EMPTY_NODE):null}}}function iw(n,e,t,r){return qq(n.writeTree,n.treePath,e,t,r)}function Pk(n,e){return function Ome(n,e,t){let r=me.EMPTY_NODE;const i=Vu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=qo(n.visibleWrites,e);return t.forEachChild(nt,(o,a)=>{const u=ld(qo(s,new Ge(o)),a);r=r.updateImmediateChild(o,u)}),Gq(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return Gq(qo(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Kq(n,e,t,r){return function Fme(n,e,t,r,i){V(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ft(e,t);if(Nk(n.visibleWrites,s))return null;{const o=qo(n.visibleWrites,s);return Rk(o)?i.getChild(t):ld(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function sw(n,e){return function Vme(n,e){return Vu(n.visibleWrites,e)}(n.writeTree,ft(n.treePath,e))}function Ok(n,e,t){return function Lme(n,e,t,r){const i=ft(e,t),s=Vu(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?ld(qo(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Qq(n,e){return Yq(ft(n.treePath,e),n.writeTree)}function Yq(n,e){return{treePath:n,writeTree:e}}class jme{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;V("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),V(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Gp(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function Hp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function od(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw ec("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Gp(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Xq=new class Hme{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Fk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Wo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ok(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Lu(this.viewCache_),s=function $me(n,e,t,r,i,s){return function Ume(n,e,t,r,i,s,o){let a;const u=qo(n.visibleWrites,e),l=Vu(u,je());if(null!=l)a=l;else{if(null==t)return[];a=ld(u,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const c=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=p.getNext();for(;g&&c.length<i;)0!==d(g,r)&&c.push(g),g=p.getNext();return c}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Zq(n,e,t,r,i,s){const o=e.eventCache;if(null!=sw(r,t))return e;{let a,u;if(be(t))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Lu(e),d=Pk(r,l instanceof me?l:me.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=iw(r,Lu(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=we(t);if(".priority"===l){V(1===zo(t),"Can't have a priority with additional path components");const c=o.getNode();u=e.serverCache.getNode();const d=Kq(r,t,c,u);a=null!=d?n.filter.updatePriority(c,d):o.getNode()}else{const c=et(t);let d;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();const p=Kq(r,t,o.getNode(),u);d=null!=p?o.getNode().getImmediateChild(l).updateChild(c,p):o.getNode().getImmediateChild(l)}else d=Ok(r,l,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),l,d,c,i,s):o.getNode()}}return Kp(e,a,o.isFullyInitialized()||be(t),n.filter.filtersNodes())}}function ow(n,e,t,r,i,s,o,a){const u=e.serverCache;let l;const c=o?n.filter:n.filter.getIndexedFilter();if(be(t))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered()){const g=u.getNode().updateChild(t,r);l=c.updateFullNode(u.getNode(),g,null)}else{const g=we(t);if(!u.isCompleteForPath(t)&&zo(t)>1)return e;const y=et(t),b=u.getNode().getImmediateChild(g).updateChild(y,r);l=".priority"===g?c.updatePriority(u.getNode(),b):c.updateChild(u.getNode(),g,b,y,Xq,null)}const d=jq(e,l,u.isFullyInitialized()||be(t),c.filtersNodes());return Zq(n,d,t,i,new Fk(i,d,s),a)}function Lk(n,e,t,r,i,s,o){const a=e.eventCache;let u,l;const c=new Fk(i,e,s);if(be(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Kp(e,l,!0,n.filter.filtersNodes());else{const d=we(t);if(".priority"===d)l=n.filter.updatePriority(e.eventCache.getNode(),r),u=Kp(e,l,a.isFullyInitialized(),a.isFiltered());else{const p=et(t),g=a.getNode().getImmediateChild(d);let y;if(be(p))y=r;else{const w=c.getCompleteChild(d);y=null!=w?".priority"===fk(p)&&w.getChild(Aq(p)).isEmpty()?w:w.updateChild(p,r):me.EMPTY_NODE}u=g.equals(y)?e:Kp(e,n.filter.updateChild(a.getNode(),d,y,p,c,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return u}function Jq(n,e){return n.eventCache.isCompleteForChild(e)}function e3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vk(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,u=e;l=be(t)?r:new rt(null).setTree(t,r);const c=e.serverCache.getNode();return l.children.inorderTraversal((d,p)=>{if(c.hasChild(d)){const y=e3(0,e.serverCache.getNode().getImmediateChild(d),p);u=ow(n,u,new Ge(d),y,i,s,o,a)}}),l.children.inorderTraversal((d,p)=>{const g=!e.serverCache.isCompleteForChild(d)&&null===p.value;if(!c.hasChild(d)&&!g){const w=e3(0,e.serverCache.getNode().getImmediateChild(d),p);u=ow(n,u,new Ge(d),w,i,s,o,a)}}),u}function tye(n,e){const t=Lu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!be(e)&&!t.getImmediateChild(we(e)).isEmpty())?t.getChild(e):null}function r3(n,e,t,r){e.type===ai.MERGE&&null!==e.source.queryId&&(V(Lu(n.viewCache_),"We should always have a full cache before handling merges"),V(nw(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Wme(n,e,t,r,i){const s=new jme;let o,a;if(t.type===ai.OVERWRITE){const l=t;l.source.fromUser?o=Lk(n,e,l.path,l.snap,r,i,s):(V(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!be(l.path),o=ow(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===ai.MERGE){const l=t;l.source.fromUser?o=function Kme(n,e,t,r,i,s,o){let a=e;return r.foreach((u,l)=>{const c=ft(t,u);Jq(e,we(c))&&(a=Lk(n,a,c,l,i,s,o))}),r.foreach((u,l)=>{const c=ft(t,u);Jq(e,we(c))||(a=Lk(n,a,c,l,i,s,o))}),a}(n,e,l.path,l.children,r,i,s):(V(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Vk(n,e,l.path,l.children,r,i,a,s))}else if(t.type===ai.ACK_USER_WRITE){const l=t;o=l.revert?function Xme(n,e,t,r,i,s){let o;if(null!=sw(r,t))return e;{const a=new Fk(r,e,i),u=e.eventCache.getNode();let l;if(be(t)||".priority"===we(t)){let c;if(e.serverCache.isFullyInitialized())c=iw(r,Lu(e));else{const d=e.serverCache.getNode();V(d instanceof me,"serverChildren would be complete if leaf node"),c=Pk(r,d)}l=n.filter.updateFullNode(u,c,s)}else{const c=we(t);let d=Ok(r,c,e.serverCache);null==d&&e.serverCache.isCompleteForChild(c)&&(d=u.getImmediateChild(c)),l=null!=d?n.filter.updateChild(u,c,d,et(t),a,s):e.eventCache.getNode().hasChild(c)?n.filter.updateChild(u,c,me.EMPTY_NODE,et(t),a,s):u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=iw(r,Lu(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=sw(r,je()),Kp(e,l,o,n.filter.filtersNodes())}}(n,e,l.path,r,i,s):function Qme(n,e,t,r,i,s,o){if(null!=sw(i,t))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(be(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return ow(n,e,t,u.getNode().getChild(t),i,s,a,o);if(be(t)){let l=new rt(null);return u.getNode().forEachChild(ss,(c,d)=>{l=l.set(new Ge(c),d)}),Vk(n,e,t,l,i,s,a,o)}return e}{let l=new rt(null);return r.foreach((c,d)=>{const p=ft(t,c);u.isCompleteForPath(p)&&(l=l.set(c,u.getNode().getChild(p)))}),Vk(n,e,t,l,i,s,a,o)}}(n,e,l.path,l.affectedTree,r,i,s)}else{if(t.type!==ai.LISTEN_COMPLETE)throw ec("Unknown operation type: "+t.type);o=function Yme(n,e,t,r,i){const s=e.serverCache;return Zq(n,jq(e,s.getNode(),s.isFullyInitialized()||be(t),s.isFiltered()),t,r,Xq,i)}(n,e,t.path,r,s)}const u=s.getChanges();return function qme(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=nw(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function Vq(n){return{type:"value",snapshotNode:n}}(nw(e)))}}(e,o,u),{viewCache:o,changes:u}}(n.processor_,i,e,t,r);return function zme(n,e){V(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),V(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function i3(n,e,t,r){return function Eme(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function cme(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),qp(n,i,"child_removed",e,r,t),qp(n,i,"child_added",e,r,t),qp(n,i,"child_moved",s,r,t),qp(n,i,"child_changed",e,r,t),qp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let aw,lw;function Uk(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return V(null!=s,"SyncTree gave us an op for an invalid query."),r3(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(r3(o,e,t,r));return s}}function Ko(n,e){let t=null;for(const r of n.views.values())t=t||tye(r,e);return t}class c3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rt(null),this.pendingWriteTree_=function Bme(){return{visibleWrites:Di.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bk(n,e,t,r,i){return function Ame(n,e,t,r,i){V(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Qp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?cd(n,new Fu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Yo(n,e,t=!1){const r=function kme(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Mme(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);V(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Nme(a,r.path)?i=!1:oi(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Rme(n){n.visibleWrites=Wq(n.allWrites,Pme,je()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Hq(n.visibleWrites,r.path):hn(r.children,u=>{n.visibleWrites=Hq(n.visibleWrites,ft(r.path,u))}),!0))}(n.pendingWriteTree_,e)){let s=new rt(null);return null!=r.snap?s=s.set(je(),!0):hn(r.children,o=>{s=s.set(new Ge(o),!0)}),cd(n,new ew(r.path,s,t))}return[]}function Yp(n,e,t){return cd(n,new Fu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function dw(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ko(a,lr(o,e));if(l)return l});return qq(i,e,s,t,!0)}function cd(n,e){return h3(e,n.syncPointTree_,null,rw(n.pendingWriteTree_,je()))}function h3(n,e,t,r){if(be(n.path))return f3(n,e,t,r);{const i=e.get(je());null==t&&null!=i&&(t=Ko(i,je()));let s=[];const o=we(n.path),a=n.operationForChild(o),u=e.children.get(o);if(u&&a){const l=t?t.getImmediateChild(o):null,c=Qq(r,o);s=s.concat(h3(a,u,l,c))}return i&&(s=s.concat(Uk(i,n,r,t))),s}}function f3(n,e,t,r){const i=e.get(je());null==t&&null!=i&&(t=Ko(i,je()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=t?t.getImmediateChild(o):null,l=Qq(r,o),c=n.operationForChild(o);c&&(s=s.concat(f3(c,a,u,l)))}),i&&(s=s.concat(Uk(i,n,r,t))),s}function jk(n,e){return n.tagToQueryMap.get(e)}function Hk(n){const e=n.indexOf("$");return V(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ge(n.substr(0,e))}}function Gk(n,e,t){const r=n.syncPointTree_.get(e);return V(r,"Missing sync point for query tag that we're tracking"),Uk(r,t,rw(n.pendingWriteTree_,e),null)}class zk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new zk(t)}node(){return this.node_}}class Wk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ft(this.path_,e);return new Wk(this.syncTree_,t)}node(){return dw(this.syncTree_,this.path_)}}const g3=function(n,e,t){return n&&"object"==typeof n?(V(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Cye(n[".sv"],e,t):"object"==typeof n[".sv"]?Eye(n[".sv"],e):void V(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Cye=function(n,e,t){if("timestamp"===n)return t.timestamp;V(!1,"Unexpected server value: "+n)},Eye=function(n,e,t){n.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&V(!1,"Unexpected increment value: "+r);const i=e.node();if(V(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},qk=function(n,e,t){return Kk(n,new zk(e),t)};function Kk(n,e,t){const r=n.getPriority().val(),i=g3(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=g3(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new id(a,wt(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new id(i))),o.forEachChild(nt,(a,u)=>{const l=Kk(u,e.getImmediateChild(a),t);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}class Qk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function fw(n,e){let t=e instanceof Ge?e:new Ge(e),r=n,i=we(t);for(;null!==i;){const s=nc(r.node.children,i)||{children:{},childCount:0};r=new Qk(i,r,s),t=et(t),i=we(t)}return r}function Uu(n){return n.node.value}function Yk(n,e){n.node.value=e,Xk(n)}function y3(n){return n.node.childCount>0}function pw(n,e){hn(n.node.children,(t,r)=>{e(new Qk(t,n,r))})}function _3(n,e,t,r){t&&!r&&e(n),pw(n,i=>{_3(i,e,!0,r)}),t&&r&&e(n)}function Jp(n){return new Ge(null===n.parent?n.name:Jp(n.parent)+"/"+n.name)}function Xk(n){null!==n.parent&&function Sye(n,e,t){const r=function Dye(n){return void 0===Uu(n)&&!y3(n)}(t),i=Ns(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Xk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Xk(n))}(n.parent,n.name,n)}const Aye=/[\[\].#$\/\u0000-\u001F\u007F]/,xye=/[\[\].#$\u0000-\u001F\u007F]/,Zk=10485760,gw=function(n){return"string"==typeof n&&0!==n.length&&!Aye.test(n)},tg=function(n,e,t){const r=t instanceof Ge?new Wge(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pu(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pu(r)+" with contents = "+e.toString());if(Hv(e))throw new Error(n+"contains "+e.toString()+" "+Pu(r));if("string"==typeof e&&e.length>Zk/3&&xy(e)>Zk)throw new Error(n+"contains a string greater than "+Zk+" utf8 bytes "+Pu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(hn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!gw(o)))throw new Error(n+" contains an invalid key ("+o+") "+Pu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function qge(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=xy(e),xq(n)})(r,o),tg(n,a,r),function Kge(n){const e=n.parts_.pop();n.byteLength_-=xy(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Pu(r)+" in addition to actual children.")}},b3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!xye.test(n)}(n)}(t))throw new Error(function Ay(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Rye{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hr(n,e,t){(function mw(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!pk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function C3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Pye(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>oi(r,e)||oi(e,r))}function Pye(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Nu&&dn("event: "+t.toString()),nd(r)}}}class Fye{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rye,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jv(),this.transactionQueueTree_=new Qk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function D3(n){const t=n.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function rg(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:D3(n)})}function T3(n,e,t,r,i){n.dataUpdateCount++;const s=new Ge(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const u=Ty(t,l=>wt(l));o=function mye(n,e,t,r){const i=jk(n,r);if(i){const s=Hk(i),o=s.path,a=s.queryId,u=lr(o,e),l=rt.fromObject(t);return Gk(n,o,new ud(xk(a),u,l))}return[]}(n.serverSyncTree_,s,u,i)}else{const u=wt(t);o=function d3(n,e,t,r){const i=jk(n,r);if(null!=i){const s=Hk(i),o=s.path,a=s.queryId,u=lr(o,e);return Gk(n,o,new Fu(xk(a),u,t))}return[]}(n.serverSyncTree_,s,u,i)}else if(r){const u=Ty(t,l=>wt(l));o=function fye(n,e,t){const r=rt.fromObject(t);return cd(n,new ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,u)}else{const u=wt(t);o=Yp(n.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=hd(n,s)),Hr(n.eventQueue_,a,o)}function S3(n,e){tM(n,"connected",e),!1===e&&function $ye(n){dd(n,"onDisconnectEvents");const e=rg(n),t=Jv();Tk(n.onDisconnect_,je(),(i,s)=>{const o=function(n,e,t,r){return Kk(e,new Wk(t,n),r)}(i,s,n.serverSyncTree_,e);ad(t,i,o)});let r=[];Tk(t,je(),(i,s)=>{r=r.concat(Yp(n.serverSyncTree_,i,s));const o=function sM(n,e){const t=Jp(k3(n,e)),r=fw(n.transactionQueueTree_,e);return function Tye(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{oM(n,i)}),oM(n,r),_3(r,i=>{oM(n,i)}),t}(n,i);hd(n,o)}),n.onDisconnect_=Jv(),Hr(n.eventQueue_,je(),r)}(n)}function tM(n,e,t){const r=new Ge("/.info/"+e),i=wt(t);n.infoData_.updateSnapshot(r,i);const s=Yp(n.infoSyncTree_,r,i);Hr(n.eventQueue_,r,s)}function yw(n){return n.nextWriteId_++}function dd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function iM(n,e,t){return dw(n.serverSyncTree_,e,t)||me.EMPTY_NODE}function _w(n,e=n.transactionQueueTree_){if(e||vw(n,e),Uu(e)){const t=M3(n,e);V(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Kye(n,e,t){const r=t.map(l=>l.currentWriteId),i=iM(n,e,r);let s=i;const o=i.hash();for(let l=0;l<t.length;l++){const c=t[l];V(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=lr(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;n.server_.put(u.toString(),a,l=>{dd(n,"transaction put response",{path:u.toString(),status:l});let c=[];if("ok"===l){const d=[];for(let p=0;p<t.length;p++)t[p].status=2,c=c.concat(Yo(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&d.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();vw(n,fw(n.transactionQueueTree_,e)),_w(n,n.transactionQueueTree_),Hr(n.eventQueue_,e,c);for(let p=0;p<d.length;p++)nd(d[p])}else{if("datastale"===l)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Wn("transaction at "+u.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}hd(n,e)}},o)}(n,Jp(e),t)}else y3(e)&&pw(e,t=>{_w(n,t)})}function hd(n,e){const t=k3(n,e),r=Jp(t);return function Qye(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],l=lr(t,u.path);let d,c=!1;if(V(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,d=u.abortReason,i=i.concat(Yo(n.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,d="maxretry",i=i.concat(Yo(n.serverSyncTree_,u.currentWriteId,!0));else{const p=iM(n,u.path,o);u.currentInputSnapshot=p;const g=e[a].update(p.val());if(void 0!==g){tg("transaction failed: Data returned ",g,u.path);let y=wt(g);"object"==typeof g&&null!=g&&Ns(g,".priority")||(y=y.updatePriority(p.getPriority()));const b=u.currentWriteId,D=rg(n),M=qk(y,p,D);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=M,u.currentWriteId=yw(n),o.splice(o.indexOf(b),1),i=i.concat(Bk(n.serverSyncTree_,u.path,M,u.currentWriteId,u.applyLocally)),i=i.concat(Yo(n.serverSyncTree_,b,!0))}else c=!0,d="nodata",i=i.concat(Yo(n.serverSyncTree_,u.currentWriteId,!0))}Hr(n.eventQueue_,t,i),i=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}vw(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)nd(r[a]);_w(n,n.transactionQueueTree_)}(n,M3(n,t),r),r}function k3(n,e){let t,r=n.transactionQueueTree_;for(t=we(e);null!==t&&void 0===Uu(r);)r=fw(r,t),t=we(e=et(e));return r}function M3(n,e){const t=[];return N3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function N3(n,e,t){const r=Uu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);pw(e,i=>{N3(n,i,t)})}function vw(n,e){const t=Uu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Yk(e,t.length>0?t:void 0)}pw(e,r=>{vw(n,r)})}function oM(n,e){const t=Uu(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(V(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(V(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Yo(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Yk(e,void 0):t.length=s+1,Hr(n.eventQueue_,Jp(e),i);for(let o=0;o<r.length;o++)nd(r[o])}}const aM=function(n,e){const t=Zye(n),r=t.namespace;return"firebase.com"===t.domain&&is(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&is("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ak(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ge(t.pathString)}},Zye=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof n){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let c=n.indexOf("/");-1===c&&(c=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(c,d)),c<d&&(i=function Yye(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(c,d)));const p=function Xye(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wn(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(l+1),10)):l=e.length;const g=e.slice(0,l);if("localhost"===g.toLowerCase())t="localhost";else if(g.split(".").length<=2)t=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:u,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class Gr{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return be(this._path)?null:fk(this._path)}get ref(){return new Ti(this._repo,this._path)}get _queryIdentifier(){const e=Bq(this._queryParams),t=sk(e);return"{}"===t?"default":t}get _queryObject(){return Bq(this._queryParams)}isEqual(e){if(!((e=sn(e))instanceof Gr))return!1;const t=this._repo===e._repo,r=pk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gge(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ti extends Gr{constructor(e,t){super(e,t,new Ik,!1)}get parent(){const e=Aq(this._path);return null===e?null:new Ti(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function iye(n){V(!aw,"__referenceConstructor has already been defined"),aw=n})(Ti),function lye(n){V(!lw,"__referenceConstructor has already been defined"),lw=n}(Ti);const lM={};class __e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Lye(n,e,t){if(n.stats_=ck(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Zv(n.repoInfo_,(r,i,s,o)=>{T3(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>S3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ou(n.repoInfo_,e,(r,i,s,o)=>{T3(n,r,i,s,o)},r=>{S3(n,r)},r=>{!function Vye(n,e){hn(e,(t,r)=>{tM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Ige(n,e){const t=n.toString();return lk[t]||(lk[t]=e()),lk[t]}(n.repoInfo_,()=>new Ime(n.stats_,n.server_)),n.infoData_=new yme,n.infoSyncTree_=new c3({startListening:(r,i,s,o)=>{let a=[];const u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=Yp(n.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),tM(n,"connected",!1),n.serverSyncTree_=new c3({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,u)=>{const l=o(a,u);Hr(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ti(this._repo,je())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function g_e(n,e){const t=lM[e];(!t||t[n.key]!==n)&&is(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function x3(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&is("Cannot call "+e+" on a deleted database.")}}function v_e(n=Ry(),e){const t=za(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=CV("database");r&&function w_e(n,e,t,r={}){(n=sn(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&is("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&is('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vp(Vp.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:DV(r.mockUserToken,n.app.options.projectId);s=new Vp(o)}!function f_e(n,e,t,r){n.repoInfo_=new ak(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}Ou.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ou.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function b_e(n){(function sge(n){nk=n})(Wa),jn(new Tn("database",(e,{instanceIdentifier:t})=>function p_e(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||is("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u,l,o=aM(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=aM(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const c=i&&u?new Vp(Vp.OWNER):new vge(n.name,n.options,e);b3("Invalid Firebase Database URL",o),be(o.path)||is("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function m_e(n,e,t,r){let i=lM[e.name];i||(i={},lM[e.name]=i);let s=i[n.toURLString()];return s&&is("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Fye(n,!1,t,r),i[n.toURLString()]=s,s}(a,n,c,new _ge(n.name,t));return new __e(d,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ot(GW,"0.14.1",n),ot(GW,"0.14.1","esm2017")}();class cM{constructor(e){return e}}const $3="database",dM=new K("angularfire2.database-instances");function T_e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cM(r)}}const S_e={provide:class E_e{constructor(){return $y($3)}},deps:[[new Lt,dM]]},A_e={provide:cM,useFactory:function D_e(n,e){const t=By($3,n,e);return t&&new cM(t)},deps:[[new Lt,dM],Ja]};let x_e=(()=>{class n{constructor(){ot("angularfire",Xh.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Ft({providers:[A_e,S_e]}),n})();const M_e=Us(v_e,!0);class pd{}pd.\u0275fac=function(e){return new(e||pd)},pd.\u0275mod=Ht({type:pd,bootstrap:[Rp]}),pd.\u0275inj=Ft({imports:[XX,Xc,Jc,Zc,function use(n,...e){return{ngModule:ase,providers:[{provide:bD,useFactory:ose(n),multi:!0,deps:[st,tr,jy,...e]}]}}(()=>lse(ed_firebase)),function $ue(n,...e){return{ngModule:Bue,providers:[{provide:FS,useFactory:Lue(n),multi:!0,deps:[st,tr,jy,Hy,[new Lt,Yy],...e]}]}}(()=>Gue()),function k_e(n,...e){return{ngModule:x_e,providers:[{provide:dM,useFactory:T_e(n),multi:!0,deps:[st,tr,jy,Hy,[new Lt,OS],[new Lt,Yy],...e]}]}}(()=>M_e()),function Ofe(n,...e){return{ngModule:Pfe,providers:[{provide:F1,useFactory:Mfe(n),multi:!0,deps:[st,tr,jy,Hy,[new Lt,OS],[new Lt,Yy],...e]}]}}(()=>Lfe())]}),YX().bootstrapModule(pd).catch(n=>console.error(n))},226:function(gd){gd.exports=function(){"use strict";var ae={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const xe=h=>{const f={};for(const m in h)f[h[m]]="swal2-"+h[m];return f},T=xe(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),us=xe(["success","warning","info","question","error"]),Jo="SweetAlert2:",ju=h=>h.charAt(0).toUpperCase()+h.slice(1),fn=h=>{console.warn(`${Jo} ${"object"==typeof h?h.join(" "):h}`)},Si=h=>{console.error(`${Jo} ${h}`)},Ai=[],og=(h,f)=>{(h=>{Ai.includes(h)||(Ai.push(h),fn(h))})(`"${h}" is deprecated and will be removed in the next major release. Please use "${f}" instead.`)},ea=h=>"function"==typeof h?h():h,md=h=>h&&"function"==typeof h.toPromise,ta=h=>md(h)?h.toPromise():Promise.resolve(h),yd=h=>h&&Promise.resolve(h)===h,Ot=()=>document.body.querySelector(`.${T.container}`),Dr=h=>{const f=Ot();return f?f.querySelector(h):null},Jt=h=>Dr(`.${h}`),Ue=()=>Jt(T.popup),ls=()=>Jt(T.icon),Gu=()=>Jt(T.title),zu=()=>Jt(T["html-container"]),Js=()=>Jt(T.image),eo=()=>Jt(T["progress-steps"]),Wu=()=>Jt(T["validation-message"]),Kn=()=>Dr(`.${T.actions} .${T.confirm}`),cs=()=>Dr(`.${T.actions} .${T.cancel}`),zr=()=>Dr(`.${T.actions} .${T.deny}`),hs=()=>Dr(`.${T.loader}`),to=()=>Jt(T.actions),Ze=()=>Jt(T.footer),na=()=>Jt(T["timer-progress-bar"]),_d=()=>Jt(T.close),vd=()=>{const h=Array.from(Ue().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((m,_)=>{const S=parseInt(m.getAttribute("tabindex")),Z=parseInt(_.getAttribute("tabindex"));return S>Z?1:S<Z?-1:0}),f=Array.from(Ue().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(m=>"-1"!==m.getAttribute("tabindex"));return(h=>{const f=[];for(let m=0;m<h.length;m++)-1===f.indexOf(h[m])&&f.push(h[m]);return f})(h.concat(f)).filter(m=>cr(m))},Tr=()=>li(document.body,T.shown)&&!li(document.body,T["toast-shown"])&&!li(document.body,T["no-backdrop"]),ra=()=>Ue()&&li(Ue(),T.toast),it={previousBodyPadding:null},Le=(h,f)=>{if(h.textContent="",f){const _=(new DOMParser).parseFromString(f,"text/html");Array.from(_.querySelector("head").childNodes).forEach(S=>{h.appendChild(S)}),Array.from(_.querySelector("body").childNodes).forEach(S=>{S instanceof HTMLVideoElement||S instanceof HTMLAudioElement?h.appendChild(S.cloneNode(!0)):h.appendChild(S)})}},li=(h,f)=>{if(!f)return!1;const m=f.split(/\s+/);for(let _=0;_<m.length;_++)if(!h.classList.contains(m[_]))return!1;return!0},On=(h,f,m)=>{if(((h,f)=>{Array.from(h.classList).forEach(m=>{!Object.values(T).includes(m)&&!Object.values(us).includes(m)&&!Object.values(f.showClass).includes(m)&&h.classList.remove(m)})})(h,f),f.customClass&&f.customClass[m]){if("string"!=typeof f.customClass[m]&&!f.customClass[m].forEach)return void fn(`Invalid type of customClass.${m}! Expected string or iterable object, got "${typeof f.customClass[m]}"`);ke(h,f.customClass[m])}},ug=(h,f)=>{if(!f)return null;switch(f){case"select":case"textarea":case"file":return h.querySelector(`.${T.popup} > .${T[f]}`);case"checkbox":return h.querySelector(`.${T.popup} > .${T.checkbox} input`);case"radio":return h.querySelector(`.${T.popup} > .${T.radio} input:checked`)||h.querySelector(`.${T.popup} > .${T.radio} input:first-child`);case"range":return h.querySelector(`.${T.popup} > .${T.range} input`);default:return h.querySelector(`.${T.popup} > .${T.input}`)}},wd=h=>{if(h.focus(),"file"!==h.type){const f=h.value;h.value="",h.value=f}},bd=(h,f,m)=>{!h||!f||("string"==typeof f&&(f=f.split(/\s+/).filter(Boolean)),f.forEach(_=>{Array.isArray(h)?h.forEach(S=>{m?S.classList.add(_):S.classList.remove(_)}):m?h.classList.add(_):h.classList.remove(_)}))},ke=(h,f)=>{bd(h,f,!0)},ci=(h,f)=>{bd(h,f,!1)},fs=(h,f)=>{const m=Array.from(h.children);for(let _=0;_<m.length;_++){const S=m[_];if(S instanceof HTMLElement&&li(S,f))return S}},ia=(h,f,m)=>{m===`${parseInt(m)}`&&(m=parseInt(m)),m||0===parseInt(m)?h.style[f]="number"==typeof m?`${m}px`:m:h.style.removeProperty(f)},en=function(h){h.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},pn=h=>{h.style.display="none"},Dw=(h,f,m,_)=>{const S=h.querySelector(f);S&&(S.style[m]=_)},qu=function(h,f){f?en(h,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):pn(h)},cr=h=>!(!h||!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)),Tw=h=>h.scrollHeight>h.clientHeight,Id=h=>{const f=window.getComputedStyle(h),m=parseFloat(f.getPropertyValue("animation-duration")||"0"),_=parseFloat(f.getPropertyValue("transition-duration")||"0");return m>0||_>0},Cd=function(h){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const m=na();cr(m)&&(f&&(m.style.transition="none",m.style.width="100%"),setTimeout(()=>{m.style.transition=`width ${h/1e3}s linear`,m.style.width="0%"},10))},Ie={},Sw=h=>new Promise(f=>{if(!h)return f();const m=window.scrollX,_=window.scrollY;Ie.restoreFocusTimeout=setTimeout(()=>{Ie.previousActiveElement instanceof HTMLElement?(Ie.previousActiveElement.focus(),Ie.previousActiveElement=null):document.body&&document.body.focus(),f()},100),window.scrollTo(m,_)}),Aw=()=>typeof window>"u"||typeof document>"u",xw=`\n <div aria-labelledby="${T.title}" aria-describedby="${T["html-container"]}" class="${T.popup}" tabindex="-1">\n   <button type="button" class="${T.close}"></button>\n   <ul class="${T["progress-steps"]}"></ul>\n   <div class="${T.icon}"></div>\n   <img class="${T.image}" />\n   <h2 class="${T.title}" id="${T.title}"></h2>\n   <div class="${T["html-container"]}" id="${T["html-container"]}"></div>\n   <input class="${T.input}" />\n   <input type="file" class="${T.file}" />\n   <div class="${T.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${T.select}"></select>\n   <div class="${T.radio}"></div>\n   <label for="${T.checkbox}" class="${T.checkbox}">\n     <input type="checkbox" />\n     <span class="${T.label}"></span>\n   </label>\n   <textarea class="${T.textarea}"></textarea>\n   <div class="${T["validation-message"]}" id="${T["validation-message"]}"></div>\n   <div class="${T.actions}">\n     <div class="${T.loader}"></div>\n     <button type="button" class="${T.confirm}"></button>\n     <button type="button" class="${T.deny}"></button>\n     <button type="button" class="${T.cancel}"></button>\n   </div>\n   <div class="${T.footer}"></div>\n   <div class="${T["timer-progress-bar-container"]}">\n     <div class="${T["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),gs=()=>{Ie.currentInstance.resetValidationMessage()},wM=h=>{const f=(()=>{const h=Ot();return!!h&&(h.remove(),ci([document.documentElement,document.body],[T["no-backdrop"],T["toast-shown"],T["has-column"]]),!0)})();if(Aw())return void Si("SweetAlert2 requires document to initialize");const m=document.createElement("div");m.className=T.container,f&&ke(m,T["no-transition"]),Le(m,xw);const _=(h=>"string"==typeof h?document.querySelector(h):h)(h.target);_.appendChild(m),(h=>{const f=Ue();f.setAttribute("role",h.toast?"alert":"dialog"),f.setAttribute("aria-live",h.toast?"polite":"assertive"),h.toast||f.setAttribute("aria-modal","true")})(h),(h=>{"rtl"===window.getComputedStyle(h).direction&&ke(Ot(),T.rtl)})(_),(()=>{const h=Ue(),f=fs(h,T.input),m=fs(h,T.file),_=h.querySelector(`.${T.range} input`),S=h.querySelector(`.${T.range} output`),Z=fs(h,T.select),Je=h.querySelector(`.${T.checkbox} input`),hr=fs(h,T.textarea);f.oninput=gs,m.onchange=gs,Z.onchange=gs,Je.onchange=gs,hr.oninput=gs,_.oninput=()=>{gs(),S.value=_.value},_.onchange=()=>{gs(),S.value=_.value}})()},Ku=(h,f)=>{h instanceof HTMLElement?f.appendChild(h):"object"==typeof h?cg(h,f):h&&Le(f,h)},cg=(h,f)=>{h.jquery?dg(f,h):Le(f,h.toString())},dg=(h,f)=>{if(h.textContent="",0 in f)for(let m=0;m in f;m++)h.appendChild(f[m].cloneNode(!0));else h.appendChild(f.cloneNode(!0))},no=(()=>{if(Aw())return!1;const h=document.createElement("div"),f={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const m in f)if(Object.prototype.hasOwnProperty.call(f,m)&&typeof h.style[m]<"u")return f[m];return!1})(),kw=(h,f)=>{const m=to(),_=hs();f.showConfirmButton||f.showDenyButton||f.showCancelButton?en(m):pn(m),On(m,f,"actions"),function fg(h,f,m){const _=Kn(),S=zr(),Z=cs();Qu(_,"confirm",m),Qu(S,"deny",m),Qu(Z,"cancel",m),function pg(h,f,m,_){_.buttonsStyling?(ke([h,f,m],T.styled),_.confirmButtonColor&&(h.style.backgroundColor=_.confirmButtonColor,ke(h,T["default-outline"])),_.denyButtonColor&&(f.style.backgroundColor=_.denyButtonColor,ke(f,T["default-outline"])),_.cancelButtonColor&&(m.style.backgroundColor=_.cancelButtonColor,ke(m,T["default-outline"]))):ci([h,f,m],T.styled)}(_,S,Z,m),m.reverseButtons&&(m.toast?(h.insertBefore(Z,_),h.insertBefore(S,_)):(h.insertBefore(Z,f),h.insertBefore(S,f),h.insertBefore(_,f)))}(m,_,f),Le(_,f.loaderHtml),On(_,f,"loader")};function Qu(h,f,m){qu(h,m[`show${ju(f)}Button`],"inline-block"),Le(h,m[`${f}ButtonText`]),h.setAttribute("aria-label",m[`${f}ButtonAriaLabel`]),h.className=T[f],On(h,m,`${f}Button`),ke(h,m[`${f}ButtonClass`])}const Sr=(h,f)=>{const m=Ot();m&&(function Mw(h,f){"string"==typeof f?h.style.background=f:f||ke([document.documentElement,document.body],T["no-backdrop"])}(m,f.backdrop),function Nw(h,f){f in T?ke(h,T[f]):(fn('The "position" parameter is not valid, defaulting to "center"'),ke(h,T.center))}(m,f.position),function Rw(h,f){if(f&&"string"==typeof f){const m=`grow-${f}`;m in T&&ke(h,T[m])}}(m,f.grow),On(m,f,"container"))};const Pw=["input","file","range","select","radio","checkbox","textarea"],Ow=h=>{if(!Fn[h.input])return void Si(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${h.input}"`);const f=Ar(h.input),m=Fn[h.input](f,h);en(f),h.inputAutoFocus&&setTimeout(()=>{wd(m)})},di=(h,f)=>{const m=ug(Ue(),h);if(m){(h=>{for(let f=0;f<h.attributes.length;f++){const m=h.attributes[f].name;["type","value","style"].includes(m)||h.removeAttribute(m)}})(m);for(const _ in f)m.setAttribute(_,f[_])}},Lw=h=>{const f=Ar(h.input);"object"==typeof h.customClass&&ke(f,h.customClass.input)},At=(h,f)=>{(!h.placeholder||f.inputPlaceholder)&&(h.placeholder=f.inputPlaceholder)},Wr=(h,f,m)=>{if(m.inputLabel){h.id=T.input;const _=document.createElement("label"),S=T["input-label"];_.setAttribute("for",h.id),_.className=S,"object"==typeof m.customClass&&ke(_,m.customClass.inputLabel),_.innerText=m.inputLabel,f.insertAdjacentElement("beforebegin",_)}},Ar=h=>fs(Ue(),T[h]||T.input),Ed=(h,f)=>{["string","number"].includes(typeof f)?h.value=`${f}`:yd(f)||fn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof f}"`)},Fn={};Fn.text=Fn.email=Fn.password=Fn.number=Fn.tel=Fn.url=(h,f)=>(Ed(h,f.inputValue),Wr(h,h,f),At(h,f),h.type=f.input,h),Fn.file=(h,f)=>(Wr(h,h,f),At(h,f),h),Fn.range=(h,f)=>{const m=h.querySelector("input"),_=h.querySelector("output");return Ed(m,f.inputValue),m.type=f.input,Ed(_,f.inputValue),Wr(m,h,f),h},Fn.select=(h,f)=>{if(h.textContent="",f.inputPlaceholder){const m=document.createElement("option");Le(m,f.inputPlaceholder),m.value="",m.disabled=!0,m.selected=!0,h.appendChild(m)}return Wr(h,h,f),h},Fn.radio=h=>(h.textContent="",h),Fn.checkbox=(h,f)=>{const m=ug(Ue(),"checkbox");m.value="1",m.id=T.checkbox,m.checked=Boolean(f.inputValue);const _=h.querySelector("span");return Le(_,f.inputPlaceholder),m},Fn.textarea=(h,f)=>{Ed(h,f.inputValue),At(h,f),Wr(h,h,f);return setTimeout(()=>{if("MutationObserver"in window){const _=parseInt(window.getComputedStyle(Ue()).width);new MutationObserver(()=>{const Z=h.offsetWidth+(_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight))(h);Ue().style.width=Z>_?`${Z}px`:null}).observe(h,{attributes:!0,attributeFilter:["style"]})}}),h};const Vw=(h,f)=>{const m=zu();On(m,f,"htmlContainer"),f.html?(Ku(f.html,m),en(m,"block")):f.text?(m.textContent=f.text,en(m,"block")):pn(m),((h,f)=>{const m=Ue(),_=ae.innerParams.get(h),S=!_||f.input!==_.input;Pw.forEach(Z=>{const Je=fs(m,T[Z]);di(Z,f.inputAttributes),Je.className=T[Z],S&&pn(Je)}),f.input&&(S&&Ow(f),Lw(f))})(h,f)},ro=(h,f)=>{for(const m in us)f.icon!==m&&ci(h,us[m]);ke(h,us[f.icon]),Bw(h,f),Uw(),On(h,f,"icon")},Uw=()=>{const h=Ue(),f=window.getComputedStyle(h).getPropertyValue("background-color"),m=h.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<m.length;_++)m[_].style.backgroundColor=f},_g=(h,f)=>{let _,m=h.innerHTML;f.iconHtml?_=vg(f.iconHtml):"success"===f.icon?(_='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',m=m.replace(/ style=".*?"/g,"")):_="error"===f.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':vg({question:"?",warning:"!",info:"i"}[f.icon]),m.trim()!==_.trim()&&Le(h,_)},Bw=(h,f)=>{if(f.iconColor){h.style.color=f.iconColor,h.style.borderColor=f.iconColor;for(const m of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Dw(h,m,"backgroundColor",f.iconColor);Dw(h,".swal2-success-ring","borderColor",f.iconColor)}},vg=h=>`<div class="${T["icon-content"]}">${h}</div>`,jw=(h,f)=>{h.className=`${T.popup} ${cr(h)?f.showClass.popup:""}`,f.toast?(ke([document.documentElement,document.body],T["toast-shown"]),ke(h,T.toast)):ke(h,T.modal),On(h,f,"popup"),"string"==typeof f.customClass&&ke(h,f.customClass),f.icon&&ke(h,T[`icon-${f.icon}`])},bt=h=>{const f=document.createElement("li");return ke(f,T["progress-step"]),Le(f,h),f},Gw=h=>{const f=document.createElement("li");return ke(f,T["progress-step-line"]),h.progressStepsDistance&&ia(f,"width",h.progressStepsDistance),f},Zu=(h,f)=>{((h,f)=>{const m=Ot(),_=Ue();f.toast?(ia(m,"width",f.width),_.style.width="100%",_.insertBefore(hs(),ls())):ia(_,"width",f.width),ia(_,"padding",f.padding),f.color&&(_.style.color=f.color),f.background&&(_.style.background=f.background),pn(Wu()),jw(_,f)})(0,f),Sr(0,f),((h,f)=>{const m=eo();f.progressSteps&&0!==f.progressSteps.length?(en(m),m.textContent="",f.currentProgressStep>=f.progressSteps.length&&fn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),f.progressSteps.forEach((_,S)=>{const Z=bt(_);if(m.appendChild(Z),S===f.currentProgressStep&&ke(Z,T["active-progress-step"]),S!==f.progressSteps.length-1){const Je=Gw(f);m.appendChild(Je)}})):pn(m)})(0,f),((h,f)=>{const m=ae.innerParams.get(h),_=ls();m&&f.icon===m.icon?(_g(_,f),ro(_,f)):f.icon||f.iconHtml?f.icon&&-1===Object.keys(us).indexOf(f.icon)?(Si(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${f.icon}"`),pn(_)):(en(_),_g(_,f),ro(_,f),ke(_,f.showClass.icon)):pn(_)})(h,f),((h,f)=>{const m=Js();f.imageUrl?(en(m,""),m.setAttribute("src",f.imageUrl),m.setAttribute("alt",f.imageAlt),ia(m,"width",f.imageWidth),ia(m,"height",f.imageHeight),m.className=T.image,On(m,f,"image")):pn(m)})(0,f),((h,f)=>{const m=Gu();qu(m,f.title||f.titleText,"block"),f.title&&Ku(f.title,m),f.titleText&&(m.innerText=f.titleText),On(m,f,"title")})(0,f),((h,f)=>{const m=_d();Le(m,f.closeButtonHtml),On(m,f,"closeButton"),qu(m,f.showCloseButton),m.setAttribute("aria-label",f.closeButtonAriaLabel)})(0,f),Vw(h,f),kw(0,f),((h,f)=>{const m=Ze();qu(m,f.footer),f.footer&&Ku(f.footer,m),On(m,f,"footer")})(0,f),"function"==typeof f.didRender&&f.didRender(Ue())};function He(){const h=ae.innerParams.get(this);if(!h)return;const f=ae.domCache.get(this);pn(f.loader),ra()?h.icon&&en(ls()):Td(f),ci([f.popup,f.actions],T.loading),f.popup.removeAttribute("aria-busy"),f.popup.removeAttribute("data-loading"),f.confirmButton.disabled=!1,f.denyButton.disabled=!1,f.cancelButton.disabled=!1}const Td=h=>{const f=h.popup.getElementsByClassName(h.loader.getAttribute("data-button-to-replace"));f.length?en(f[0],"inline-block"):!cr(Kn())&&!cr(zr())&&!cr(cs())&&pn(h.actions)};const bg=()=>Kn()&&Kn().click(),xi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ju=h=>{h.keydownTarget&&h.keydownHandlerAdded&&(h.keydownTarget.removeEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!1)},el=(h,f)=>{const m=vd();if(m.length)return(h+=f)===m.length?h=0:-1===h&&(h=m.length-1),void m[h].focus();Ue().focus()},O=["ArrowRight","ArrowDown"],tl=["ArrowLeft","ArrowUp"],oe=(h,f,m)=>{const _=ae.innerParams.get(h);_&&(f.isComposing||229===f.keyCode||(_.stopKeydownPropagation&&f.stopPropagation(),"Enter"===f.key?Be(h,f,_):"Tab"===f.key?Ww(f):[...O,...tl].includes(f.key)?IM(f.key):"Escape"===f.key&&qw(f,_,m)))},Be=(h,f,m)=>{if(ea(m.allowEnterKey)&&f.target&&h.getInput()&&f.target instanceof HTMLElement&&f.target.outerHTML===h.getInput().outerHTML){if(["textarea","file"].includes(m.input))return;bg(),f.preventDefault()}},Ww=h=>{const f=h.target,m=vd();let _=-1;for(let S=0;S<m.length;S++)if(f===m[S]){_=S;break}el(_,h.shiftKey?-1:1),h.stopPropagation(),h.preventDefault()},IM=h=>{const f=Kn(),m=zr(),_=cs();if(document.activeElement instanceof HTMLElement&&![f,m,_].includes(document.activeElement))return;const Z=O.includes(h)?"nextElementSibling":"previousElementSibling";let Je=document.activeElement;for(let hr=0;hr<to().children.length;hr++){if(Je=Je[Z],!Je)return;if(Je instanceof HTMLButtonElement&&cr(Je))break}Je instanceof HTMLButtonElement&&Je.focus()},qw=(h,f,m)=>{ea(f.allowEscapeKey)&&(h.preventDefault(),m(xi.esc))};var ki={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Kw=()=>{Array.from(document.body.children).forEach(f=>{f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},CM=()=>{const h=navigator.userAgent,f=!!h.match(/iPad/i)||!!h.match(/iPhone/i),m=!!h.match(/WebKit/i);f&&m&&!h.match(/CriOS/i)&&Ue().scrollHeight>window.innerHeight-44&&(Ot().style.paddingBottom="44px")},Mi=()=>{const h=Ot();let f;h.ontouchstart=m=>{f=EM(m)},h.ontouchmove=m=>{f&&(m.preventDefault(),m.stopPropagation())}},EM=h=>{const f=h.target,m=Ot();return!DM(h)&&!TM(h)&&(f===m||!Tw(m)&&f instanceof HTMLElement&&"INPUT"!==f.tagName&&"TEXTAREA"!==f.tagName&&!(Tw(zu())&&zu().contains(f)))},DM=h=>h.touches&&h.touches.length&&"stylus"===h.touches[0].touchType,TM=h=>h.touches&&h.touches.length>1,Yw=()=>{null===it.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(it.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${it.previousBodyPadding+(()=>{const h=document.createElement("div");h.className=T["scrollbar-measure"],document.body.appendChild(h);const f=h.getBoundingClientRect().width-h.clientWidth;return document.body.removeChild(h),f})()}px`)};function Ig(h,f,m,_){ra()?sa(h,_):(Sw(m).then(()=>sa(h,_)),Ju(Ie)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(f.setAttribute("style","display:none !important"),f.removeAttribute("class"),f.innerHTML=""):f.remove(),Tr()&&(null!==it.previousBodyPadding&&(document.body.style.paddingRight=`${it.previousBodyPadding}px`,it.previousBodyPadding=null),(()=>{if(li(document.body,T.iosfix)){const h=parseInt(document.body.style.top,10);ci(document.body,T.iosfix),document.body.style.top="",document.body.scrollTop=-1*h}})(),Kw()),function xM(){ci([document.documentElement,document.body],[T.shown,T["height-auto"],T["no-backdrop"],T["toast-shown"]])}()}function gn(h){h=J(h);const f=ki.swalPromiseResolve.get(this),m=kM(this);this.isAwaitingPromise()?h.isDismissed||(nl(this),f(h)):m&&f(h)}const kM=h=>{const f=Ue();if(!f)return!1;const m=ae.innerParams.get(h);if(!m||li(f,m.hideClass.popup))return!1;ci(f,m.showClass.popup),ke(f,m.hideClass.popup);const _=Ot();return ci(_,m.showClass.backdrop),ke(_,m.hideClass.backdrop),NM(h,f,m),!0};const nl=h=>{h.isAwaitingPromise()&&(ae.awaitingPromise.delete(h),ae.innerParams.get(h)||h._destroy())},J=h=>typeof h>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},h),NM=(h,f,m)=>{const _=Ot(),S=no&&Id(f);"function"==typeof m.willClose&&m.willClose(f),S?Ft(h,f,_,m.returnFocus,m.didClose):Ig(h,_,m.returnFocus,m.didClose)},Ft=(h,f,m,_,S)=>{Ie.swalCloseEventFinishedCallback=Ig.bind(null,h,m,_,S),f.addEventListener(no,function(Z){Z.target===f&&(Ie.swalCloseEventFinishedCallback(),delete Ie.swalCloseEventFinishedCallback)})},sa=(h,f)=>{setTimeout(()=>{"function"==typeof f&&f.bind(h.params)(),h._destroy()})};function Cg(h,f,m){const _=ae.domCache.get(h);f.forEach(S=>{_[S].disabled=m})}function Ad(h,f){if(h)if("radio"===h.type){const _=h.parentNode.parentNode.querySelectorAll("input");for(let S=0;S<_.length;S++)_[S].disabled=f}else h.disabled=f}const io={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},te=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],kd={},Jw=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Yn=h=>Object.prototype.hasOwnProperty.call(io,h),Md=h=>-1!==te.indexOf(h),Tg=h=>kd[h],Qe=h=>{Yn(h)||fn(`Unknown parameter "${h}"`)},RM=h=>{Jw.includes(h)&&fn(`The parameter "${h}" is incompatible with toasts`)},PM=h=>{Tg(h)&&og(h,Tg(h))};const Nd=h=>{const f={};return Object.keys(h).forEach(m=>{Md(m)?f[m]=h[m]:fn(`Invalid parameter to update: ${m}`)}),f};const eb=h=>{Sg(h),delete h.params,delete Ie.keydownHandler,delete Ie.keydownTarget,delete Ie.currentInstance},Sg=h=>{h.isAwaitingPromise()?(Rd(ae,h),ae.awaitingPromise.set(h,!0)):(Rd(ki,h),Rd(ae,h))},Rd=(h,f)=>{for(const m in h)h[m].delete(f)};var Pd=Object.freeze({__proto__:null,hideLoading:He,disableLoading:He,getInput:function qe(h){const f=ae.innerParams.get(h||this),m=ae.domCache.get(h||this);return m?ug(m.popup,f.input):null},close:gn,isAwaitingPromise:function $e(){return!!ae.awaitingPromise.get(this)},rejectPromise:function MM(h){const f=ki.swalPromiseReject.get(this);nl(this),f&&f(h)},handleAwaitingPromise:nl,closePopup:gn,closeModal:gn,closeToast:gn,enableButtons:function Xw(){Cg(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Zw(){Cg(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Eg(){Ad(this.getInput(),!1)},disableInput:function rl(){Ad(this.getInput(),!0)},showValidationMessage:function xd(h){const f=ae.domCache.get(this),m=ae.innerParams.get(this);Le(f.validationMessage,h),f.validationMessage.className=T["validation-message"],m.customClass&&m.customClass.validationMessage&&ke(f.validationMessage,m.customClass.validationMessage),en(f.validationMessage);const _=this.getInput();_&&(_.setAttribute("aria-invalid",!0),_.setAttribute("aria-describedby",T["validation-message"]),wd(_),ke(_,T.inputerror))},resetValidationMessage:function Dg(){const h=ae.domCache.get(this);h.validationMessage&&pn(h.validationMessage);const f=this.getInput();f&&(f.removeAttribute("aria-invalid"),f.removeAttribute("aria-describedby"),ci(f,T.inputerror))},update:function oa(h){const f=Ue(),m=ae.innerParams.get(this);if(!f||li(f,m.hideClass.popup))return void fn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const _=Nd(h),S=Object.assign({},m,_);Zu(this,S),ae.innerParams.set(this,S),Object.defineProperties(this,{params:{value:Object.assign({},this.params,h),writable:!1,enumerable:!0}})},_destroy:function il(){const h=ae.domCache.get(this),f=ae.innerParams.get(this);f?(h.popup&&Ie.swalCloseEventFinishedCallback&&(Ie.swalCloseEventFinishedCallback(),delete Ie.swalCloseEventFinishedCallback),"function"==typeof f.didDestroy&&f.didDestroy(),eb(this)):Sg(this)}});const qr=h=>{let f=Ue();f||new ys,f=Ue();const m=hs();ra()?pn(ls()):so(f,h),en(m),f.setAttribute("data-loading","true"),f.setAttribute("aria-busy","true"),f.focus()},so=(h,f)=>{const m=to(),_=hs();!f&&cr(Kn())&&(f=Kn()),en(m),f&&(pn(f),_.setAttribute("data-button-to-replace",f.className)),_.parentNode.insertBefore(_,f),ke([h,m],T.loading)},Ag=h=>h.checked?1:0,Se=h=>h.checked?h.value:null,sl=h=>h.files.length?null!==h.getAttribute("multiple")?h.files:h.files[0]:null,Od=(h,f)=>{const m=Ue(),_=S=>{nb[f.input](m,Fd(S),f)};md(f.inputOptions)||yd(f.inputOptions)?(qr(Kn()),ta(f.inputOptions).then(S=>{h.hideLoading(),_(S)})):"object"==typeof f.inputOptions?_(f.inputOptions):Si("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof f.inputOptions)},aa=(h,f)=>{const m=h.getInput();pn(m),ta(f.inputValue).then(_=>{m.value="number"===f.input?`${parseFloat(_)||0}`:`${_}`,en(m),m.focus(),h.hideLoading()}).catch(_=>{Si(`Error in inputValue promise: ${_}`),m.value="",en(m),m.focus(),h.hideLoading()})},nb={select:(h,f,m)=>{const _=fs(h,T.select),S=(Z,Je,hr)=>{const Un=document.createElement("option");Un.value=hr,Le(Un,Je),Un.selected=xg(hr,m.inputValue),Z.appendChild(Un)};f.forEach(Z=>{const Je=Z[0],hr=Z[1];if(Array.isArray(hr)){const Un=document.createElement("optgroup");Un.label=Je,Un.disabled=!1,_.appendChild(Un),hr.forEach(pa=>S(Un,pa[1],pa[0]))}else S(_,hr,Je)}),_.focus()},radio:(h,f,m)=>{const _=fs(h,T.radio);f.forEach(Z=>{const Je=Z[0],hr=Z[1],Un=document.createElement("input"),pa=document.createElement("label");Un.type="radio",Un.name=T.radio,Un.value=Je,xg(Je,m.inputValue)&&(Un.checked=!0);const Fg=document.createElement("span");Le(Fg,hr),Fg.className=T.label,pa.appendChild(Un),pa.appendChild(Fg),_.appendChild(pa)});const S=_.querySelectorAll("input");S.length&&S[0].focus()}},Fd=h=>{const f=[];return typeof Map<"u"&&h instanceof Map?h.forEach((m,_)=>{let S=m;"object"==typeof S&&(S=Fd(S)),f.push([_,S])}):Object.keys(h).forEach(m=>{let _=h[m];"object"==typeof _&&(_=Fd(_)),f.push([m,_])}),f},xg=(h,f)=>f&&f.toString()===h.toString(),rb=(h,f)=>{const m=ae.innerParams.get(h);if(!m.input)return void Si(`The "input" parameter is needed to be set when using returnInputValueOn${ju(f)}`);const _=((h,f)=>{const m=h.getInput();if(!m)return null;switch(f.input){case"checkbox":return Ag(m);case"radio":return Se(m);case"file":return sl(m);default:return f.inputAutoTrim?m.value.trim():m.value}})(h,m);m.inputValidator?Kr(h,_,f):h.getInput().checkValidity()?"deny"===f?kr(h,_):la(h,_):(h.enableButtons(),h.showValidationMessage(m.validationMessage))},Kr=(h,f,m)=>{const _=ae.innerParams.get(h);h.disableInput(),Promise.resolve().then(()=>ta(_.inputValidator(f,_.validationMessage))).then(Z=>{h.enableButtons(),h.enableInput(),Z?h.showValidationMessage(Z):"deny"===m?kr(h,f):la(h,f)})},kr=(h,f)=>{const m=ae.innerParams.get(h||void 0);m.showLoaderOnDeny&&qr(zr()),m.preDeny?(ae.awaitingPromise.set(h||void 0,!0),Promise.resolve().then(()=>ta(m.preDeny(f,m.validationMessage))).then(S=>{!1===S?(h.hideLoading(),nl(h)):h.close({isDenied:!0,value:typeof S>"u"?f:S})}).catch(S=>ua(h||void 0,S))):h.close({isDenied:!0,value:f})},Re=(h,f)=>{h.close({isConfirmed:!0,value:f})},ua=(h,f)=>{h.rejectPromise(f)},la=(h,f)=>{const m=ae.innerParams.get(h||void 0);m.showLoaderOnConfirm&&qr(),m.preConfirm?(h.resetValidationMessage(),ae.awaitingPromise.set(h||void 0,!0),Promise.resolve().then(()=>ta(m.preConfirm(f,m.validationMessage))).then(S=>{cr(Wu())||!1===S?(h.hideLoading(),nl(h)):Re(h,typeof S>"u"?f:S)}).catch(S=>ua(h||void 0,S))):Re(h,f)},kg=(h,f,m)=>{f.popup.onclick=()=>{const _=ae.innerParams.get(h);_&&(hi(_)||_.timer||_.input)||m(xi.close)}},hi=h=>h.showConfirmButton||h.showDenyButton||h.showCancelButton||h.showCloseButton;let Ri=!1;const ib=h=>{h.popup.onmousedown=()=>{h.container.onmouseup=function(f){h.container.onmouseup=void 0,f.target===h.container&&(Ri=!0)}}},Ln=h=>{h.container.onmousedown=()=>{h.popup.onmouseup=function(f){h.popup.onmouseup=void 0,(f.target===h.popup||h.popup.contains(f.target))&&(Ri=!0)}}},sb=(h,f,m)=>{f.container.onclick=_=>{const S=ae.innerParams.get(h);Ri?Ri=!1:_.target===f.container&&ea(S.allowOutsideClick)&&m(xi.backdrop)}},Vd=h=>h instanceof Element||(h=>"object"==typeof h&&h.jquery)(h);const mn=()=>{if(Ie.timeout)return(()=>{const h=na(),f=parseInt(window.getComputedStyle(h).width);h.style.removeProperty("transition"),h.style.width="100%";const m=parseInt(window.getComputedStyle(h).width);h.style.width=f/m*100+"%"})(),Ie.timeout.stop()},Ve=()=>{if(Ie.timeout){const h=Ie.timeout.start();return Cd(h),h}};let Vn=!1;const Mr={};const fe=h=>{for(let f=h.target;f&&f!==document;f=f.parentNode)for(const m in Mr){const _=f.getAttribute(m);if(_)return void Mr[m].fire({template:_})}};var lt=Object.freeze({__proto__:null,isValidParameter:Yn,isUpdatableParameter:Md,isDeprecatedParameter:Tg,argsToParams:h=>{const f={};return"object"!=typeof h[0]||Vd(h[0])?["title","html","icon"].forEach((m,_)=>{const S=h[_];"string"==typeof S||Vd(S)?f[m]=S:void 0!==S&&Si(`Unexpected type of ${m}! Expected "string" or "Element", got ${typeof S}`)}):Object.assign(f,h[0]),f},getContainer:Ot,getPopup:Ue,getTitle:Gu,getHtmlContainer:zu,getImage:Js,getIcon:ls,getIconContent:()=>Jt(T["icon-content"]),getInputLabel:()=>Jt(T["input-label"]),getCloseButton:_d,getActions:to,getConfirmButton:Kn,getDenyButton:zr,getCancelButton:cs,getLoader:hs,getFooter:Ze,getTimerProgressBar:na,getFocusableElements:vd,getValidationMessage:Wu,getProgressSteps:eo,isLoading:()=>Ue().hasAttribute("data-loading"),isVisible:()=>cr(Ue()),clickConfirm:bg,clickDeny:()=>zr()&&zr().click(),clickCancel:()=>cs()&&cs().click(),fire:function ob(){const h=this;for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return new h(...m)},mixin:function Ng(h){return class f extends(this){_main(_,S){return super._main(_,Object.assign({},h,S))}}},showLoading:qr,enableLoading:qr,getTimerLeft:()=>Ie.timeout&&Ie.timeout.getTimerLeft(),stopTimer:mn,resumeTimer:Ve,toggleTimer:()=>{const h=Ie.timeout;return h&&(h.running?mn():Ve())},increaseTimer:h=>{if(Ie.timeout){const f=Ie.timeout.increase(h);return Cd(f,!0),f}},isTimerRunning:()=>Ie.timeout&&Ie.timeout.isRunning(),bindClickHandler:function H(){Mr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Vn||(document.body.addEventListener("click",fe),Vn=!0)}});class Nr{constructor(f,m){this.callback=f,this.remaining=m,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(f){const m=this.running;return m&&this.stop(),this.remaining+=f,m&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Pi=["swal-title","swal-html","swal-footer"],ao=h=>{const f={};return Array.from(h.querySelectorAll("swal-param")).forEach(_=>{dr(_,["name","value"]);const S=_.getAttribute("name"),Z=_.getAttribute("value");f[S]="boolean"==typeof io[S]?"false"!==Z:"object"==typeof io[S]?JSON.parse(Z):Z}),f},pt=h=>{const f={};return Array.from(h.querySelectorAll("swal-function-param")).forEach(_=>{const S=_.getAttribute("name"),Z=_.getAttribute("value");f[S]=new Function(`return ${Z}`)()}),f},ol=h=>{const f={};return Array.from(h.querySelectorAll("swal-button")).forEach(_=>{dr(_,["type","color","aria-label"]);const S=_.getAttribute("type");f[`${S}ButtonText`]=_.innerHTML,f[`show${ju(S)}Button`]=!0,_.hasAttribute("color")&&(f[`${S}ButtonColor`]=_.getAttribute("color")),_.hasAttribute("aria-label")&&(f[`${S}ButtonAriaLabel`]=_.getAttribute("aria-label"))}),f},al=h=>{const f={},m=h.querySelector("swal-image");return m&&(dr(m,["src","width","height","alt"]),m.hasAttribute("src")&&(f.imageUrl=m.getAttribute("src")),m.hasAttribute("width")&&(f.imageWidth=m.getAttribute("width")),m.hasAttribute("height")&&(f.imageHeight=m.getAttribute("height")),m.hasAttribute("alt")&&(f.imageAlt=m.getAttribute("alt"))),f},ye=h=>{const f={},m=h.querySelector("swal-icon");return m&&(dr(m,["type","color"]),m.hasAttribute("type")&&(f.icon=m.getAttribute("type")),m.hasAttribute("color")&&(f.iconColor=m.getAttribute("color")),f.iconHtml=m.innerHTML),f},Ud=h=>{const f={},m=h.querySelector("swal-input");m&&(dr(m,["type","label","placeholder","value"]),f.input=m.getAttribute("type")||"text",m.hasAttribute("label")&&(f.inputLabel=m.getAttribute("label")),m.hasAttribute("placeholder")&&(f.inputPlaceholder=m.getAttribute("placeholder")),m.hasAttribute("value")&&(f.inputValue=m.getAttribute("value")));const _=Array.from(h.querySelectorAll("swal-input-option"));return _.length&&(f.inputOptions={},_.forEach(S=>{dr(S,["value"]);const Z=S.getAttribute("value");f.inputOptions[Z]=S.innerHTML})),f},ca=(h,f)=>{const m={};for(const _ in f){const S=f[_],Z=h.querySelector(S);Z&&(dr(Z,[]),m[S.replace(/^swal-/,"")]=Z.innerHTML.trim())}return m},Rg=h=>{const f=Pi.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(h.children).forEach(m=>{const _=m.tagName.toLowerCase();f.includes(_)||fn(`Unrecognized element <${_}>`)})},dr=(h,f)=>{Array.from(h.attributes).forEach(m=>{-1===f.indexOf(m.name)&&fn([`Unrecognized attribute "${m.name}" on <${h.tagName.toLowerCase()}>.`,f.length?`Allowed attributes are: ${f.join(", ")}`:"To set the value, use HTML within the element."])})},da=h=>{const f=Ot(),m=Ue();"function"==typeof h.willOpen&&h.willOpen(m);const S=window.getComputedStyle(document.body).overflowY;Pg(f,m,h),setTimeout(()=>{Qr(f,m)},10),Tr()&&(ha(f,h.scrollbarPadding,S),Array.from(document.body.children).forEach(f=>{f===Ot()||f.contains(Ot())||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")),f.setAttribute("aria-hidden","true"))})),!ra()&&!Ie.previousActiveElement&&(Ie.previousActiveElement=document.activeElement),"function"==typeof h.didOpen&&setTimeout(()=>h.didOpen(m)),ci(f,T["no-transition"])},ms=h=>{const f=Ue();if(h.target!==f)return;const m=Ot();f.removeEventListener(no,ms),m.style.overflowY="auto"},Qr=(h,f)=>{no&&Id(f)?(h.style.overflowY="hidden",f.addEventListener(no,ms)):h.style.overflowY="auto"},ha=(h,f,m)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!li(document.body,T.iosfix)){const f=document.body.scrollTop;document.body.style.top=-1*f+"px",ke(document.body,T.iosfix),Mi(),CM()}})(),f&&"hidden"!==m&&Yw(),setTimeout(()=>{h.scrollTop=0})},Pg=(h,f,m)=>{ke(h,m.showClass.backdrop),f.style.setProperty("opacity","0","important"),en(f,"grid"),setTimeout(()=>{ke(f,m.showClass.popup),f.style.removeProperty("opacity")},10),ke([document.documentElement,document.body],T.shown),m.heightAuto&&m.backdrop&&!m.toast&&ke([document.documentElement,document.body],T["height-auto"])};var Ye={email:(h,f)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(h)?Promise.resolve():Promise.resolve(f||"Invalid email address"),url:(h,f)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(h)?Promise.resolve():Promise.resolve(f||"Invalid URL")};function Og(h){(function LM(h){h.inputValidator||Object.keys(Ye).forEach(f=>{h.input===f&&(h.inputValidator=Ye[f])})})(h),h.showLoaderOnConfirm&&!h.preConfirm&&fn("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Bd(h){(!h.target||"string"==typeof h.target&&!document.querySelector(h.target)||"string"!=typeof h.target&&!h.target.appendChild)&&(fn('Target parameter is not valid, defaulting to "body"'),h.target="body")}(h),"string"==typeof h.title&&(h.title=h.title.split("\n").join("<br />")),wM(h)}let Xn;class fi{constructor(){if(typeof window>"u")return;Xn=this;for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];const S=Object.freeze(this.constructor.argsToParams(m));Object.defineProperties(this,{params:{value:S,writable:!1,enumerable:!0,configurable:!0}});const Z=Xn._main(Xn.params);ae.promise.set(this,Z)}_main(f){let m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(h=>{!1===h.backdrop&&h.allowOutsideClick&&fn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const f in h)Qe(f),h.toast&&RM(f),PM(f)})(Object.assign({},m,f)),Ie.currentInstance&&(Ie.currentInstance._destroy(),Tr()&&Kw()),Ie.currentInstance=Xn;const _=_n(f,m);Og(_),Object.freeze(_),Ie.timeout&&(Ie.timeout.stop(),delete Ie.timeout),clearTimeout(Ie.restoreFocusTimeout);const S=VM(Xn);return Zu(Xn,_),ae.innerParams.set(Xn,_),uo(Xn,S,_)}then(f){return ae.promise.get(this).then(f)}finally(f){return ae.promise.get(this).finally(f)}}const uo=(h,f,m)=>new Promise((_,S)=>{const Z=Je=>{h.close({isDismissed:!0,dismiss:Je})};ki.swalPromiseResolve.set(h,_),ki.swalPromiseReject.set(h,S),f.confirmButton.onclick=()=>{(h=>{const f=ae.innerParams.get(h);h.disableButtons(),f.input?rb(h,"confirm"):la(h,!0)})(h)},f.denyButton.onclick=()=>{(h=>{const f=ae.innerParams.get(h);h.disableButtons(),f.returnInputValueOnDeny?rb(h,"deny"):kr(h,!1)})(h)},f.cancelButton.onclick=()=>{((h,f)=>{h.disableButtons(),f(xi.cancel)})(h,Z)},f.closeButton.onclick=()=>{Z(xi.close)},((h,f,m)=>{ae.innerParams.get(h).toast?kg(h,f,m):(ib(f),Ln(f),sb(h,f,m))})(h,f,Z),((h,f,m,_)=>{Ju(f),m.toast||(f.keydownHandler=S=>oe(h,S,_),f.keydownTarget=m.keydownListenerCapture?window:Ue(),f.keydownListenerCapture=m.keydownListenerCapture,f.keydownTarget.addEventListener("keydown",f.keydownHandler,{capture:f.keydownListenerCapture}),f.keydownHandlerAdded=!0)})(h,Ie,m,Z),((h,f)=>{"select"===f.input||"radio"===f.input?Od(h,f):["text","email","number","tel","textarea"].includes(f.input)&&(md(f.inputValue)||yd(f.inputValue))&&(qr(Kn()),aa(h,f))})(h,m),da(m),Zn(Ie,m,Z),Rr(f,m),setTimeout(()=>{f.container.scrollTop=0})}),_n=(h,f)=>{const m=(h=>{const f="string"==typeof h.template?document.querySelector(h.template):h.template;if(!f)return{};const m=f.content;return Rg(m),Object.assign(ao(m),pt(m),ol(m),al(m),ye(m),Ud(m),ca(m,Pi))})(h),_=Object.assign({},io,f,m,h);return _.showClass=Object.assign({},io.showClass,_.showClass),_.hideClass=Object.assign({},io.hideClass,_.hideClass),_},VM=h=>{const f={popup:Ue(),container:Ot(),actions:to(),confirmButton:Kn(),denyButton:zr(),cancelButton:cs(),loader:hs(),closeButton:_d(),validationMessage:Wu(),progressSteps:eo()};return ae.domCache.set(h,f),f},Zn=(h,f,m)=>{const _=na();pn(_),f.timer&&(h.timeout=new Nr(()=>{m("timer"),delete h.timeout},f.timer),f.timerProgressBar&&(en(_),On(_,f,"timerProgressBar"),setTimeout(()=>{h.timeout&&h.timeout.running&&Cd(f.timer)})))},Rr=(h,f)=>{if(!f.toast){if(!ea(f.allowEnterKey))return void fa();$d(h,f)||el(-1,1)}},$d=(h,f)=>f.focusDeny&&cr(h.denyButton)?(h.denyButton.focus(),!0):f.focusCancel&&cr(h.cancelButton)?(h.cancelButton.focus(),!0):!(!f.focusConfirm||!cr(h.confirmButton)||(h.confirmButton.focus(),0)),fa=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const h=new Date,f=localStorage.getItem("swal-initiation");f?(h.getTime()-Date.parse(f))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const m=document.createElement("audio");m.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",m.loop=!0,document.body.appendChild(m),setTimeout(()=>{m.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${h}`)}Object.assign(fi.prototype,Pd),Object.assign(fi,lt),Object.keys(Pd).forEach(h=>{fi[h]=function(){if(Xn)return Xn[h](...arguments)}}),fi.DismissReason=xi,fi.version="11.7.1";const ys=fi;return ys.default=ys,ys}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(ae,ui){var xe=ae.createElement("style");if(ae.getElementsByTagName("head")[0].appendChild(xe),xe.styleSheet)xe.styleSheet.disabled||(xe.styleSheet.cssText=ui);else try{xe.innerHTML=ui}catch{xe.innerText=ui}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')}},gd=>{gd(gd.s=525)}]);